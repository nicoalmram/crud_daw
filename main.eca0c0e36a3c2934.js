"use strict";var PN=Object.defineProperty,kN=Object.defineProperties,FN=Object.getOwnPropertyDescriptors,TM=Object.getOwnPropertySymbols,LN=Object.prototype.hasOwnProperty,VN=Object.prototype.propertyIsEnumerable,AM=(Je,Ee,O)=>Ee in Je?PN(Je,Ee,{enumerable:!0,configurable:!0,writable:!0,value:O}):Je[Ee]=O,SM=(Je,Ee)=>{for(var O in Ee||(Ee={}))LN.call(Ee,O)&&AM(Je,O,Ee[O]);if(TM)for(var O of TM(Ee))VN.call(Ee,O)&&AM(Je,O,Ee[O]);return Je},MM=(Je,Ee)=>kN(Je,FN(Ee));(self.webpackChunkcrud_daw=self.webpackChunkcrud_daw||[]).push([[179],{2011:(Je,Ee,O)=>{O.d(Ee,{Dh:()=>ie,GT:()=>pe,cc:()=>Ae,hO:()=>He,on:()=>j,pX:()=>ne,xv:()=>ue});var g=O(5e3),Q=O(127),P=O(5813);Je=O.hmd(Je);const oe=["ngOnDestroy"],ne=(De,Ge,Ke,Ce={})=>new Proxy(De,{get:(ve,we)=>Ke.runOutsideAngular(()=>{var Be;if(De[we])return(null===(Be=null==Ce?void 0:Ce.spy)||void 0===Be?void 0:Be.get)&&Ce.spy.get(we,De[we]),De[we];if(oe.indexOf(we)>-1)return()=>{};const Ue=Ge.toPromise().then(B=>{const _e=B&&B[we];return"function"==typeof _e?_e.bind(B):_e&&_e.then?_e.then(W=>Ke.run(()=>W)):Ke.run(()=>_e)});return new Proxy(()=>{},{get:(B,_e)=>Ue[_e],apply:(B,_e,W)=>Ue.then(re=>{var J;const me=re&&re(...W);return(null===(J=null==Ce?void 0:Ce.spy)||void 0===J?void 0:J.apply)&&Ce.spy.apply(we,W,me),me})})})}),pe=(De,Ge)=>{Ge.forEach(Ke=>{Object.getOwnPropertyNames(Ke.prototype||Ke).forEach(Ce=>{Object.defineProperty(De.prototype,Ce,Object.getOwnPropertyDescriptor(Ke.prototype||Ke,Ce))})})};class ae{constructor(Ge){return Ge}}const ie=new g.OlP("angularfire2.app.options"),ue=new g.OlP("angularfire2.app.name");function j(De,Ge,Ke){const ve="object"==typeof Ke&&Ke||{};ve.name=ve.name||"string"==typeof Ke&&Ke||"[DEFAULT]";const Be=Q.Z.apps.filter(Ue=>Ue&&Ue.name===ve.name)[0]||Ge.runOutsideAngular(()=>Q.Z.initializeApp(De,ve));try{JSON.stringify(De)!==JSON.stringify(Be.options)&&U("error",`${Be.name} Firebase App already initialized with different options${Je.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ue){}return new ae(Be)}const U=(De,...Ge)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[De](...Ge)},X={provide:ae,useFactory:j,deps:[ie,g.R0b,[new g.FiY,ue]]};let He=(()=>{class De{constructor(Ke){Q.Z.registerVersion("angularfire",P.q4.full,"core"),Q.Z.registerVersion("angularfire",P.q4.full,"app-compat"),Q.Z.registerVersion("angular",g.q4F.full,Ke.toString())}static initializeApp(Ke,Ce){return{ngModule:De,providers:[{provide:ie,useValue:Ke},{provide:ue,useValue:Ce}]}}}return De.\u0275fac=function(Ke){return new(Ke||De)(g.LFG(g.Lbi))},De.\u0275mod=g.oAB({type:De}),De.\u0275inj=g.cJS({providers:[X]}),De})();function Ae(De,Ge,Ke,Ce,ve){const[,we,Be]=globalThis.\u0275AngularfireInstanceCache.find(Ue=>Ue[0]===De)||[];if(we)return function Re(De,Ge){try{return De.toString()===Ge.toString()}catch(Ke){return De===Ge}}(ve,Be)||(he("error",`${Ge} was already initialized on the ${Ke} Firebase App with different settings.${Ve?" You may need to reload as Firebase is not HMR aware.":""}`),he("warn",{is:ve,was:Be})),we;{const Ue=Ce();return globalThis.\u0275AngularfireInstanceCache.push([De,Ue,ve]),Ue}}const Ve=!!Je.hot,he=(De,...Ge)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[De](...Ge)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Je,Ee,O)=>{O.d(Ee,{q4:()=>ya,iC:()=>Ah,HU:()=>ed,vb:()=>Pp,JM:()=>Ho});var g=O(5e3),Q=O(5867),P=O(5861),oe=O(9681),ne=O(2090),pe=O(4859),ae=O(1877),ie=O(8766);const ue="@firebase/installations",j="0.5.9",X=`w:${j}`,He="FIS_v2",Ge=new ne.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ke(D){return D instanceof ne.ZR&&D.code.includes("request-failed")}function Ce({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function ve(D){return{token:D.token,requestStatus:2,expiresIn:re(D.expiresIn),creationTime:Date.now()}}function we(D,b){return Be.apply(this,arguments)}function Be(){return(Be=(0,P.Z)(function*(D,b){const F=(yield b.json()).error;return Ge.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function Ue({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function B(D,{refreshToken:b}){const M=Ue(D);return M.append("Authorization",function J(D){return`${He} ${D}`}(b)),M}function _e(D){return W.apply(this,arguments)}function W(){return(W=(0,P.Z)(function*(D){const b=yield D();return b.status>=500&&b.status<600?D():b})).apply(this,arguments)}function re(D){return Number(D.replace("s","000"))}function me(D,b){return se.apply(this,arguments)}function se(){return(se=(0,P.Z)(function*({appConfig:D,heartbeatServiceProvider:b},{fid:M}){const F=Ce(D),K=Ue(D),te=b.getImmediate({optional:!0});if(te){const at=yield te.getHeartbeatsHeader();at&&K.append("x-firebase-client",at)}const Ze={method:"POST",headers:K,body:JSON.stringify({fid:M,authVersion:He,appId:D.appId,sdkVersion:X})},tt=yield _e(()=>fetch(F,Ze));if(tt.ok){const at=yield tt.json();return{fid:at.fid||M,registrationStatus:2,refreshToken:at.refreshToken,authToken:ve(at.authToken)}}throw yield we("Create Installation",tt)})).apply(this,arguments)}function Ne(D){return new Promise(b=>{setTimeout(b,D)})}const Pt=/^[cdef][\w-]{21}$/;function ze(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const M=function zt(D){return function ot(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Pt.test(M)?M:""}catch(D){return""}}function fn(D){return`${D.appName}!${D.appId}`}const Zt=new Map;function Ht(D,b){const M=fn(D);Mt(M,b),function $i(D,b){const M=function rr(){return!zr&&"BroadcastChannel"in self&&(zr=new BroadcastChannel("[Firebase] FID Change"),zr.onmessage=D=>{Mt(D.data.key,D.data.fid)}),zr}();M&&M.postMessage({key:D,fid:b}),function Er(){0===Zt.size&&zr&&(zr.close(),zr=null)}()}(M,b)}function Mt(D,b){const M=Zt.get(D);if(M)for(const F of M)F(b)}let zr=null;const Wr="firebase-installations-store";let Ei=null;function ht(){return Ei||(Ei=(0,ie.X3)("firebase-installations-database",1,{upgrade:(D,b)=>{0===b&&D.createObjectStore(Wr)}})),Ei}function Kr(D,b){return ln.apply(this,arguments)}function ln(){return(ln=(0,P.Z)(function*(D,b){const M=fn(D),K=(yield ht()).transaction(Wr,"readwrite"),te=K.objectStore(Wr),fe=yield te.get(M);return yield te.put(b,M),yield K.done,(!fe||fe.fid!==b.fid)&&Ht(D,b.fid),b})).apply(this,arguments)}function pn(D){return js.apply(this,arguments)}function js(){return(js=(0,P.Z)(function*(D){const b=fn(D),F=(yield ht()).transaction(Wr,"readwrite");yield F.objectStore(Wr).delete(b),yield F.done})).apply(this,arguments)}function Zr(D,b){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,P.Z)(function*(D,b){const M=fn(D),K=(yield ht()).transaction(Wr,"readwrite"),te=K.objectStore(Wr),fe=yield te.get(M),Ze=b(fe);return void 0===Ze?yield te.delete(M):yield te.put(Ze,M),yield K.done,Ze&&(!fe||fe.fid!==Ze.fid)&&Ht(D,Ze.fid),Ze})).apply(this,arguments)}function _n(D){return oi.apply(this,arguments)}function oi(){return(oi=(0,P.Z)(function*(D){let b;const M=yield Zr(D.appConfig,F=>{const K=Io(F),te=kt(D,K);return b=te.registrationPromise,te.installationEntry});return""===M.fid?{installationEntry:yield b}:{installationEntry:M,registrationPromise:b}})).apply(this,arguments)}function Io(D){return $s(D||{fid:ze(),registrationStatus:0})}function kt(D,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(Ge.create("app-offline"))};const M={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},F=function rt(D,b){return mt.apply(this,arguments)}(D,M);return{installationEntry:M,registrationPromise:F}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:ir(D)}:{installationEntry:b}}function mt(){return(mt=(0,P.Z)(function*(D,b){try{const M=yield me(D,b);return Kr(D.appConfig,M)}catch(M){throw Ke(M)&&409===M.customData.serverCode?yield pn(D.appConfig):yield Kr(D.appConfig,{fid:b.fid,registrationStatus:0}),M}})).apply(this,arguments)}function ir(D){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,P.Z)(function*(D){let b=yield Nt(D.appConfig);for(;1===b.registrationStatus;)yield Ne(100),b=yield Nt(D.appConfig);if(0===b.registrationStatus){const{installationEntry:M,registrationPromise:F}=yield _n(D);return F||M}return b})).apply(this,arguments)}function Nt(D){return Zr(D,b=>{if(!b)throw Ge.create("installation-not-found");return $s(b)})}function $s(D){return function sr(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function or(D,b){return L.apply(this,arguments)}function L(){return(L=(0,P.Z)(function*({appConfig:D,heartbeatServiceProvider:b},M){const F=H(D,M),K=B(D,M),te=b.getImmediate({optional:!0});if(te){const at=yield te.getHeartbeatsHeader();at&&K.append("x-firebase-client",at)}const Ze={method:"POST",headers:K,body:JSON.stringify({installation:{sdkVersion:X,appId:D.appId}})},tt=yield _e(()=>fetch(F,Ze));if(tt.ok)return ve(yield tt.json());throw yield we("Generate Auth Token",tt)})).apply(this,arguments)}function H(D,{fid:b}){return`${Ce(D)}/${b}/authTokens:generate`}function G(D){return be.apply(this,arguments)}function be(){return(be=(0,P.Z)(function*(D,b=!1){let M;const F=yield Zr(D.appConfig,te=>{if(!vt(te))throw Ge.create("not-registered");const fe=te.authToken;if(!b&&en(fe))return te;if(1===fe.requestStatus)return M=$(D,b),te;{if(!navigator.onLine)throw Ge.create("app-offline");const Ze=Cn(te);return M=Ye(D,Ze),Ze}});return M?yield M:F.authToken})).apply(this,arguments)}function $(D,b){return Y.apply(this,arguments)}function Y(){return(Y=(0,P.Z)(function*(D,b){let M=yield Me(D.appConfig);for(;1===M.authToken.requestStatus;)yield Ne(100),M=yield Me(D.appConfig);const F=M.authToken;return 0===F.requestStatus?G(D,b):F})).apply(this,arguments)}function Me(D){return Zr(D,b=>{if(!vt(b))throw Ge.create("not-registered");return function wr(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(b.authToken)?Object.assign(Object.assign({},b),{authToken:{requestStatus:0}}):b})}function Ye(D,b){return ct.apply(this,arguments)}function ct(){return(ct=(0,P.Z)(function*(D,b){try{const M=yield or(D,b),F=Object.assign(Object.assign({},b),{authToken:M});return yield Kr(D.appConfig,F),M}catch(M){if(!Ke(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const F=Object.assign(Object.assign({},b),{authToken:{requestStatus:0}});yield Kr(D.appConfig,F)}else yield pn(D.appConfig);throw M}})).apply(this,arguments)}function vt(D){return void 0!==D&&2===D.registrationStatus}function en(D){return 2===D.requestStatus&&!function yt(D){const b=Date.now();return b<D.creationTime||D.creationTime+D.expiresIn<b+36e5}(D)}function Cn(D){const b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:b})}function ta(){return(ta=(0,P.Z)(function*(D){const b=D,{installationEntry:M,registrationPromise:F}=yield _n(b);return F?F.catch(console.error):G(b).catch(console.error),M.fid})).apply(this,arguments)}function na(){return(na=(0,P.Z)(function*(D,b=!1){const M=D;return yield Tn(M),(yield G(M,b)).token})).apply(this,arguments)}function Tn(D){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,P.Z)(function*(D){const{registrationPromise:b}=yield _n(D);b&&(yield b)})).apply(this,arguments)}function Do(D){return Ge.create("missing-app-config-values",{valueName:D})}const kr="installations",st=D=>{const b=D.getProvider("app").getImmediate(),M=function qn(D){if(!D||!D.options)throw Do("App Configuration");if(!D.name)throw Do("App Name");const b=["projectId","apiKey","appId"];for(const M of b)if(!D.options[M])throw Do(M);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(b);return{app:b,appConfig:M,heartbeatServiceProvider:(0,oe._getProvider)(b,"heartbeat"),_delete:()=>Promise.resolve()}},Wt=D=>{const b=D.getProvider("app").getImmediate(),M=(0,oe._getProvider)(b,kr).getImmediate();return{getId:()=>function za(D){return ta.apply(this,arguments)}(M),getToken:K=>function Wa(D){return na.apply(this,arguments)}(M,K)}};(function Fr(){(0,oe._registerComponent)(new pe.wA(kr,st,"PUBLIC")),(0,oe._registerComponent)(new pe.wA("installations-internal",Wt,"PRIVATE"))})(),(0,oe.registerVersion)(ue,j),(0,oe.registerVersion)(ue,j,"esm2017");const wi="@firebase/remote-config",gn=new ne.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Dp{constructor(b,M,F,K){this.client=b,this.storage=M,this.storageCache=F,this.logger=K}isCachedDataFresh(b,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-M,K=F<=b;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${b}. Is cache hit: ${K}.`),K}fetch(b){var M=this;return(0,P.Z)(function*(){const[F,K]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(K&&M.isCachedDataFresh(b.cacheMaxAgeMillis,F))return K;b.eTag=K&&K.eTag;const te=yield M.client.fetch(b),fe=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===te.status&&fe.push(M.storage.setLastSuccessfulFetchResponse(te)),yield Promise.all(fe),te})()}}function Mc(D=navigator){return D.languages&&D.languages[0]||D.language}class ur{constructor(b,M,F,K,te,fe){this.firebaseInstallations=b,this.sdkVersion=M,this.namespace=F,this.projectId=K,this.apiKey=te,this.appId=fe}fetch(b){var M=this;return(0,P.Z)(function*(){const[F,K]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),fe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Ze={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},tt={sdk_version:M.sdkVersion,app_instance_id:F,app_instance_id_token:K,app_id:M.appId,language_code:Mc()},at={method:"POST",headers:Ze,body:JSON.stringify(tt)},Ft=fetch(fe,at),Et=new Promise((fr,ns)=>{b.signal.addEventListener(()=>{const Ps=new Error("The operation was aborted.");Ps.name="AbortError",ns(Ps)})});let In;try{yield Promise.race([Ft,Et]),In=yield Ft}catch(fr){let ns="fetch-client-network";throw"AbortError"===fr.name&&(ns="fetch-timeout"),gn.create(ns,{originalErrorMessage:fr.message})}let Bn=In.status;const ts=In.headers.get("ETag")||void 0;let Pi,fi;if(200===In.status){let fr;try{fr=yield In.json()}catch(ns){throw gn.create("fetch-client-parse",{originalErrorMessage:ns.message})}Pi=fr.entries,fi=fr.state}if("INSTANCE_STATE_UNSPECIFIED"===fi?Bn=500:"NO_CHANGE"===fi?Bn=304:("NO_TEMPLATE"===fi||"EMPTY_CONFIG"===fi)&&(Pi={}),304!==Bn&&200!==Bn)throw gn.create("fetch-status",{httpStatus:Bn});return{status:Bn,eTag:ts,config:Pi}})()}}class bp{constructor(b,M){this.client=b,this.storage=M}fetch(b){var M=this;return(0,P.Z)(function*(){const F=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(b,F)})()}attemptFetch(b,{throttleEndTimeMillis:M,backoffCount:F}){var K=this;return(0,P.Z)(function*(){yield function Es(D,b){return new Promise((M,F)=>{const K=Math.max(b-Date.now(),0),te=setTimeout(M,K);D.addEventListener(()=>{clearTimeout(te),F(gn.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(b.signal,M);try{const te=yield K.client.fetch(b);return yield K.storage.deleteThrottleMetadata(),te}catch(te){if(!function xc(D){if(!(D instanceof ne.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}(te))throw te;const fe={throttleEndTimeMillis:Date.now()+(0,ne.$s)(F),backoffCount:F+1};return yield K.storage.setThrottleMetadata(fe),K.attemptFetch(b,fe)}})()}}class Rc{constructor(b,M,F,K,te){this.app=b,this._client=M,this._storageCache=F,this._storage=K,this._logger=te,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function el(D,b){const M=D.target.error||void 0;return gn.create(b,{originalErrorMessage:M&&M.message})}const ws="app_namespace_store";class Sp{constructor(b,M,F,K=function Ap(){return new Promise((D,b)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=F=>{b(el(F,"storage-open"))},M.onsuccess=F=>{D(F.target.result)},M.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(ws,{keyPath:"compositeKey"})}}catch(M){b(gn.create("storage-open",{originalErrorMessage:M}))}})}()){this.appId=b,this.appName=M,this.namespace=F,this.openDbPromise=K}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(b){return this.set("last_fetch_status",b)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(b){return this.set("last_successful_fetch_timestamp_millis",b)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(b){return this.set("last_successful_fetch_response",b)}getActiveConfig(){return this.get("active_config")}setActiveConfig(b){return this.set("active_config",b)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(b){return this.set("active_config_etag",b)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(b){return this.set("throttle_metadata",b)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(b){var M=this;return(0,P.Z)(function*(){const F=yield M.openDbPromise;return new Promise((K,te)=>{const Ze=F.transaction([ws],"readonly").objectStore(ws),tt=M.createCompositeKey(b);try{const at=Ze.get(tt);at.onerror=Ft=>{te(el(Ft,"storage-get"))},at.onsuccess=Ft=>{const Et=Ft.target.result;K(Et?Et.value:void 0)}}catch(at){te(gn.create("storage-get",{originalErrorMessage:at&&at.message}))}})})()}set(b,M){var F=this;return(0,P.Z)(function*(){const K=yield F.openDbPromise;return new Promise((te,fe)=>{const tt=K.transaction([ws],"readwrite").objectStore(ws),at=F.createCompositeKey(b);try{const Ft=tt.put({compositeKey:at,value:M});Ft.onerror=Et=>{fe(el(Et,"storage-set"))},Ft.onsuccess=()=>{te()}}catch(Ft){fe(gn.create("storage-set",{originalErrorMessage:Ft&&Ft.message}))}})})()}delete(b){var M=this;return(0,P.Z)(function*(){const F=yield M.openDbPromise;return new Promise((K,te)=>{const Ze=F.transaction([ws],"readwrite").objectStore(ws),tt=M.createCompositeKey(b);try{const at=Ze.delete(tt);at.onerror=Ft=>{te(el(Ft,"storage-delete"))},at.onsuccess=()=>{K()}}catch(at){te(gn.create("storage-delete",{originalErrorMessage:at&&at.message}))}})})()}createCompositeKey(b){return[this.appId,this.appName,this.namespace,b].join()}}class Oc{constructor(b){this.storage=b}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var b=this;return(0,P.Z)(function*(){const M=b.storage.getLastFetchStatus(),F=b.storage.getLastSuccessfulFetchTimestampMillis(),K=b.storage.getActiveConfig(),te=yield M;te&&(b.lastFetchStatus=te);const fe=yield F;fe&&(b.lastSuccessfulFetchTimestampMillis=fe);const Ze=yield K;Ze&&(b.activeConfig=Ze)})()}setLastFetchStatus(b){return this.lastFetchStatus=b,this.storage.setLastFetchStatus(b)}setLastSuccessfulFetchTimestampMillis(b){return this.lastSuccessfulFetchTimestampMillis=b,this.storage.setLastSuccessfulFetchTimestampMillis(b)}setActiveConfig(b){return this.activeConfig=b,this.storage.setActiveConfig(b)}}function Qa(){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,P.Z)(function*(){if(!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch(D){return!1}})).apply(this,arguments)}!function bo(){(0,oe._registerComponent)(new pe.wA("remote-config",function D(b,{instanceIdentifier:M}){const F=b.getProvider("app").getImmediate(),K=b.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw gn.create("registration-window");if(!(0,ne.hl)())throw gn.create("indexed-db-unavailable");const{projectId:te,apiKey:fe,appId:Ze}=F.options;if(!te)throw gn.create("registration-project-id");if(!fe)throw gn.create("registration-api-key");if(!Ze)throw gn.create("registration-app-id");const tt=new Sp(Ze,F.name,M=M||"firebase"),at=new Oc(tt),Ft=new ae.Yd(wi);Ft.logLevel=ae.in.ERROR;const Et=new ur(K,oe.SDK_VERSION,M,te,fe,Ze),In=new bp(Et,tt),Bn=new Dp(In,tt,at,Ft),ts=new Rc(F,Bn,at,tt,Ft);return function Yt(D){const b=(0,ne.m9)(D);b._initializePromise||(b._initializePromise=b._storageCache.loadFromStorage().then(()=>{b._isInitializationComplete=!0}))}(ts),ts},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(wi,"0.3.8"),(0,oe.registerVersion)(wi,"0.3.8","esm2017")}();const kc="/firebase-messaging-sw.js",lr="/firebase-cloud-messaging-push-scope",qs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Co="google.c.a.c_id",Fc="google.c.a.c_l",wh="google.c.a.ts",Lc="google.c.a.e";var To=(()=>{return(D=To||(To={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",To;var D})();function Dr(D){const b=new Uint8Array(D);return btoa(String.fromCharCode(...b)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Vc(D){const M=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(M),K=new Uint8Array(F.length);for(let te=0;te<F.length;++te)K[te]=F.charCodeAt(te);return K}const br="fcm_token_details_db",Qr="fcm_token_object_Store";function tl(D){return Uc.apply(this,arguments)}function Uc(){return Uc=(0,P.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(te=>te.name).includes(br))return null;let b=null;return(yield(0,ie.X3)(br,5,{upgrade:(F=(0,P.Z)(function*(K,te,fe,Ze){var tt;if(te<2||!K.objectStoreNames.contains(Qr))return;const at=Ze.objectStore(Qr),Ft=yield at.index("fcmSenderId").get(D);if(yield at.clear(),Ft)if(2===te){const Et=Ft;if(!Et.auth||!Et.p256dh||!Et.endpoint)return;b={token:Et.fcmToken,createTime:null!==(tt=Et.createTime)&&void 0!==tt?tt:Date.now(),subscriptionOptions:{auth:Et.auth,p256dh:Et.p256dh,endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:"string"==typeof Et.vapidKey?Et.vapidKey:Dr(Et.vapidKey)}}}else if(3===te){const Et=Ft;b={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:Dr(Et.auth),p256dh:Dr(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:Dr(Et.vapidKey)}}}else if(4===te){const Et=Ft;b={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:Dr(Et.auth),p256dh:Dr(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:Dr(Et.vapidKey)}}}}),function(te,fe,Ze,tt){return F.apply(this,arguments)})})).close(),yield(0,ie.Lj)(br),yield(0,ie.Lj)("fcm_vapid_details_db"),yield(0,ie.Lj)("undefined"),nl(b)?b:null;var F}),Uc.apply(this,arguments)}function nl(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:b}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}const Ai="firebase-messaging-store";let Ih=null;function Qt(){return Ih||(Ih=(0,ie.X3)("firebase-messaging-database",1,{upgrade:(D,b)=>{0===b&&D.createObjectStore(Ai)}})),Ih}function aa(D){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,P.Z)(function*(D){const b=zn(D),F=yield(yield Qt()).transaction(Ai).objectStore(Ai).get(b);if(F)return F;{const K=yield tl(D.appConfig.senderId);if(K)return yield Gt(D,K),K}})).apply(this,arguments)}function Gt(D,b){return ua.apply(this,arguments)}function ua(){return(ua=(0,P.Z)(function*(D,b){const M=zn(D),K=(yield Qt()).transaction(Ai,"readwrite");return yield K.objectStore(Ai).put(b,M),yield K.done,b})).apply(this,arguments)}function Ja(D){return Is.apply(this,arguments)}function Is(){return(Is=(0,P.Z)(function*(D){const b=zn(D),F=(yield Qt()).transaction(Ai,"readwrite");yield F.objectStore(Ai).delete(b),yield F.done})).apply(this,arguments)}function zn({appConfig:D}){return D.appId}const on=new ne.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Si(D,b){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,P.Z)(function*(D,b){const M=yield Mo(D),F=Ds(b),K={method:"POST",headers:M,body:JSON.stringify(F)};let te;try{te=yield(yield fetch(Mi(D.appConfig),K)).json()}catch(fe){throw on.create("token-subscribe-failed",{errorInfo:fe})}if(te.error)throw on.create("token-subscribe-failed",{errorInfo:te.error.message});if(!te.token)throw on.create("token-subscribe-no-token");return te.token})).apply(this,arguments)}function Ks(D,b){return qi.apply(this,arguments)}function qi(){return(qi=(0,P.Z)(function*(D,b){const M=yield Mo(D),F=Ds(b.subscriptionOptions),K={method:"PATCH",headers:M,body:JSON.stringify(F)};let te;try{te=yield(yield fetch(`${Mi(D.appConfig)}/${b.token}`,K)).json()}catch(fe){throw on.create("token-update-failed",{errorInfo:fe})}if(te.error)throw on.create("token-update-failed",{errorInfo:te.error.message});if(!te.token)throw on.create("token-update-no-token");return te.token})).apply(this,arguments)}function la(D,b){return ui.apply(this,arguments)}function ui(){return(ui=(0,P.Z)(function*(D,b){const F={method:"DELETE",headers:yield Mo(D)};try{const te=yield(yield fetch(`${Mi(D.appConfig)}/${b}`,F)).json();if(te.error)throw on.create("token-unsubscribe-failed",{errorInfo:te.error.message})}catch(K){throw on.create("token-unsubscribe-failed",{errorInfo:K})}})).apply(this,arguments)}function Mi({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Mo(D){return ft.apply(this,arguments)}function ft(){return(ft=(0,P.Z)(function*({appConfig:D,installations:b}){const M=yield b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Ds({p256dh:D,auth:b,endpoint:M,vapidKey:F}){const K={web:{endpoint:M,auth:b,p256dh:D}};return F!==qs&&(K.web.applicationPubKey=F),K}const sl=6048e5;function ca(D){return ol.apply(this,arguments)}function ol(){return(ol=(0,P.Z)(function*(D){const b=yield Ro(D.swRegistration,D.vapidKey),M={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:b.endpoint,auth:Dr(b.getKey("auth")),p256dh:Dr(b.getKey("p256dh"))},F=yield aa(D.firebaseDependencies);if(F){if(tu(F.subscriptionOptions,M))return Date.now()>=F.createTime+sl?al(D,{token:F.token,createTime:Date.now(),subscriptionOptions:M}):F.token;try{yield la(D.firebaseDependencies,F.token)}catch(K){console.warn(K)}return Te(D.firebaseDependencies,M)}return Te(D.firebaseDependencies,M)})).apply(this,arguments)}function Xa(D){return eu.apply(this,arguments)}function eu(){return(eu=(0,P.Z)(function*(D){const b=yield aa(D.firebaseDependencies);b&&(yield la(D.firebaseDependencies,b.token),yield Ja(D.firebaseDependencies));const M=yield D.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function al(D,b){return xo.apply(this,arguments)}function xo(){return(xo=(0,P.Z)(function*(D,b){try{const M=yield Ks(D.firebaseDependencies,b),F=Object.assign(Object.assign({},b),{token:M,createTime:Date.now()});return yield Gt(D.firebaseDependencies,F),M}catch(M){throw yield Xa(D),M}})).apply(this,arguments)}function Te(D,b){return xt.apply(this,arguments)}function xt(){return(xt=(0,P.Z)(function*(D,b){const F={token:yield Si(D,b),createTime:Date.now(),subscriptionOptions:b};return yield Gt(D,F),F.token})).apply(this,arguments)}function Ro(D,b){return rn.apply(this,arguments)}function rn(){return(rn=(0,P.Z)(function*(D,b){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Vc(b)})})).apply(this,arguments)}function tu(D,b){return b.vapidKey===D.vapidKey&&b.endpoint===D.endpoint&&b.auth===D.auth&&b.p256dh===D.p256dh}function Zs(D){const b={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Jr(D,b){if(!b.notification)return;D.notification={};const M=b.notification.title;M&&(D.notification.title=M);const F=b.notification.body;F&&(D.notification.body=F);const K=b.notification.image;K&&(D.notification.image=K)}(b,D),function ul(D,b){!b.data||(D.data=b.data)}(b,D),function ll(D,b){if(!b.fcmOptions)return;D.fcmOptions={};const M=b.fcmOptions.link;M&&(D.fcmOptions.link=M);const F=b.fcmOptions.analytics_label;F&&(D.fcmOptions.analyticsLabel=F)}(b,D),b}function cl(D){return"object"==typeof D&&!!D&&Co in D}function Bc(D,b){const M=[];for(let F=0;F<D.length;F++)M.push(D.charAt(F)),F<b.length&&M.push(b.charAt(F));return M.join("")}function zi(D){return on.create("missing-app-config-values",{valueName:D})}Bc("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Bc("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class cr{constructor(b,M,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const K=function Mp(D){if(!D||!D.options)throw zi("App Configuration Object");if(!D.name)throw zi("App Name");const b=["projectId","apiKey","appId","messagingSenderId"],{options:M}=D;for(const F of b)if(!M[F])throw zi(F);return{appName:D.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(b);this.firebaseDependencies={app:b,appConfig:K,installations:M,analyticsProvider:F}}_delete(){return Promise.resolve()}}function Xr(D){return nu.apply(this,arguments)}function nu(){return(nu=(0,P.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(kc,{scope:lr}),D.swRegistration.update().catch(()=>{})}catch(b){throw on.create("failed-service-worker-registration",{browserErrorMessage:b.message})}})).apply(this,arguments)}function bs(D,b){return li.apply(this,arguments)}function li(){return(li=(0,P.Z)(function*(D,b){if(!b&&!D.swRegistration&&(yield Xr(D)),b||!D.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw on.create("invalid-sw-registration");D.swRegistration=b}})).apply(this,arguments)}function dl(D,b){return ru.apply(this,arguments)}function ru(){return(ru=(0,P.Z)(function*(D,b){b?D.vapidKey=b:D.vapidKey||(D.vapidKey=qs)})).apply(this,arguments)}function hl(){return(hl=(0,P.Z)(function*(D,b){if(!navigator)throw on.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw on.create("permission-blocked");return yield dl(D,null==b?void 0:b.vapidKey),yield bs(D,null==b?void 0:b.serviceWorkerRegistration),ca(D)})).apply(this,arguments)}function da(D,b,M){return su.apply(this,arguments)}function su(){return(su=(0,P.Z)(function*(D,b,M){const F=ou(b);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:M[Co],message_name:M[Fc],message_time:M[wh],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ou(D){switch(D){case To.NOTIFICATION_CLICKED:return"notification_open";case To.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function $c(){return($c=(0,P.Z)(function*(D,b){const M=b.data;if(!M.isFirebaseMessaging)return;D.onMessageHandler&&M.messageType===To.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(Zs(M)):D.onMessageHandler.next(Zs(M)));const F=M.data;cl(F)&&"1"===F[Lc]&&(yield da(D,M.messageType,F))})).apply(this,arguments)}const au="@firebase/messaging",Hc=D=>{const b=new cr(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function jc(D,b){return $c.apply(this,arguments)}(b,M)),b},No=D=>{const b=D.getProvider("messaging").getImmediate();return{getToken:F=>function iu(D,b){return hl.apply(this,arguments)}(b,F)}};function uu(){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,P.Z)(function*(){try{yield(0,ne.eu)()}catch(D){return!1}return"undefined"!=typeof window&&(0,ne.hl)()&&(0,ne.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Gc(){(0,oe._registerComponent)(new pe.wA("messaging",Hc,"PUBLIC")),(0,oe._registerComponent)(new pe.wA("messaging-internal",No,"PRIVATE")),(0,oe.registerVersion)(au,"0.9.13"),(0,oe.registerVersion)(au,"0.9.13","esm2017")}();const qc="analytics",xp="firebase_id",Wi="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Js="https://www.googletagmanager.com/gtag/js",Sn=new ae.Yd("@firebase/analytics");function zc(D){return Promise.all(D.map(b=>b.catch(M=>M)))}function Rp(D,b){const M=document.createElement("script");M.src=`${Js}?l=${D}&id=${b}`,M.async=!0,document.head.appendChild(M)}function Oo(D,b,M,F,K,te){return lu.apply(this,arguments)}function lu(){return(lu=(0,P.Z)(function*(D,b,M,F,K,te){const fe=F[K];try{if(fe)yield b[fe];else{const tt=(yield zc(M)).find(at=>at.measurementId===K);tt&&(yield b[tt.appId])}}catch(Ze){Sn.error(Ze)}D("config",K,te)})).apply(this,arguments)}function Np(D,b,M,F,K){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,P.Z)(function*(D,b,M,F,K){try{let te=[];if(K&&K.send_to){let fe=K.send_to;Array.isArray(fe)||(fe=[fe]);const Ze=yield zc(M);for(const tt of fe){const at=Ze.find(Et=>Et.measurementId===tt),Ft=at&&b[at.appId];if(!Ft){te=[];break}te.push(Ft)}}0===te.length&&(te=Object.values(b)),yield Promise.all(te),D("event",F,K||{})}catch(te){Sn.error(te)}})).apply(this,arguments)}function an(){const D=window.document.getElementsByTagName("script");for(const b of Object.values(D))if(b.src&&b.src.includes(Js))return b;return null}const it=new ne.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),pa=new class Mn{constructor(b={},M=1e3){this.throttleMetadata=b,this.intervalMillis=M}getThrottleMetadata(b){return this.throttleMetadata[b]}setThrottleMetadata(b,M){this.throttleMetadata[b]=M}deleteThrottleMetadata(b){delete this.throttleMetadata[b]}};function Wc(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Po(D){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,P.Z)(function*(D){var b;const{appId:M,apiKey:F}=D,K={method:"GET",headers:Wc(F)},te=Wi.replace("{app-id}",M),fe=yield fetch(te,K);if(200!==fe.status&&304!==fe.status){let Ze="";try{const tt=yield fe.json();(null===(b=tt.error)||void 0===b?void 0:b.message)&&(Ze=tt.error.message)}catch(tt){}throw it.create("config-fetch-failed",{httpStatus:fe.status,responseMessage:Ze})}return fe.json()})).apply(this,arguments)}function mn(D){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,P.Z)(function*(D,b=pa,M){const{appId:F,apiKey:K,measurementId:te}=D.options;if(!F)throw it.create("no-app-id");if(!K){if(te)return{measurementId:te,appId:F};throw it.create("no-api-key")}const fe=b.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ze=new pl;return setTimeout((0,P.Z)(function*(){Ze.abort()}),void 0!==M?M:6e4),xi({appId:F,apiKey:K,measurementId:te},fe,Ze,b)})).apply(this,arguments)}function xi(D,b,M){return It.apply(this,arguments)}function It(){return(It=(0,P.Z)(function*(D,{throttleEndTimeMillis:b,backoffCount:M},F,K=pa){const{appId:te,measurementId:fe}=D;try{yield Kc(F,b)}catch(Ze){if(fe)return Sn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${fe} provided in the "measurementId" field in the local Firebase config. [${Ze.message}]`),{appId:te,measurementId:fe};throw Ze}try{const Ze=yield Po(D);return K.deleteThrottleMetadata(te),Ze}catch(Ze){if(!Zc(Ze)){if(K.deleteThrottleMetadata(te),fe)return Sn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${fe} provided in the "measurementId" field in the local Firebase config. [${Ze.message}]`),{appId:te,measurementId:fe};throw Ze}const tt=503===Number(Ze.customData.httpStatus)?(0,ne.$s)(M,K.intervalMillis,30):(0,ne.$s)(M,K.intervalMillis),at={throttleEndTimeMillis:Date.now()+tt,backoffCount:M+1};return K.setThrottleMetadata(te,at),Sn.debug(`Calling attemptFetch again in ${tt} millis`),xi(D,at,F,K)}})).apply(this,arguments)}function Kc(D,b){return new Promise((M,F)=>{const K=Math.max(b-Date.now(),0),te=setTimeout(M,K);D.addEventListener(()=>{clearTimeout(te),F(it.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}function Zc(D){if(!(D instanceof ne.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}class pl{constructor(){this.listeners=[]}addEventListener(b){this.listeners.push(b)}abort(){this.listeners.forEach(b=>b())}}function gl(){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,P.Z)(function*(){if(!(0,ne.hl)())return Sn.warn(it.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ne.eu)()}catch(D){return Sn.warn(it.create("indexeddb-unavailable",{errorInfo:D}).message),!1}return!0})).apply(this,arguments)}function ko(){return(ko=(0,P.Z)(function*(D,b,M,F,K,te,fe){var Ze;const tt=mn(D);tt.then(Bn=>{M[Bn.measurementId]=Bn.appId,D.options.measurementId&&Bn.measurementId!==D.options.measurementId&&Sn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${Bn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Bn=>Sn.error(Bn)),b.push(tt);const at=gl().then(Bn=>{if(Bn)return F.getId()}),[Ft,Et]=yield Promise.all([tt,at]);an()||Rp(te,Ft.measurementId),K("js",new Date);const In=null!==(Ze=null==fe?void 0:fe.config)&&void 0!==Ze?Ze:{};return In.origin="firebase",In.update=!0,null!=Et&&(In[xp]=Et),K("config",Ft.measurementId,In),Ft.measurementId})).apply(this,arguments)}class eo{constructor(b){this.app=b}_delete(){return delete Zn[this.app.options.appId],Promise.resolve()}}let Zn={},to=[];const no={};let Lo,Ms,Fo="dataLayer",Vo=!1;function Zi(D,b,M){!function ga(){const D=[];if((0,ne.ru)()&&D.push("This is a browser extension environment."),(0,ne.zI)()||D.push("Cookies are not available."),D.length>0){const b=D.map((F,K)=>`(${K+1}) ${F}`).join(" "),M=it.create("invalid-analytics-context",{errorInfo:b});Sn.warn(M.message)}}();const F=D.options.appId;if(!F)throw it.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw it.create("no-api-key");Sn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Zn[F])throw it.create("already-exists",{id:F});if(!Vo){!function Xs(D){let b=[];Array.isArray(window[D])?b=window[D]:window[D]=b}(Fo);const{wrappedGtag:te,gtagCore:fe}=function Op(D,b,M,F,K){let te=function(...fe){window[F].push(arguments)};return window[K]&&"function"==typeof window[K]&&(te=window[K]),window[K]=function cu(D,b,M,F){function te(){return(te=(0,P.Z)(function*(fe,Ze,tt){try{"event"===fe?yield Np(D,b,M,Ze,tt):"config"===fe?yield Oo(D,b,M,F,Ze,tt):D("set",Ze)}catch(at){Sn.error(at)}})).apply(this,arguments)}return function K(fe,Ze,tt){return te.apply(this,arguments)}}(te,D,b,M),{gtagCore:te,wrappedGtag:window[K]}}(Zn,to,no,Fo,"gtag");Ms=te,Lo=fe,Vo=!0}return Zn[F]=function As(D,b,M,F,K,te,fe){return ko.apply(this,arguments)}(D,to,no,b,Lo,Fo,M),new eo(D)}function Yn(){return(Yn=(0,P.Z)(function*(D,b,M,F,K){if(K&&K.global)D("event",M,F);else{const te=yield b;D("event",M,Object.assign(Object.assign({},F),{send_to:te}))}})).apply(this,arguments)}function Ni(){return du.apply(this,arguments)}function du(){return(du=(0,P.Z)(function*(){if((0,ne.ru)()||!(0,ne.zI)()||!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch(D){return!1}})).apply(this,arguments)}const Ur="@firebase/analytics";!function Rs(){(0,oe._registerComponent)(new pe.wA(qc,(b,{options:M})=>Zi(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,oe._registerComponent)(new pe.wA("analytics-internal",function D(b){try{const M=b.getProvider(qc).getImmediate();return{logEvent:(F,K,te)=>function Uo(D,b,M,F){D=(0,ne.m9)(D),function ro(D,b,M,F,K){return Yn.apply(this,arguments)}(Ms,Zn[D.app.options.appId],b,M,F).catch(K=>Sn.error(K))}(M,F,K,te)}}catch(M){throw it.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,oe.registerVersion)(Ur,"0.7.9"),(0,oe.registerVersion)(Ur,"0.7.9","esm2017")}();var Qc=O(4408),vl=O(7565);const ma=new class wn extends vl.v{}(class Qi extends Qc.o{constructor(b,M){super(b,M),this.scheduler=b,this.work=M}schedule(b,M=0){return M>0?super.schedule(b,M):(this.delay=M,this.state=b,this.scheduler.flush(this),this)}execute(b,M){return M>0||this.closed?super.execute(b,M):this._execute(b,M)}requestAsyncId(b,M,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(b,M,F):b.flush(this)}});var Jc=O(4986),Th=O(8505),Tr=O(9468),Ar=O(5363);const ya=new g.GfV("7.3.0"),Bo="__angularfire_symbol__analyticsIsSupportedValue",Ji="__angularfire_symbol__analyticsIsSupported",Ns="__angularfire_symbol__remoteConfigIsSupportedValue",Xi="__angularfire_symbol__remoteConfigIsSupported",jo="__angularfire_symbol__messagingIsSupportedValue",Tt="__angularfire_symbol__messagingIsSupported";function Ho(D,b,M){if(b){if(1===b.length)return b[0];const te=b.filter(fe=>fe.app===M);if(1===te.length)return te[0]}return M.container.getProvider(D).getImmediate({optional:!0})}globalThis[Ji]||(globalThis[Ji]=Ni().then(D=>globalThis[Bo]=D).catch(()=>globalThis[Bo]=!1)),globalThis[Tt]||(globalThis[Tt]=uu().then(D=>globalThis[jo]=D).catch(()=>globalThis[jo]=!1)),globalThis[Xi]||(globalThis[Xi]=Qa().then(D=>globalThis[Ns]=D).catch(()=>globalThis[Ns]=!1));const Pp=(D,b)=>{const M=b?[b]:(0,Q.C6)(),F=[];return M.forEach(K=>{K.container.getProvider(D).instances.forEach(fe=>{F.includes(fe)||F.push(fe)})}),F};function es(){}class hi{constructor(b,M=ma){this.zone=b,this.delegate=M}now(){return this.delegate.now()}schedule(b,M,F){const K=this.zone;return this.delegate.schedule(function(fe){K.runGuarded(()=>{b.apply(this,[fe])})},M,F)}}class fu{constructor(b){this.zone=b,this.task=null}call(b,M){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",es,{},es,es)),M.pipe((0,Th.b)({next:F,complete:F,error:F})).subscribe(b).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ed=(()=>{class D{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new hi(Zone.current)),this.insideAngular=M.run(()=>new hi(Zone.current,Jc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(M){return new(M||D)(g.LFG(g.R0b))},D.\u0275prov=g.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Oi(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Ah(D){return Oi(),function Os(D){return function(M){return(M=M.lift(new fu(D.ngZone))).pipe((0,Tr.R)(D.outsideAngular),(0,Ar.Q)(D.insideAngular))}}(Oi())(D)}},2090:(Je,Ee,O)=>{O.d(Ee,{$s:()=>Nt,BH:()=>He,G6:()=>Ue,L:()=>ie,LL:()=>se,Mn:()=>we,Sg:()=>Ae,UG:()=>he,US:()=>pe,ZB:()=>U,ZR:()=>me,b$:()=>Ke,d:()=>Ce,eu:()=>_e,hl:()=>B,jU:()=>De,m9:()=>or,ne:()=>Ei,pd:()=>gs,r3:()=>vr,ru:()=>Ge,tV:()=>ue,uI:()=>Ve,vZ:()=>zr,w1:()=>ve,xO:()=>Er,xb:()=>Mt,z$:()=>Re,zI:()=>W,zd:()=>vi});const oe=function(L){const H=[];let G=0;for(let be=0;be<L.length;be++){let $=L.charCodeAt(be);$<128?H[G++]=$:$<2048?(H[G++]=$>>6|192,H[G++]=63&$|128):55296==(64512&$)&&be+1<L.length&&56320==(64512&L.charCodeAt(be+1))?($=65536+((1023&$)<<10)+(1023&L.charCodeAt(++be)),H[G++]=$>>18|240,H[G++]=$>>12&63|128,H[G++]=$>>6&63|128,H[G++]=63&$|128):(H[G++]=$>>12|224,H[G++]=$>>6&63|128,H[G++]=63&$|128)}return H},pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(L,H){if(!Array.isArray(L))throw Error("encodeByteArray takes an array as a parameter");this.init_();const G=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,be=[];for(let $=0;$<L.length;$+=3){const Y=L[$],Me=$+1<L.length,Ye=Me?L[$+1]:0,ct=$+2<L.length,vt=ct?L[$+2]:0;let Cn=(15&Ye)<<2|vt>>6,wr=63&vt;ct||(wr=64,Me||(Cn=64)),be.push(G[Y>>2],G[(3&Y)<<4|Ye>>4],G[Cn],G[wr])}return be.join("")},encodeString(L,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(L):this.encodeByteArray(oe(L),H)},decodeString(L,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(L):function(L){const H=[];let G=0,be=0;for(;G<L.length;){const $=L[G++];if($<128)H[be++]=String.fromCharCode($);else if($>191&&$<224){const Y=L[G++];H[be++]=String.fromCharCode((31&$)<<6|63&Y)}else if($>239&&$<365){const ct=((7&$)<<18|(63&L[G++])<<12|(63&L[G++])<<6|63&L[G++])-65536;H[be++]=String.fromCharCode(55296+(ct>>10)),H[be++]=String.fromCharCode(56320+(1023&ct))}else{const Y=L[G++],Me=L[G++];H[be++]=String.fromCharCode((15&$)<<12|(63&Y)<<6|63&Me)}}return H.join("")}(this.decodeStringToByteArray(L,H))},decodeStringToByteArray(L,H){this.init_();const G=H?this.charToByteMapWebSafe_:this.charToByteMap_,be=[];for(let $=0;$<L.length;){const Y=G[L.charAt($++)],Ye=$<L.length?G[L.charAt($)]:0;++$;const vt=$<L.length?G[L.charAt($)]:64;++$;const yt=$<L.length?G[L.charAt($)]:64;if(++$,null==Y||null==Ye||null==vt||null==yt)throw Error();be.push(Y<<2|Ye>>4),64!==vt&&(be.push(Ye<<4&240|vt>>2),64!==yt&&be.push(vt<<6&192|yt))}return be},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let L=0;L<this.ENCODED_VALS.length;L++)this.byteToCharMap_[L]=this.ENCODED_VALS.charAt(L),this.charToByteMap_[this.byteToCharMap_[L]]=L,this.byteToCharMapWebSafe_[L]=this.ENCODED_VALS_WEBSAFE.charAt(L),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[L]]=L,L>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(L)]=L,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(L)]=L)}}},ie=function(L){return function(L){const H=oe(L);return pe.encodeByteArray(H,!0)}(L).replace(/\./g,"")},ue=function(L){try{return pe.decodeString(L,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function U(L,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===L&&(L={});break;case Array:L=[];break;default:return H}for(const G in H)!H.hasOwnProperty(G)||!X(G)||(L[G]=U(L[G],H[G]));return L}function X(L){return"__proto__"!==L}class He{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,G)=>{this.resolve=H,this.reject=G})}wrapCallback(H){return(G,be)=>{G?this.reject(G):this.resolve(be),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H(G):H(G,be))}}}function Ae(L,H){if(L.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const be=H||"demo-project",$=L.iat||0,Y=L.sub||L.user_id;if(!Y)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Me=Object.assign({iss:`https://securetoken.google.com/${be}`,aud:be,iat:$,exp:$+3600,auth_time:$,sub:Y,user_id:Y,firebase:{sign_in_provider:"custom",identities:{}}},L);return[ie(JSON.stringify({alg:"none",type:"JWT"})),ie(JSON.stringify(Me)),""].join(".")}function Re(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ve(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Re())}function he(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(L){return!1}}function De(){return"object"==typeof self&&self.self===self}function Ge(){const L="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof L&&void 0!==L.id}function Ke(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ce(){return Re().indexOf("Electron/")>=0}function ve(){const L=Re();return L.indexOf("MSIE ")>=0||L.indexOf("Trident/")>=0}function we(){return Re().indexOf("MSAppHost/")>=0}function Ue(){return!he()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function B(){return"object"==typeof indexedDB}function _e(){return new Promise((L,H)=>{try{let G=!0;const be="validate-browser-context-for-indexeddb-analytics-module",$=self.indexedDB.open(be);$.onsuccess=()=>{$.result.close(),G||self.indexedDB.deleteDatabase(be),L(!0)},$.onupgradeneeded=()=>{G=!1},$.onerror=()=>{var Y;H((null===(Y=$.error)||void 0===Y?void 0:Y.message)||"")}}catch(G){H(G)}})}function W(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class me extends Error{constructor(H,G,be){super(G),this.code=H,this.customData=be,this.name="FirebaseError",Object.setPrototypeOf(this,me.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,se.prototype.create)}}class se{constructor(H,G,be){this.service=H,this.serviceName=G,this.errors=be}create(H,...G){const be=G[0]||{},$=`${this.service}/${H}`,Y=this.errors[H],Me=Y?function Ne(L,H){return L.replace(ot,(G,be)=>{const $=H[be];return null!=$?String($):`<${be}?>`})}(Y,be):"Error";return new me($,`${this.serviceName}: ${Me} (${$}).`,be)}}const ot=/\{\$([^}]+)}/g;function vr(L,H){return Object.prototype.hasOwnProperty.call(L,H)}function Mt(L){for(const H in L)if(Object.prototype.hasOwnProperty.call(L,H))return!1;return!0}function zr(L,H){if(L===H)return!0;const G=Object.keys(L),be=Object.keys(H);for(const $ of G){if(!be.includes($))return!1;const Y=L[$],Me=H[$];if(rr(Y)&&rr(Me)){if(!zr(Y,Me))return!1}else if(Y!==Me)return!1}for(const $ of be)if(!G.includes($))return!1;return!0}function rr(L){return null!==L&&"object"==typeof L}function Er(L){const H=[];for(const[G,be]of Object.entries(L))Array.isArray(be)?be.forEach($=>{H.push(encodeURIComponent(G)+"="+encodeURIComponent($))}):H.push(encodeURIComponent(G)+"="+encodeURIComponent(be));return H.length?"&"+H.join("&"):""}function vi(L){const H={};return L.replace(/^\?/,"").split("&").forEach(be=>{if(be){const[$,Y]=be.split("=");H[decodeURIComponent($)]=decodeURIComponent(Y)}}),H}function gs(L){const H=L.indexOf("?");if(!H)return"";const G=L.indexOf("#",H);return L.substring(H,G>0?G:void 0)}function Ei(L,H){const G=new ht(L,H);return G.subscribe.bind(G)}class ht{constructor(H,G){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=G,this.task.then(()=>{H(this)}).catch(be=>{this.error(be)})}next(H){this.forEachObserver(G=>{G.next(H)})}error(H){this.forEachObserver(G=>{G.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,G,be){let $;if(void 0===H&&void 0===G&&void 0===be)throw new Error("Missing Observer.");$=function ln(L,H){if("object"!=typeof L||null===L)return!1;for(const G of H)if(G in L&&"function"==typeof L[G])return!0;return!1}(H,["next","error","complete"])?H:{next:H,error:G,complete:be},void 0===$.next&&($.next=pn),void 0===$.error&&($.error=pn),void 0===$.complete&&($.complete=pn);const Y=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?$.error(this.finalError):$.complete()}catch(Me){}}),this.observers.push($),Y}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let G=0;G<this.observers.length;G++)this.sendOne(G,H)}sendOne(H,G){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{G(this.observers[H])}catch(be){"undefined"!=typeof console&&console.error&&console.error(be)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pn(){}function Nt(L,H=1e3,G=2){const be=H*Math.pow(G,L),$=Math.round(.5*be*(Math.random()-.5)*2);return Math.min(144e5,be+$)}function or(L){return L&&L._delegate?L._delegate:L}},6884:(Je,Ee,O)=>{var g=O(5e3);let Q=null;function P(){return Q}const ae=new g.OlP("DocumentToken");let ie=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function ue(){return(0,g.LFG)(U)}()},providedIn:"platform"}),n})();const j=new g.OlP("Location Initialized");let U=(()=>{class n extends ie{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){X()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){X()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ae))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function He(){return new U((0,g.LFG)(ae))}()},providedIn:"platform"}),n})();function X(){return!!window.history.pushState}function Ae(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Re(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ve(n){return n&&"?"!==n[0]?"?"+n:n}let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function De(n){const e=(0,g.LFG)(ae).location;return new Ke((0,g.LFG)(ie),e&&e.origin||"")}()},providedIn:"root"}),n})();const Ge=new g.OlP("appBaseHref");let Ke=(()=>{class n extends he{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ae(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ve(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+Ve(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+Ve(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ie),g.LFG(Ge,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Ce=(()=>{class n extends he{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ae(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+Ve(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+Ve(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ie),g.LFG(Ge,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),ve=(()=>{class n{constructor(t,r){this._subject=new g.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Re(Ue(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ve(r))}normalize(t){return n.stripTrailingSlash(function Be(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ue(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ve(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ve(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Ve,n.joinWithSlash=Ae,n.stripTrailingSlash=Re,n.\u0275fac=function(t){return new(t||n)(g.LFG(he),g.LFG(ie))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function we(){return new ve((0,g.LFG)(he),(0,g.LFG)(ie))}()},providedIn:"root"}),n})();function Ue(n){return n.replace(/\/index.html$/,"")}class _s{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Vn=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,d)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new _s(o.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,d),Gs(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{Gs(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Gs(n,e){n.context.$implicit=e.item}let Lc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function Ao(n){return"server"===n}let nl=(()=>{class n{}return n.\u0275prov=(0,g.Yz7)({token:n,providedIn:"root",factory:()=>new So((0,g.LFG)(ae),window)}),n})();class So{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Ai(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=rl(this.window.history)||rl(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function rl(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ws extends class aa extends class pe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ne(n){Q||(Q=n)}(new Ws)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ua(){return Gt=Gt||document.querySelector("base"),Gt?Gt.getAttribute("href"):null}();return null==t?null:function Is(n){Ja=Ja||document.createElement("a"),Ja.setAttribute("href",n);const e=Ja.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Gt=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function ia(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Ja,Gt=null;const zn=new g.OlP("TRANSITION_ID"),on=[{provide:g.ip1,useFactory:function il(n,e,t){return()=>{t.get(g.CZH).donePromise.then(()=>{const r=P(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[zn,ae,g.zs3],multi:!0}];class Si{static init(){(0,g.VLi)(new Si)}addToWindow(e){g.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const o=g.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const m=function(w){d=d||w,u--,0==u&&r(d)};o.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Wn=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Ks=new g.OlP("EventManagerPlugins");let qi=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const d=o[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ks),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class la{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=P().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let ui=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Mi=(()=>{class n extends ui{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Mo),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Mo))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ae))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function Mo(n){P().remove(n)}const ft={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ds=/%COMP%/g;function xo(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?xo(n,o,t):(o=o.replace(Ds,n),t.push(o))}return t}function Te(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ro=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new rn(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case g.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new Jr(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case g.ifc.ShadowDom:return new ul(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=xo(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(qi),g.LFG(Mi),g.LFG(g.AFp))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class rn{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ft[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=ft[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=ft[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,o&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Te(r)):this.eventManager.addEventListener(e,t,Te(r))}}class Jr extends rn{constructor(e,t,r,o){super(e),this.component=r;const u=xo(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function eu(n){return"_ngcontent-%COMP%".replace(Ds,n)}(o+"-"+r.id),this.hostAttr=function al(n){return"_nghost-%COMP%".replace(Ds,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class ul extends rn{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=xo(o.id,o.styles,[]);for(let d=0;d<u.length;d++){const m=document.createElement("style");m.textContent=u[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ll=(()=>{class n extends la{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ae))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const cl=["alt","control","meta","shift"],Mp={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},zi={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},cr={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Xr=(()=>{class n extends la{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="";if(cl.forEach(w=>{const C=r.indexOf(w);C>-1&&(r.splice(C,1),d+=w+".")}),d+=u,0!=r.length||0===u.length)return null;const m={};return m.domEventName=o,m.fullKey=d,m}static getEventFullKey(t){let r="",o=function nu(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&zi.hasOwnProperty(e)&&(e=zi[e]))}return Mp[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),cl.forEach(u=>{u!=o&&cr[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ae))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const iu=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function bs(){Ws.makeCurrent(),Si.init()},multi:!0},{provide:ae,useFactory:function dl(){return(0,g.RDi)(document),document},deps:[]}]),hl=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function li(){return new g.qLn},deps:[]},{provide:Ks,useClass:ll,multi:!0,deps:[ae,g.R0b,g.Lbi]},{provide:Ks,useClass:Xr,multi:!0,deps:[ae]},{provide:Ro,useClass:Ro,deps:[qi,Mi,g.AFp]},{provide:g.FYo,useExisting:Ro},{provide:ui,useExisting:Mi},{provide:Mi,useClass:Mi,deps:[ae]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b]},{provide:qi,useClass:qi,deps:[Ks,g.R0b]},{provide:class Qt{},useClass:Wn,deps:[]}];let da=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId},{provide:zn,useExisting:g.AFp},on]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(n,12))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:hl,imports:[Lc,g.hGG]}),n})();"undefined"!=typeof window&&window;var an=O(8996),fa=O(7669);function it(...n){const e=(0,fa.yG)(n);return(0,an.D)(n,e)}var Cr=O(7579);class ci extends Cr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Mn=O(8306);const{isArray:pa}=Array,{getPrototypeOf:Wc,prototype:Po,keys:Cs}=Object;function mn(n){if(1===n.length){const e=n[0];if(pa(e))return{args:e,keys:null};if(function Ts(n){return n&&"object"==typeof n&&Wc(n)===Po}(e)){const t=Cs(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var xi=O(4671),It=O(4004);const{isArray:Kc}=Array;function pl(n){return(0,It.U)(e=>function Zc(n,e){return Kc(e)?n(...e):n(e)}(n,e))}function gl(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var Kn=O(5403),As=O(9672);function Zn(n,e,t){n?(0,As.f)(t,n,e):e()}var to=O(576);function no(n,e){const t=(0,to.m)(n)?n:()=>n,r=o=>o.error(t());return new Mn.y(e?o=>e.schedule(r,0,o):r)}const Ss=(0,O(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Lo=O(8189);function Vo(...n){return function Ms(){return(0,Lo.J)(1)}()((0,an.D)(n,(0,fa.yG)(n)))}var ml=O(8421);function ga(n){return new Mn.y(e=>{(0,ml.Xf)(n()).subscribe(e)})}var Zi=O(515),ro=O(727),Yn=O(4482);function yl(){return(0,Yn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Kn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class xs extends Mn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Yn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ro.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Kn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ro.w0.EMPTY)}return e}refCount(){return yl()(this)}}function xn(n,e){return(0,Yn.e)((t,r)=>{let o=null,u=0,d=!1;const m=()=>d&&!o&&r.complete();t.subscribe((0,Kn.x)(r,w=>{null==o||o.unsubscribe();let C=0;const R=u++;(0,ml.Xf)(n(w,R)).subscribe(o=(0,Kn.x)(r,N=>r.next(e?e(w,N,R,C++):N),()=>{o=null,m()}))},()=>{d=!0,m()}))})}var io=O(5698);function so(...n){const e=(0,fa.yG)(n);return(0,Yn.e)((t,r)=>{(e?Vo(n,t,e):Vo(n,t)).subscribe(r)})}function Yi(n,e,t,r,o){return(u,d)=>{let m=t,w=e,C=0;u.subscribe((0,Kn.x)(d,R=>{const N=C++;w=m?n(w,R,N):(m=!0,R),r&&d.next(w)},o&&(()=>{m&&d.next(w),d.complete()})))}}function Ri(n,e){return(0,Yn.e)(Yi(n,e,arguments.length>=2,!0))}function Qn(n,e){return(0,Yn.e)((t,r)=>{let o=0;t.subscribe((0,Kn.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}function di(n){return(0,Yn.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,Kn.x)(t,void 0,void 0,d=>{u=(0,ml.Xf)(n(d,di(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}var Rn=O(5577);function Ni(n,e){return(0,to.m)(e)?(0,Rn.z)(n,e,1):(0,Rn.z)(n,1)}function du(n){return n<=0?()=>Zi.E:(0,Yn.e)((e,t)=>{let r=[];e.subscribe((0,Kn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function _l(n=cn){return(0,Yn.e)((e,t)=>{let r=!1;e.subscribe((0,Kn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function cn(){return new Ss}function Ch(n){return(0,Yn.e)((e,t)=>{let r=!1;e.subscribe((0,Kn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function Uo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Qn((o,u)=>n(o,u,r)):xi.y,(0,io.q)(1),t?Ch(e):_l(()=>new Ss))}var Ur=O(8505);class Rs{constructor(e,t){this.id=e,this.url=t}}class Qc extends Rs{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Qi extends Rs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class vl extends Rs{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class wn extends Rs{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ma extends Rs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hu extends Rs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Jc extends Rs{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Th extends Rs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Tr extends Rs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ar{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ya{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Bo{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ji{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ns{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xi{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jo{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Tt="primary";class Xc{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function $o(n){return new Xc(n)}const dr="ngNavigationCancelingError";function _a(n){const e=Error("NavigationCancelingError: "+n);return e[dr]=!0,e}function Pp(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],m=n[u];if(d.startsWith(":"))o[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function hi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!fu(n[o],e[o]))return!1;return!0}function fu(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function ed(n){return Array.prototype.concat.apply([],n)}function Oi(n){return n.length>0?n[n.length-1]:null}function nn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function hr(n){return(0,g.CqO)(n)?n:(0,g.QGY)(n)?(0,an.D)(Promise.resolve(n)):it(n)}const Ah={exact:function D(n,e,t){if(!at(n.segments,e.segments)||!K(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!D(n.children[r],e.children[r],t))return!1;return!0},subset:M},Os={exact:function va(n,e){return hi(n,e)},subset:function b(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>fu(n[t],e[t]))},ignored:()=>!0};function Go(n,e,t){return Ah[t.paths](n.root,e.root,t.matrixParams)&&Os[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function M(n,e,t){return F(n,e,e.segments,t)}function F(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!at(o,t)||e.hasChildren()||!K(o,t,r))}if(n.segments.length===t.length){if(!at(n.segments,t)||!K(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!M(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(at(n.segments,o)&&K(n.segments,o,r)&&n.children[Tt])&&F(n.children[Tt],e,u,r)}}function K(n,e,t){return e.every((r,o)=>Os[t](n[o].parameters,r.parameters))}class te{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=$o(this.queryParams)),this._queryParamMap}toString(){return Bn.serialize(this)}}class fe{constructor(e,t){this.segments=e,this.children=t,this.parent=null,nn(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ts(this)}}class Ze{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=$o(this.parameters)),this._parameterMap}toString(){return Il(this)}}function at(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Et{}class In{parse(e){const t=new kp(e);return new te(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Pi(e.root,!0)}`,r=function Sh(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${fr(t)}=${fr(o)}`).join("&"):`${fr(t)}=${fr(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function ns(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Bn=new In;function ts(n){return n.segments.map(e=>Il(e)).join("/")}function Pi(n,e){if(!n.hasChildren())return ts(n);if(e){const t=n.children[Tt]?Pi(n.children[Tt],!1):"",r=[];return nn(n.children,(o,u)=>{u!==Tt&&r.push(`${u}:${Pi(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Ft(n,e){let t=[];return nn(n.children,(r,o)=>{o===Tt&&(t=t.concat(e(r,o)))}),nn(n.children,(r,o)=>{o!==Tt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Tt?[Pi(n.children[Tt],!1)]:[`${o}:${Pi(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Tt]?`${ts(n)}/${t[0]}`:`${ts(n)}/(${t.join("//")})`}}function fi(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function fr(n){return fi(n).replace(/%3B/gi,";")}function Ps(n){return fi(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function wl(n){return decodeURIComponent(n)}function nd(n){return wl(n.replace(/\+/g,"%20"))}function Il(n){return`${Ps(n.path)}${function rd(n){return Object.keys(n).map(e=>`;${Ps(e)}=${Ps(n[e])}`).join("")}(n.parameters)}`}const Mh=/^[^\/()?;=#]+/;function id(n){const e=n.match(Mh);return e?e[0]:""}const pu=/^[^=?&#]+/,xh=/^[^&#]+/;class kp{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new fe([],{}):new fe([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Tt]=new fe(e,t)),r}parseSegment(){const e=id(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Ze(wl(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=id(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=id(this.remaining);o&&(r=o,this.capture(r))}e[wl(t)]=wl(r)}parseQueryParam(e){const t=function Dl(n){const e=n.match(pu);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function h0(n){const e=n.match(xh);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=nd(t),u=nd(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=id(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Tt);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[Tt]:new fe([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Rh{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Fp(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Fp(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=gu(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return gu(e,this._root).map(t=>t.value)}}function Fp(n,e){if(n===e.value)return e;for(const t of e.children){const r=Fp(n,t);if(r)return r}return null}function gu(n,e){if(n===e.value)return[e];for(const t of e.children){const r=gu(n,t);if(r.length)return r.unshift(e),r}return[]}class oo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function mu(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class bl extends Rh{constructor(e,t){super(e),this.snapshot=t,ad(this,e)}toString(){return this.snapshot.toString()}}function sd(n,e){const t=function yu(n,e){const d=new ao([],{},{},"",{},Tt,e,null,n.root,-1,{});return new od("",new oo(d,[]))}(n,e),r=new ci([new Ze("",{})]),o=new ci({}),u=new ci({}),d=new ci({}),m=new ci(""),w=new Ea(r,o,d,m,u,Tt,e,t.root);return w.snapshot=t.root,new bl(new oo(w,[]),t)}class Ea{constructor(e,t,r,o,u,d,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,It.U)(e=>$o(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,It.U)(e=>$o(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Lp(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function f0(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class ao{constructor(e,t,r,o,u,d,m,w,C,R,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this.routeConfig=w,this._urlSegment=C,this._lastPathIndex=R,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=$o(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=$o(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class od extends Rh{constructor(e,t){super(t),this.url=e,ad(this,t)}toString(){return Nh(this._root)}}function ad(n,e){e.value._routerState=n,e.children.forEach(t=>ad(n,t))}function Nh(n){const e=n.children.length>0?` { ${n.children.map(Nh).join(", ")} } `:"";return`${n.value}${e}`}function ud(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,hi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),hi(e.params,t.params)||n.params.next(t.params),function es(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!hi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),hi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function ld(n,e){const t=hi(n.params,e.params)&&function tt(n,e){return at(n,e)&&n.every((t,r)=>hi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||ld(n.parent,e.parent))}function Cl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function Wm(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Cl(n,r,o);return Cl(n,r)})}(n,e,t);return new oo(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>Cl(n,m)),d}}const r=function Km(n){return new Ea(new ci(n.url),new ci(n.params),new ci(n.queryParams),new ci(n.fragment),new ci(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>Cl(n,u));return new oo(r,o)}}function pi(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function uo(n){return"object"==typeof n&&null!=n&&n.outlets}function Tl(n,e,t,r,o){let u={};if(r&&nn(r,(m,w)=>{u[w]=Array.isArray(m)?m.map(C=>`${C}`):`${m}`}),n===e)return new te(t,u,o);const d=Ym(n,e,t);return new te(d,u,o)}function Ym(n,e,t){const r={};return nn(n.children,(o,u)=>{r[u]=o===e?t:Ym(o,e,t)}),new fe(n.segments,r)}class Up{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&pi(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(uo);if(o&&o!==Oi(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class cd{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function jp(n,e,t){if(n||(n=new fe([],{})),0===n.segments.length&&n.hasChildren())return dd(n,e,t);const r=function Qm(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],m=t[r];if(uo(m))break;const w=`${m}`,C=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&C&&"object"==typeof C&&void 0===C.outlets){if(!Ph(w,C,d))return u;r+=2}else{if(!Ph(w,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new fe(n.segments.slice(0,r.pathIndex),{});return u.children[Tt]=new fe(n.segments.slice(r.pathIndex),n.children),dd(u,0,o)}return r.match&&0===o.length?new fe(n.segments,{}):r.match&&!n.hasChildren()?Jm(n,e,t):r.match?dd(n,0,o):Jm(n,e,t)}function dd(n,e,t){if(0===t.length)return new fe(n.segments,{});{const r=function Bp(n){return uo(n[0])?n[0].outlets:{[Tt]:n}}(t),o={};return nn(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[d]=jp(n.children[d],e,u))}),nn(n.children,(u,d)=>{void 0===r[d]&&(o[d]=u)}),new fe(n.segments,o)}}function Jm(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(uo(u)){const w=wa(u.outlets);return new fe(r,w)}if(0===o&&pi(t[0])){r.push(new Ze(n.segments[e].path,Al(t[0]))),o++;continue}const d=uo(u)?u.outlets[Tt]:`${u}`,m=o<t.length-1?t[o+1]:null;d&&m&&pi(m)?(r.push(new Ze(d,Al(m))),o+=2):(r.push(new Ze(d,{})),o++)}return new fe(r,{})}function wa(n){const e={};return nn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Jm(new fe([],{}),0,t))}),e}function Al(n){const e={};return nn(n,(t,r)=>e[r]=`${t}`),e}function Ph(n,e,t){return n==t.path&&hi(e,t.parameters)}class Sl{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ud(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=mu(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),nn(o,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=mu(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=mu(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=mu(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new Xi(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Ji(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(ud(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),ud(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=function hd(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),w=m?m.module.componentFactoryResolver:null;d.attachRef=null,d.route=o,d.resolver=w,d.outlet&&d.outlet.activateWith(o,w),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class fd{constructor(e,t){this.routes=e,this.module=t}}function lo(n){return"function"==typeof n}function _u(n){return n instanceof te}const pd=Symbol("INITIAL_VALUE");function gd(){return xn(n=>function ko(...n){const e=(0,fa.yG)(n),t=(0,fa.jO)(n),{args:r,keys:o}=mn(n);if(0===r.length)return(0,an.D)([],e);const u=new Mn.y(function eo(n,e,t=xi.y){return r=>{Zn(e,()=>{const{length:o}=n,u=new Array(o);let d=o,m=o;for(let w=0;w<o;w++)Zn(e,()=>{const C=(0,an.D)(n[w],e);let R=!1;C.subscribe((0,Kn.x)(r,N=>{u[w]=N,R||(R=!0,m--),m||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>gl(o,d):xi.y));return t?u.pipe(pl(t)):u}(n.map(e=>e.pipe((0,io.q)(1),so(pd)))).pipe(Ri((e,t)=>{let r=!1;return t.reduce((o,u,d)=>o!==pd?o:(u===pd&&(r=!0),r||!1!==u&&d!==t.length-1&&!_u(u)?o:u),e)},pd),Qn(e=>e!==pd),(0,It.U)(e=>_u(e)?e:!0===e),(0,io.q)(1)))}class Hp{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new vu,this.attachRef=null}}class vu{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Hp,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let xl=(()=>{class n{constructor(t,r,o,u,d){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=u||Tt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,w=new Xm(t,m,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,w),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(vu),g.Y36(g.s_b),g.Y36(g._Vd),g.$8M("name"),g.Y36(g.sBO))},n.\u0275dir=g.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Xm{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ea?this.route:e===vu?this.childContexts:this.parent.get(e,t)}}let Gp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},directives:[xl],encapsulation:2}),n})();function Rl(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Eu(r,ey(e,r))}}function Eu(n,e){n.children&&Rl(n.children,e)}function ey(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Nl(n){const e=n.children&&n.children.map(Nl),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Tt&&(t.component=Gp),t}function Br(n){return n.outlet||Tt}function Dn(n,e){const t=n.filter(r=>Br(r)===e);return t.push(...n.filter(r=>Br(r)!==e)),t}const qp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function md(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},qp):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||Pp)(t,n,e);if(!u)return Object.assign({},qp);const d={};nn(u.posParams,(w,C)=>{d[C]=w.path});const m=u.consumed.length>0?Object.assign(Object.assign({},d),u.consumed[u.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:m,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function Ia(n,e,t,r,o="corrected"){if(t.length>0&&function ny(n,e,t){return t.some(r=>Da(n,e,r)&&Br(r)!==Tt)}(n,t,r)){const d=new fe(e,function ty(n,e,t,r){const o={};o[Tt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Br(u)!==Tt){const d=new fe([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[Br(u)]=d}return o}(n,e,r,new fe(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function ry(n,e,t){return t.some(r=>Da(n,e,r))}(n,t,r)){const d=new fe(n.segments,function zp(n,e,t,r,o,u){const d={};for(const m of r)if(Da(n,t,m)&&!o[Br(m)]){const w=new fe([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[Br(m)]=w}return Object.assign(Object.assign({},o),d)}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new fe(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Da(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Wp(n,e,t,r){return!!(Br(n)===r||r!==Tt&&Da(e,t,n))&&("**"===n.path||md(e,n,t).matched)}function Kp(n,e,t){return 0===e.length&&!n.children[t]}class Lh{constructor(e){this.segmentGroup=e||null}}class wu{constructor(e){this.urlTree=e}}function jn(n){return no(new Lh(n))}function yd(n){return no(new wu(n))}class Iu{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(g.h0i)}apply(){const e=Ia(this.urlTree.root,[],[],this.config).segmentGroup,t=new fe(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Tt).pipe((0,It.U)(u=>this.createUrlTree(Ol(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(di(u=>{if(u instanceof wu)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Lh?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Tt).pipe((0,It.U)(o=>this.createUrlTree(Ol(o),e.queryParams,e.fragment))).pipe(di(o=>{throw o instanceof Lh?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new fe([],{[Tt]:e}):e;return new te(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,It.U)(u=>new fe([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,an.D)(o).pipe(Ni(u=>{const d=r.children[u],m=Dn(t,u);return this.expandSegmentGroup(e,m,d,u).pipe((0,It.U)(w=>({segment:w,outlet:u})))}),Ri((u,d)=>(u[d.outlet]=d.segment,u),{}),function zm(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Qn((o,u)=>n(o,u,r)):xi.y,du(1),t?Ch(e):_l(()=>new Ss))}())}expandSegment(e,t,r,o,u,d){return(0,an.D)(r).pipe(Ni(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,d).pipe(di(C=>{if(C instanceof Lh)return it(null);throw C}))),Uo(m=>!!m),di((m,w)=>{if(m instanceof Ss||"EmptyError"===m.name)return Kp(t,o,u)?it(new fe([],{})):jn(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,d,m){return Wp(o,t,u,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d):jn(t):jn(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?yd(u):this.lineralizeSegments(r,u).pipe((0,Rn.z)(d=>{const m=new fe(d,{});return this.expandSegment(e,m,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:m,consumedSegments:w,remainingSegments:C,positionalParamSegments:R}=md(t,o,u);if(!m)return jn(t);const N=this.applyRedirectCommands(w,o.redirectTo,R);return o.redirectTo.startsWith("/")?yd(N):this.lineralizeSegments(o,N).pipe((0,Rn.z)(z=>this.expandSegment(e,t,r,z.concat(C),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?it(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,It.U)(N=>(r._loadedConfig=N,new fe(o,{})))):it(new fe(o,{}));const{matched:d,consumedSegments:m,remainingSegments:w}=md(t,r,o);return d?this.getChildConfig(e,r,o).pipe((0,Rn.z)(R=>{const N=R.module,z=R.routes,{segmentGroup:ee,slicedSegments:ge}=Ia(t,m,w,z),Le=new fe(ee.segments,ee.children);if(0===ge.length&&Le.hasChildren())return this.expandChildren(N,z,Le).pipe((0,It.U)($t=>new fe(m,$t)));if(0===z.length&&0===ge.length)return it(new fe(m,{}));const nt=Br(r)===u;return this.expandSegment(N,Le,z,ge,nt?Tt:u,!0).pipe((0,It.U)(Vt=>new fe(m.concat(Vt.segments),Vt.children)))})):jn(t)}getChildConfig(e,t,r){return t.children?it(new fd(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?it(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Rn.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,It.U)(u=>(t._loadedConfig=u,u))):function _d(n){return no(_a(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):it(new fd([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;return o&&0!==o.length?it(o.map(d=>{const m=e.get(d);let w;if(function m0(n){return n&&lo(n.canLoad)}(m))w=m.canLoad(t,r);else{if(!lo(m))throw new Error("Invalid CanLoad guard");w=m(t,r)}return hr(w)})).pipe(gd(),(0,Ur.b)(d=>{if(!_u(d))return;const m=_a(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw m.url=d,m}),(0,It.U)(d=>!0===d)):it(!0)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return it(r);if(o.numberOfChildren>1||!o.children[Tt])return no(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));o=o.children[Tt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new te(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return nn(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return nn(t.children,(m,w)=>{d[w]=this.createSegmentGroup(e,m,r,o)}),new fe(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function Ol(n){const e={};for(const r of Object.keys(n.children)){const u=Ol(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Uh(n){if(1===n.numberOfChildren&&n.children[Tt]){const e=n.children[Tt];return new fe(n.segments.concat(e.segments),e.children)}return n}(new fe(n.segments,e))}class jr{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class qo{constructor(e,t){this.component=e,this.route=t}}function Bh(n,e,t){const r=n._root;return Pl(r,e?e._root:null,t,[r.value])}function ba(n,e,t){const r=function jh(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Pl(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=mu(e);return n.children.forEach(d=>{(function vd(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const w=function oy(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!at(n.url,e.url);case"pathParamsOrQueryParamsChange":return!at(n.url,e.url)||!hi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ld(n,e)||!hi(n.queryParams,e.queryParams);default:return!ld(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new jr(r)):(u.data=d.data,u._resolvedData=d._resolvedData),Pl(n,e,u.component?m?m.children:null:t,r,o),w&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new qo(m.outlet.component,d))}else d&&Fi(e,m,o),o.canActivateChecks.push(new jr(r)),Pl(n,null,u.component?m?m.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),nn(u,(d,m)=>Fi(d,t.getContext(m),o)),o}function Fi(n,e,t){const r=mu(n),o=n.value;nn(r,(u,d)=>{Fi(u,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new qo(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class ly{}function rs(n){return new Mn.y(e=>e.error(n))}class Yp{constructor(e,t,r,o,u,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=d}recognize(){const e=Ia(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Tt);if(null===t)return null;const r=new ao([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Tt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new oo(r,t),u=new od(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=Lp(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const d=t.children[u],m=Dn(e,u),w=this.processSegmentGroup(m,d,u);if(null===w)return null;r.push(...w)}const o=Jp(r);return function Qp(n){n.sort((e,t)=>e.value.outlet===Tt?-1:t.value.outlet===Tt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const u of e){const d=this.processSegmentAgainstRoute(u,t,r,o);if(null!==d)return d}return Kp(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!Wp(e,t,r,o))return null;let u,d=[],m=[];if("**"===e.path){const ee=r.length>0?Oi(r).parameters:{};u=new ao(r,ee,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y(e),Br(e),e.component,e,Xp(t),Ca(t)+r.length,h(e))}else{const ee=md(t,e,r);if(!ee.matched)return null;d=ee.consumedSegments,m=ee.remainingSegments,u=new ao(d,ee.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y(e),Br(e),e.component,e,Xp(t),Ca(t)+d.length,h(e))}const w=function cy(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:C,slicedSegments:R}=Ia(t,d,m,w.filter(ee=>void 0===ee.redirectTo),this.relativeLinkResolution);if(0===R.length&&C.hasChildren()){const ee=this.processChildren(w,C);return null===ee?null:[new oo(u,ee)]}if(0===w.length&&0===R.length)return[new oo(u,[])];const N=Br(e)===o,z=this.processSegment(w,C,R,N?Tt:o);return null===z?null:[new oo(u,z)]}}function Gh(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Jp(n){const e=[],t=new Set;for(const r of n){if(!Gh(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=Jp(r.children);e.push(new oo(r.value,o))}return e.filter(r=>!t.has(r))}function Xp(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Ca(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function y(n){return n.data||{}}function h(n){return n.resolve||{}}function q(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function ke(n){return xn(e=>{const t=n(e);return t?(0,an.D)(t).pipe((0,It.U)(()=>e)):it(e)})}class ut extends class lt{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const yn=new g.OlP("ROUTES");class ti{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,It.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=u.create(e);return new fd(ed(d.injector.get(yn,void 0,g.XFs.Self|g.XFs.Optional)).map(Nl),d)}),di(u=>{throw t._loader$=void 0,u}));return t._loader$=new xs(o,()=>new Cr.x).pipe(yl()),t._loader$}loadModuleFactory(e){return hr(e()).pipe((0,Rn.z)(t=>t instanceof g.YKP?it(t):(0,an.D)(this.compiler.compileModuleAsync(t))))}}class qh{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function eg(n){throw n}function Ta(n,e,t){return e.parse("/")}function Fl(n,e){return it(null)}const Id={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},tg={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Xn=(()=>{class n{constructor(t,r,o,u,d,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Cr.x,this.errorHandler=eg,this.malformedUriErrorHandler=Ta,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Fl,afterPreactivation:Fl},this.urlHandlingStrategy=new qh,this.routeReuseStrategy=new ut,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(g.h0i),this.console=d.get(g.c2e);const N=d.get(g.R0b);this.isNgZoneEnabled=N instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function El(){return new te(new fe([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ti(d,m,z=>this.triggerEvent(new Ar(z)),z=>this.triggerEvent(new ya(z))),this.routerState=sd(this.currentUrlTree,this.rootComponentType),this.transitions=new ci({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Qn(o=>0!==o.id),(0,It.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),xn(o=>{let u=!1,d=!1;return it(o).pipe((0,Ur.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),xn(m=>{const w=this.browserUrlTree.toString(),C=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return Wh(m.source)&&(this.browserUrlTree=m.extractedUrl),it(m).pipe(xn(N=>{const z=this.transitions.getValue();return r.next(new Qc(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),z!==this.transitions.getValue()?Zi.E:Promise.resolve(N)}),function iy(n,e,t,r){return xn(o=>function Jn(n,e,t,r,o){return new Iu(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,It.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ur.b)(N=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:N.urlAfterRedirects})}),function p(n,e,t,r,o){return(0,Rn.z)(u=>function kl(n,e,t,r,o="emptyOnly",u="legacy"){try{const d=new Yp(n,e,t,r,o,u).recognize();return null===d?rs(new ly):it(d)}catch(d){return rs(d)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,It.U)(d=>Object.assign(Object.assign({},u),{targetSnapshot:d}))))}(this.rootComponentType,this.config,N=>this.serializeUrl(N),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ur.b)(N=>{if("eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const ee=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(ee,N)}this.browserUrlTree=N.urlAfterRedirects}const z=new ma(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);r.next(z)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:z,extractedUrl:ee,source:ge,restoredState:Le,extras:nt}=m,Lt=new Qc(z,this.serializeUrl(ee),ge,Le);r.next(Lt);const Vt=sd(ee,this.rootComponentType).snapshot;return it(Object.assign(Object.assign({},m),{targetSnapshot:Vt,urlAfterRedirects:ee,extras:Object.assign(Object.assign({},nt),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),Zi.E}),ke(m=>{const{targetSnapshot:w,id:C,extractedUrl:R,rawUrl:N,extras:{skipLocationChange:z,replaceUrl:ee}}=m;return this.hooks.beforePreactivation(w,{navigationId:C,appliedUrlTree:R,rawUrlTree:N,skipLocationChange:!!z,replaceUrl:!!ee})}),(0,Ur.b)(m=>{const w=new hu(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,It.U)(m=>Object.assign(Object.assign({},m),{guards:Bh(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function Ed(n,e){return(0,Rn.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?it(Object.assign(Object.assign({},t),{guardsResult:!0})):function ay(n,e,t,r){return(0,an.D)(n).pipe((0,Rn.z)(o=>function Hh(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?it(u.map(m=>{const w=ba(m,e,o);let C;if(function Fh(n){return n&&lo(n.canDeactivate)}(w))C=hr(w.canDeactivate(n,e,t,r));else{if(!lo(w))throw new Error("Invalid CanDeactivate guard");C=hr(w(n,e,t,r))}return C.pipe(Uo())})).pipe(gd()):it(!0)}(o.component,o.route,t,e,r)),Uo(o=>!0!==o,!0))}(d,r,o,n).pipe((0,Rn.z)(m=>m&&function $p(n){return"boolean"==typeof n}(m)?function uy(n,e,t,r){return(0,an.D)(e).pipe(Ni(o=>Vo(function Zp(n,e){return null!==n&&e&&e(new Bo(n)),it(!0)}(o.route.parent,r),function wd(n,e){return null!==n&&e&&e(new Ns(n)),it(!0)}(o.route,r),function $h(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function sy(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>ga(()=>it(d.guards.map(w=>{const C=ba(w,d.node,t);let R;if(function kh(n){return n&&lo(n.canActivateChild)}(C))R=hr(C.canActivateChild(r,n));else{if(!lo(C))throw new Error("Invalid CanActivateChild guard");R=hr(C(r,n))}return R.pipe(Uo())})).pipe(gd())));return it(u).pipe(gd())}(n,o.path,t),function ei(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return it(!0);const o=r.map(u=>ga(()=>{const d=ba(u,e,t);let m;if(function Ml(n){return n&&lo(n.canActivate)}(d))m=hr(d.canActivate(e,n));else{if(!lo(d))throw new Error("Invalid CanActivate guard");m=hr(d(e,n))}return m.pipe(Uo())}));return it(o).pipe(gd())}(n,o.route,t))),Uo(o=>!0!==o,!0))}(r,u,n,e):it(m)),(0,It.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Ur.b)(m=>{if(_u(m.guardsResult)){const C=_a(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw C.url=m.guardsResult,C}const w=new Jc(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),Qn(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),ke(m=>{if(m.guards.canActivateChecks.length)return it(m).pipe((0,Ur.b)(w=>{const C=new Th(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}),xn(w=>{let C=!1;return it(w).pipe(function v(n,e){return(0,Rn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return it(t);let u=0;return(0,an.D)(o).pipe(Ni(d=>function T(n,e,t,r){return function x(n,e,t,r){const o=q(n);if(0===o.length)return it({});const u={};return(0,an.D)(o).pipe((0,Rn.z)(d=>function ce(n,e,t,r){const o=ba(n,e,r);return hr(o.resolve?o.resolve(e,t):o(e,t))}(n[d],e,t,r).pipe((0,Ur.b)(m=>{u[d]=m}))),du(1),(0,Rn.z)(()=>q(u).length===o.length?it(u):Zi.E))}(n._resolve,n,e,r).pipe((0,It.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),Lp(n,t).resolve),null)))}(d.route,r,n,e)),(0,Ur.b)(()=>u++),du(1),(0,Rn.z)(d=>u===o.length?it(t):Zi.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ur.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(w),this.cancelNavigationTransition(w,"At least one route resolver didn't emit any value."))}}))}),(0,Ur.b)(w=>{const C=new Tr(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}))}),ke(m=>{const{targetSnapshot:w,id:C,extractedUrl:R,rawUrl:N,extras:{skipLocationChange:z,replaceUrl:ee}}=m;return this.hooks.afterPreactivation(w,{navigationId:C,appliedUrlTree:R,rawUrlTree:N,skipLocationChange:!!z,replaceUrl:!!ee})}),(0,It.U)(m=>{const w=function Vp(n,e,t){const r=Cl(n,e._root,t?t._root:void 0);return new bl(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:w})}),(0,Ur.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,It.U)(r=>(new Sl(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Ur.b)({next(){u=!0},complete(){u=!0}}),function Yc(n){return(0,Yn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var m;u||d||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===o.id&&(this.currentNavigation=null)}),di(m=>{if(d=!0,function Ho(n){return n&&n[dr]}(m)){const w=_u(m.url);w||(this.navigated=!0,this.restoreHistory(o,!0));const C=new vl(o.id,this.serializeUrl(o.extractedUrl),m.message);r.next(C),w?setTimeout(()=>{const R=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),N={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Wh(o.source)};this.scheduleNavigation(R,"imperative",null,N,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const w=new wn(o.id,this.serializeUrl(o.extractedUrl),m);r.next(w);try{o.resolve(this.errorHandler(m))}catch(C){o.reject(C)}}return Zi.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const u={replaceUrl:!0},d=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(d){const w=Object.assign({},d);delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(u.state=w)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,d,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Rl(t),this.config=t.map(Nl),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:m,preserveFragment:w}=r,C=o||this.routerState.root,R=w?this.currentUrlTree.fragment:d;let N=null;switch(m){case"merge":N=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=u||null}return null!==N&&(N=this.removeEmptyProps(N)),function Zm(n,e,t,r,o){if(0===t.length)return Tl(e.root,e.root,e.root,r,o);const u=function p0(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Up(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return nn(u.outlets,(w,C)=>{m[C]="string"==typeof w?w.split("/"):w}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new Up(t,e,r)}(t);if(u.toRoot())return Tl(e.root,e.root,new fe([],{}),r,o);const d=function g0(n,e,t){if(n.isAbsolute)return new cd(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new cd(u,u===e.root,0)}const r=pi(n.commands[0])?0:1;return function Oh(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new cd(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),m=d.processChildren?dd(d.segmentGroup,d.index,u.commands):jp(d.segmentGroup,d.index,u.commands);return Tl(e.root,d.segmentGroup,m,r,o)}(C,this.currentUrlTree,t,N,null!=R?R:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=_u(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function zh(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},Id):!1===r?Object.assign({},tg):r,_u(t))return Go(this.currentUrlTree,t,o);const u=this.parseUrl(t);return Go(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Qi(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,d){var m,w;if(this.disposed)return Promise.resolve(!1);let C,R,N;d?(C=d.resolve,R=d.reject,N=d.promise):N=new Promise((ge,Le)=>{C=ge,R=Le});const z=++this.navigationId;let ee;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),ee=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):ee=0,this.setTransition({id:z,targetPageId:ee,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:C,reject:R,promise:N,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),N.catch(ge=>Promise.reject(ge))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===d?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new vl(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function Wh(n){return"imperative"!==n}let Dd=(()=>{class n{constructor(t,r,o,u,d){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=u,this.el=d,this.commands=null,this.onChanges=new Cr.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,o=this.el.nativeElement;null!==t?r.setAttribute(o,"tabindex",t):r.removeAttribute(o,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Cu(this.skipLocationChange),replaceUrl:Cu(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Cu(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Xn),g.Y36(Ea),g.$8M("tabindex"),g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&g.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[g.TTD]}),n})(),bu=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.locationStrategy=o,this.commands=null,this.href=null,this.onChanges=new Cr.x,this.subscription=t.events.subscribe(u=>{u instanceof Qi&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,o,u,d){if(0!==t||r||o||u||d||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const m={skipLocationChange:Cu(this.skipLocationChange),replaceUrl:Cu(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,m),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Cu(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Xn),g.Y36(Ea),g.Y36(he))},n.\u0275dir=g.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&g.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&g.uIk("target",r.target)("href",r.href,g.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[g.TTD]}),n})();function Cu(n){return""===n||!!n}class ng{}class rg{preload(e,t){return it(null)}}let E0=(()=>{class n{constructor(t,r,o,u){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=new ti(o,r,w=>t.triggerEvent(new Ar(w)),w=>t.triggerEvent(new ya(w)))}setUpPreloading(){this.subscription=this.router.events.pipe(Qn(t=>t instanceof Qi),Ni(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(g.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const d=u._loadedConfig;o.push(this.processRoutes(d.module,d.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,an.D)(o).pipe((0,Lo.J)(),(0,It.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?it(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Rn.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Xn),g.LFG(g.Sil),g.LFG(g.zs3),g.LFG(ng))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),dy=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Qc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Qi&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof jo&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new jo(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Tu=new g.OlP("ROUTER_CONFIGURATION"),Au=new g.OlP("ROUTER_FORROOT_GUARD"),w0=[ve,{provide:Et,useClass:In},{provide:Xn,useFactory:function C0(n,e,t,r,o,u,d={},m,w){const C=new Xn(null,n,e,t,r,o,ed(u));return m&&(C.urlHandlingStrategy=m),w&&(C.routeReuseStrategy=w),function fy(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,C),d.enableTracing&&C.events.subscribe(R=>{var N,z;null===(N=console.group)||void 0===N||N.call(console,`Router Event: ${R.constructor.name}`),console.log(R.toString()),console.log(R),null===(z=console.groupEnd)||void 0===z||z.call(console)}),C},deps:[Et,vu,ve,g.zs3,g.Sil,yn,Tu,[class Du{},new g.FiY],[class Qe{},new g.FiY]]},vu,{provide:Ea,useFactory:function T0(n){return n.routerState.root},deps:[Xn]},E0,rg,class v0{preload(e,t){return t().pipe(di(()=>it(null)))}},{provide:Tu,useValue:{enableTracing:!1}}];function I0(){return new g.PXZ("Router",Xn)}let D0=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[w0,hy(t),{provide:Au,useFactory:b0,deps:[[Xn,new g.FiY,new g.tp0]]},{provide:Tu,useValue:r||{}},{provide:he,useFactory:pD,deps:[ie,[new g.tBr(Ge),new g.FiY],Tu]},{provide:dy,useFactory:ig,deps:[Xn,nl,Tu]},{provide:ng,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:rg},{provide:g.PXZ,multi:!0,useFactory:I0},[bd,{provide:g.ip1,multi:!0,useFactory:sg,deps:[bd]},{provide:og,useFactory:A0,deps:[bd]},{provide:g.tb,multi:!0,useExisting:og}]]}}static forChild(t){return{ngModule:n,providers:[hy(t)]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Au,8),g.LFG(Xn,8))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function ig(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new dy(n,e,t)}function pD(n,e,t={}){return t.useHash?new Ce(n,e):new Ke(n,e)}function b0(n){return"guarded"}function hy(n){return[{provide:g.deG,multi:!0,useValue:n},{provide:yn,multi:!0,useValue:n}]}let bd=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Cr.x}appInitializer(){return this.injector.get(j,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(m=>r=m),u=this.injector.get(Xn),d=this.injector.get(Tu);return"disabled"===d.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?it(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(Tu),o=this.injector.get(E0),u=this.injector.get(dy),d=this.injector.get(Xn),m=this.injector.get(g.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),o.setUpPreloading(),u.init(),d.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.zs3))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function sg(n){return n.appInitializer.bind(n)}function A0(n){return n.bootstrapListener.bind(n)}const og=new g.OlP("Router Initializer");var Kh=O(4986),Sr=O(5813);function ag(){return(0,Yn.e)((n,e)=>{let t,r=!1;n.subscribe((0,Kn.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function mD(n,e){return n===e}var Xe,ks=O(2011),R0=(O(7092),O(3942)),Ie=O(5861),Su=O(9681),ug=O(4859),Aa=O(1877),Ot=O(2090),yD="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},pr={},lg=lg||{},bt=yD||self;function cg(){}function py(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Zh(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var gy="closure_uid_"+(1e9*Math.random()>>>0),_D=0;function vD(n,e,t){return n.call.apply(n.bind,arguments)}function Ct(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Mr(n,e,t){return(Mr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?vD:Ct).apply(null,arguments)}function Yh(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function xr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[o].apply(r,d)}}function co(){this.s=this.s,this.o=this.o}var O0={};co.prototype.s=!1,co.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function N0(n){return Object.prototype.hasOwnProperty.call(n,gy)&&n[gy]||(n[gy]=++_D)}(this);delete O0[n]}},co.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const P0=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},dg=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function hg(n){return Array.prototype.concat.apply([],arguments)}function fg(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Cd(n){return/^[\s\xa0]*$/.test(n)}var Rr,ED=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function ni(n,e){return-1!=n.indexOf(e)}function k0(n,e){return n<e?-1:n>e?1:0}e:{var Qh=bt.navigator;if(Qh){var pg=Qh.userAgent;if(pg){Rr=pg;break e}}Rr=""}function Jh(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function gg(n){const e={};for(const t in n)e[t]=n[t];return e}var wD="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F0(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<wD.length;u++)t=wD[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function my(n){return my[" "](n),n}my[" "]=cg;var mg,n,DD=ni(Rr,"Opera"),Ll=ni(Rr,"Trident")||ni(Rr,"MSIE"),bD=ni(Rr,"Edge"),yy=bD||Ll,CD=ni(Rr,"Gecko")&&!(ni(Rr.toLowerCase(),"webkit")&&!ni(Rr,"Edge"))&&!(ni(Rr,"Trident")||ni(Rr,"MSIE"))&&!ni(Rr,"Edge"),L0=ni(Rr.toLowerCase(),"webkit")&&!ni(Rr,"Edge");function _y(){var n=bt.document;return n?n.documentMode:void 0}e:{var Xh="",V0=(n=Rr,CD?/rv:([^\);]+)(\)|;)/.exec(n):bD?/Edge\/([\d\.]+)/.exec(n):Ll?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):L0?/WebKit\/(\S+)/.exec(n):DD?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(V0&&(Xh=V0?V0[1]:""),Ll){var U0=_y();if(null!=U0&&U0>parseFloat(Xh)){mg=String(U0);break e}}mg=Xh}var ST={};var xT=bt.document&&Ll&&(_y()||parseInt(mg,10))||void 0,RT=function(){if(!bt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{bt.addEventListener("test",cg,e),bt.removeEventListener("test",cg,e)}catch(t){}return n}();function gi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function yg(n,e){if(gi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(CD){e:{try{my(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Mu[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&yg.Z.h.call(this)}}gi.prototype.h=function(){this.defaultPrevented=!0},xr(yg,gi);var Mu={2:"touch",3:"pen",4:"mouse"};yg.prototype.h=function(){yg.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Vl="closure_listenable_"+(1e6*Math.random()|0),AD=0;function j0(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++AD,this.ca=this.fa=!1}function Td(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function ef(n){this.src=n,this.g={},this.h=0}function tf(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=P0(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(Td(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function vy(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}ef.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=vy(n,e,r,o);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new j0(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var zo="closure_lm_"+(1e6*Math.random()|0),_g={};function $0(n,e,t,r,o){if(r&&r.once)return Ey(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)$0(n,e[u],t,r,o);return null}return t=Ul(t),n&&n[Vl]?n.N(e,t,Zh(r)?!!r.capture:!!r,o):vg(n,e,t,!1,r,o)}function vg(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=Zh(o)?!!o.capture:!!o,m=nf(n);if(m||(n[zo]=m=new ef(n)),(t=m.add(e,t,r,d,u)).proxy)return t;if(r=function SD(){var e=Sd;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)RT||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(Ad(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Ey(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Ey(n,e[u],t,r,o);return null}return t=Ul(t),n&&n[Vl]?n.O(e,t,Zh(r)?!!r.capture:!!r,o):vg(n,e,t,!0,r,o)}function H0(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)H0(n,e[u],t,r,o);else r=Zh(r)?!!r.capture:!!r,t=Ul(t),n&&n[Vl]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=vy(u=n.g[e],t,r,o))&&(Td(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=nf(n))&&(e=n.g[e.toString()],n=-1,e&&(n=vy(e,t,r,o)),(t=-1<n?e[n]:null)&&wy(t))}function wy(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Vl])tf(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Ad(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=nf(e))?(tf(t,n),0==t.h&&(t.src=null,e[zo]=null)):Td(n)}}}function Ad(n){return n in _g?_g[n]:_g[n]="on"+n}function Sd(n,e){if(n.ca)n=!0;else{e=new yg(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&wy(n),n=t.call(r,e)}return n}function nf(n){return(n=n[zo])instanceof ef?n:null}var xu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ul(n){return"function"==typeof n?n:(n[xu]||(n[xu]=function(e){return n.handleEvent(e)}),n[xu])}function bn(){co.call(this),this.i=new ef(this),this.P=this,this.I=null}function $r(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new gi(e,n);else if(e instanceof gi)e.target=e.target||n;else{var o=e;F0(e=new gi(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=rf(d,r,!0,e)&&o}if(o=rf(d=e.g=n,r,!0,e)&&o,o=rf(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=rf(d=e.g=t[u],r,!1,e)&&o}function rf(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ca&&d.capture==t){var m=d.listener,w=d.ia||d.src;d.fa&&tf(n.i,d),o=!1!==m.call(w,r)&&o}}return o&&!r.defaultPrevented}xr(bn,co),bn.prototype[Vl]=!0,bn.prototype.removeEventListener=function(n,e,t,r){H0(this,n,e,t,r)},bn.prototype.M=function(){if(bn.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Td(t[r]);delete n.g[e],n.h--}}this.I=null},bn.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},bn.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Eg=bt.JSON.stringify;function Iy(){var n=z0;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var G0,by=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new wg,n=>n.reset());class wg{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function MD(n){bt.setTimeout(()=>{throw n},0)}function Ig(n,e){G0||function q0(){var n=bt.Promise.resolve(void 0);G0=function(){n.then(W0)}}(),Dg||(G0(),Dg=!0),z0.add(n,e)}var Dg=!1,z0=new class Dy{constructor(){this.h=this.g=null}add(e,t){const r=by.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function W0(){for(var n;n=Iy();){try{n.h.call(n.g)}catch(t){MD(t)}var e=by;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Dg=!1}function bg(n,e){bn.call(this),this.h=n||1,this.g=e||bt,this.j=Mr(this.kb,this),this.l=Date.now()}function Cy(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function mi(n,e,t){if("function"==typeof n)t&&(n=Mr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Mr(n.handleEvent,n)}return 2147483647<Number(e)?-1:bt.setTimeout(n,e||0)}function K0(n){n.g=mi(()=>{n.g=null,n.i&&(n.i=!1,K0(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}xr(bg,bn),(Xe=bg.prototype).da=!1,Xe.S=null,Xe.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),$r(this,"tick"),this.da&&(Cy(this),this.start()))}},Xe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Xe.M=function(){bg.Z.M.call(this),Cy(this),delete this.g};class xD extends co{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:K0(this)}M(){super.M(),this.g&&(bt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cg(n){co.call(this),this.h=n,this.g={}}xr(Cg,co);var RD=[];function Ty(n,e,t,r){Array.isArray(t)||(t&&(RD[0]=t.toString()),t=RD);for(var o=0;o<t.length;o++){var u=$0(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function ND(n){Jh(n.g,function(e,t){this.g.hasOwnProperty(t)&&wy(e)},n),n.g={}}function Tg(){this.g=!0}function Md(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function PD(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return Eg(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}Cg.prototype.M=function(){Cg.Z.M.call(this),ND(this)},Cg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Tg.prototype.Aa=function(){this.g=!1},Tg.prototype.info=function(){};var Ru={},Y0=null;function sf(){return Y0=Y0||new bn}function Q0(n){gi.call(this,Ru.Ma,n)}function of(n){const e=sf();$r(e,new Q0(e,n))}function Sy(n,e){gi.call(this,Ru.STAT_EVENT,n),this.stat=e}function ri(n){const e=sf();$r(e,new Sy(e,n))}function J0(n,e){gi.call(this,Ru.Na,n),this.size=e}function Li(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return bt.setTimeout(function(){n()},e)}Ru.Ma="serverreachability",xr(Q0,gi),Ru.STAT_EVENT="statevent",xr(Sy,gi),Ru.Na="timingevent",xr(J0,gi);var xd={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},X0={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function My(){}function xy(){}My.prototype.h=null;var uf,af={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ry(){gi.call(this,"d")}function Ny(){gi.call(this,"c")}function Ag(){}function lf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Cg(this),this.P=Oy,this.W=new bg(n=yy?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new cf}function cf(){this.i=null,this.g="",this.h=!1}xr(Ry,gi),xr(Ny,gi),xr(Ag,My),Ag.prototype.g=function(){return new XMLHttpRequest},Ag.prototype.i=function(){return{}},uf=new Ag;var Oy=45e3,Py={},Rd={};function df(n,e,t){n.K=1,n.v=ff(po(e)),n.s=t,n.U=!0,ky(n,null)}function ky(n,e){n.F=Date.now(),Sg(n),n.A=po(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),go(t.h,"t",r),n.C=0,t=n.l.H,n.h=new cf,n.g=Wl(n.l,t?e:null,!n.s),0<n.O&&(n.L=new xD(Mr(n.Ia,n,n.g),n.O)),Ty(n.V,n.g,"readystatechange",n.gb),e=n.H?gg(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),of(1),function Ay(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",m=u.split("&"),w=0;w<m.length;w++){var C=m[w].split("=");if(1<C.length){var R=C[0];C=C[1];var N=R.split("_");d=2<=N.length&&"type"==N[1]?d+(R+"=")+C+"&":d+(R+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function FD(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function LD(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=Fy(n,t),o==Rd){4==e&&(n.o=4,ri(14),r=!1),Md(n.j,n.m,null,"[Incomplete Response]");break}if(o==Py){n.o=4,ri(15),Md(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Md(n.j,n.m,o,null),Mg(n,o)}FD(n)&&o!=Rd&&o!=Py&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ri(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Vi(e),e.L=!0,ri(11))):(Md(n.j,n.m,t,"[Invalid Chunked Response]"),Nu(n),Nd(n))}function Fy(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Rd:(t=Number(e.substring(t,r)),isNaN(t)?Py:(r+=1)+t>e.length?Rd:(e=e.substr(r,t),n.C=r+t,e))}function Sg(n){n.Y=Date.now()+n.P,eE(n,n.P)}function eE(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Li(Mr(n.eb,n),e)}function hf(n){n.B&&(bt.clearTimeout(n.B),n.B=null)}function Nd(n){0==n.l.G||n.I||Hl(n.l,n)}function Nu(n){hf(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Cy(n.W),ND(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Mg(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||$y(t.i,n)))if(t.I=n.N,!n.J&&$y(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(C){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=Li(Mr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Na(t),Fg(t)}Ld(t),ri(18)}if(1>=cE(t.i)&&t.ka){try{t.ka()}catch(C){}t.ka=void 0}}else Fs(t,11)}else if((n.J||t.g==n)&&Na(t),!Cd(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let C=o[e];if(t.U=C[0],C=C[1],2==t.G)if("c"==C[0]){t.J=C[1],t.la=C[2];const R=C[3];null!=R&&(t.ma=R,t.h.info("VER="+t.ma));const N=C[4];null!=N&&(t.za=N,t.h.info("SVER="+t.za));const z=C[5];null!=z&&"number"==typeof z&&0<z&&(t.K=r=1.5*z,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const ee=n.g;if(ee){const ge=ee.g?ee.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ge){var u=r.i;!u.g&&(ni(ge,"spdy")||ni(ge,"quic")||ni(ge,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(Hy(u,u.h),u.h=null))}if(r.D){const Le=ee.g?ee.g.getResponseHeader("X-HTTP-Session-Id"):null;Le&&(r.sa=Le,dn(r.F,r.D,Le))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=zl(r,r.H?r.la:null,r.W),d.J){Gy(r.i,d);var m=d,w=r.K;w&&m.setTimeout(w),m.B&&(hf(m),Sg(m)),r.g=d}else Vu(r);0<t.l.length&&Lg(t)}else"stop"!=C[0]&&"close"!=C[0]||Fs(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?Fs(t,7):Lu(t):"noop"!=C[0]&&t.j&&t.j.wa(C),t.A=0)}of(4)}catch(C){}}function fo(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(py(n)||"string"==typeof n)dg(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(py(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function tE(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(py(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function Ma(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Ma)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Ly(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Bl(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)Bl(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function Bl(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Xe=lf.prototype).setTimeout=function(n){this.P=n},Xe.gb=function(n){n=n.target;const e=this.L;e&&3==xa(n)?e.l():this.Ia(n)},Xe.Ia=function(n){try{if(n==this.g)e:{const R=xa(this.g);var e=this.g.Da();const N=this.g.ba();if(!(3>R)&&(3!=R||yy||this.g&&(this.h.h||this.g.ga()||gE(this.g)))){this.I||4!=R||7==e||of(8==e||0>=N?3:2),hf(this);var t=this.g.ba();this.N=t;t:if(FD(this)){var r=gE(this.g);n="";var o=r.length,u=4==xa(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Nu(this),Nd(this);var d="";break t}this.h.i=new bt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function Z0(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.X,R,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Cd(m)){var C=m;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,ri(12),Nu(this),Nd(this);break e}Md(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Mg(this,t)}this.U?(LD(this,R,d),yy&&this.i&&3==R&&(Ty(this.V,this.W,"tick",this.fb),this.W.start())):(Md(this.j,this.m,d,null),Mg(this,d)),4==R&&Nu(this),this.i&&!this.I&&(4==R?Hl(this.l,this):(this.i=!1,Sg(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,ri(12)):(this.o=0,ri(13)),Nu(this),Nd(this)}}}catch(R){}},Xe.fb=function(){if(this.g){var n=xa(this.g),e=this.g.ga();this.C<e.length&&(hf(this),LD(this,n,e),this.i&&4!=n&&Sg(this))}},Xe.cancel=function(){this.I=!0,Nu(this)},Xe.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function OD(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(of(3),ri(17)),Nu(this),this.o=2,Nd(this)):eE(this,this.Y-n)},(Xe=Ma.prototype).R=function(){Ly(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Xe.T=function(){return Ly(this),this.g.concat()},Xe.get=function(n,e){return Bl(this.h,n)?this.h[n]:e},Xe.set=function(n,e){Bl(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Xe.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var VD=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ou(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Ou){this.g=void 0!==e?e:n.g,Pu(this,n.j),this.s=n.s,xg(this,n.i),Od(this,n.m),this.l=n.l,e=n.h;var t=new mf;t.i=e.i,e.g&&(t.g=new Ma(e.g),t.h=e.h),Uy(this,t),this.o=n.o}else n&&(t=String(n).match(VD))?(this.g=!!e,Pu(this,t[1]||"",!0),this.s=pf(t[2]||""),xg(this,t[3]||"",!0),Od(this,t[4]),this.l=pf(t[5]||"",!0),Uy(this,t[6]||"",!0),this.o=pf(t[7]||"")):(this.g=!!e,this.h=new mf(null,this.g))}function po(n){return new Ou(n)}function Pu(n,e,t){n.j=t?pf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function xg(n,e,t){n.i=t?pf(e,!0):e}function Od(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Uy(n,e,t){e instanceof mf?(n.h=e,function oE(n,e){e&&!n.j&&(ku(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(iE(this,r),go(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=gf(e,jD)),n.h=new mf(e,n.g))}function dn(n,e,t){n.h.set(e,t)}function ff(n){return dn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function pf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function gf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,nE),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function nE(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ou.prototype.toString=function(){var n=[],e=this.j;e&&n.push(gf(e,jl,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(gf(e,jl,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(gf(t,"/"==t.charAt(0)?BD:rE,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",gf(t,Pd)),n.join("")};var jl=/[#\/\?@]/g,rE=/[#\?:]/g,BD=/[#\?]/g,jD=/[#\?@]/g,Pd=/#/g;function mf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function ku(n){n.g||(n.g=new Ma,n.h=0,n.i&&function Vy(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function iE(n,e){ku(n),e=Fu(n,e),Bl(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Bl((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Ly(n)))}function sE(n,e){return ku(n),e=Fu(n,e),Bl(n.g.h,e)}function go(n,e,t){iE(n,e),0<t.length&&(n.i=null,n.g.set(Fu(n,e),fg(t)),n.h+=t.length)}function Fu(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function jy(n){this.l=n||uE,n=bt.PerformanceNavigationTiming?0<(n=bt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(bt.g&&bt.g.Ea&&bt.g.Ea()&&bt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Xe=mf.prototype).add=function(n,e){ku(this),this.i=null,n=Fu(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Xe.forEach=function(n,e){ku(this),this.g.forEach(function(t,r){dg(t,function(o){n.call(e,o,r,this)},this)},this)},Xe.T=function(){ku(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},Xe.R=function(n){ku(this);var e=[];if("string"==typeof n)sE(this,n)&&(e=hg(e,this.g.get(Fu(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=hg(e,n[t])}return e},Xe.set=function(n,e){return ku(this),this.i=null,sE(this,n=Fu(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Xe.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Xe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var d=o;""!==r[u]&&(d+="="+encodeURIComponent(String(r[u]))),n.push(d)}}return this.i=n.join("&")};var uE=10;function lE(n){return!!n.h||!!n.g&&n.g.size>=n.j}function cE(n){return n.h?1:n.g?n.g.size:0}function $y(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Hy(n,e){n.g?n.g.add(e):n.h=e}function Gy(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function $D(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return fg(n.i)}function Rg(){}function HD(){this.g=new Rg}function GD(n,e,t){const r=t||"";try{fo(n,function(o,u){let d=o;Zh(o)&&(d=Eg(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function qy(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function $l(n){this.l=n.$b||null,this.j=n.ib||!1}function Ng(n,e){bn.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Og,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}jy.prototype.cancel=function(){if(this.i=$D(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Rg.prototype.stringify=function(n){return bt.JSON.stringify(n,void 0)},Rg.prototype.parse=function(n){return bt.JSON.parse(n,void 0)},xr($l,My),$l.prototype.g=function(){return new Ng(this.l,this.j)},$l.prototype.i=function(n){return function(){return n}}({}),xr(Ng,bn);var Og=0;function zy(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Pg(n){n.readyState=4,n.l=null,n.j=null,n.A=null,yi(n)}function yi(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Xe=Ng.prototype).open=function(n,e){if(this.readyState!=Og)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,yi(this)},Xe.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||bt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Xe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Pg(this)),this.readyState=Og},Xe.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,yi(this)),this.g&&(this.readyState=3,yi(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==bt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;zy(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Xe.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Pg(this):yi(this),3==this.readyState&&zy(this)}},Xe.Ua=function(n){this.g&&(this.response=this.responseText=n,Pg(this))},Xe.Ta=function(n){this.g&&(this.response=n,Pg(this))},Xe.ha=function(){this.g&&Pg(this)},Xe.setRequestHeader=function(n,e){this.v.append(n,e)},Xe.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Xe.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Ng.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var OT=bt.JSON.parse;function gr(n){bn.call(this),this.headers=new Ma,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Wy,this.K=this.L=!1}xr(gr,bn);var Wy="",dE=/^https?$/i,hE=["POST","PUT"];function PT(n){return"content-type"==n.toLowerCase()}function Ky(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,kg(n),kd(n)}function kg(n){n.D||(n.D=!0,$r(n,"complete"),$r(n,"error"))}function fE(n){if(n.h&&void 0!==lg&&(!n.C[1]||4!=xa(n)||2!=n.ba()))if(n.v&&4==xa(n))mi(n.Fa,0,n);else if($r(n,"readystatechange"),4==xa(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(VD)[1]||null;if(!o&&bt.self&&bt.self.location){var u=bt.self.location.protocol;o=u.substr(0,u.length-1)}r=!dE.test(o?o.toLowerCase():"")}t=r}if(t)$r(n,"complete"),$r(n,"success");else{n.m=6;try{var d=2<xa(n)?n.g.statusText:""}catch(w){d=""}n.j=d+" ["+n.ba()+"]",kg(n)}}finally{kd(n)}}}function kd(n,e){if(n.g){pE(n);const t=n.g,r=n.C[0]?cg:null;n.g=null,n.C=null,e||$r(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function pE(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(bt.clearTimeout(n.A),n.A=null)}function xa(n){return n.g?n.g.readyState:0}function gE(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Wy:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Zy(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function zD(n){let e="";return Jh(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):dn(n,e,t))}function yf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function _f(n){this.za=0,this.l=[],this.h=new Tg,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=yf("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=yf("baseRetryDelayMs",5e3,n),this.$a=yf("retryDelaySeedMs",1e4,n),this.Ya=yf("forwardChannelMaxRetries",2,n),this.ra=yf("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new jy(n&&n.concurrentRequestLimit),this.Ca=new HD,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Lu(n){if(Fd(n),3==n.G){var e=n.V++,t=po(n.F);dn(t,"SID",n.J),dn(t,"RID",e),dn(t,"TYPE","terminate"),Ra(n,t),(e=new lf(n,n.h,e,void 0)).K=2,e.v=ff(po(t)),t=!1,bt.navigator&&bt.navigator.sendBeacon&&(t=bt.navigator.sendBeacon(e.v.toString(),"")),!t&&bt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Wl(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Sg(e)}ql(n)}function Fg(n){n.g&&(Vi(n),n.g.cancel(),n.g=null)}function Fd(n){Fg(n),n.u&&(bt.clearTimeout(n.u),n.u=null),Na(n),n.i.cancel(),n.m&&("number"==typeof n.m&&bt.clearTimeout(n.m),n.m=null)}function Yy(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Lg(n)}function Lg(n){lE(n.i)||n.m||(n.m=!0,Ig(n.Ha,n),n.C=0)}function mo(n,e){var t;t=e?e.m:n.V++;const r=po(n.F);dn(r,"SID",n.J),dn(r,"RID",t),dn(r,"AID",n.U),Ra(n,r),n.o&&n.s&&Zy(r,n.o,n.s),t=new lf(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Hr(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Hy(n.i,t),df(t,r,e)}function Ra(n,e){n.j&&fo({},function(t,r){dn(e,r,t)})}function Hr(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Mr(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let C=o[w].h;const R=o[w].g;if(C-=u,0>C)u=Math.max(0,o[w].h-100),m=!1;else try{GD(R,d,"req"+C+"_")}catch(N){r&&r(R)}}if(m){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Vu(n){n.g||n.u||(n.Y=1,Ig(n.Ga,n),n.A=0)}function Ld(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Li(Mr(n.Ga,n),Gl(n,n.A)),n.A++,0))}function Vi(n){null!=n.B&&(bt.clearTimeout(n.B),n.B=null)}function Vg(n){n.g=new lf(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=po(n.oa);dn(e,"RID","rpc"),dn(e,"SID",n.J),dn(e,"CI",n.N?"0":"1"),dn(e,"AID",n.U),Ra(n,e),dn(e,"TYPE","xmlhttp"),n.o&&n.s&&Zy(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=ff(po(e)),t.s=null,t.U=!0,ky(t,n)}function Na(n){null!=n.v&&(bt.clearTimeout(n.v),n.v=null)}function Hl(n,e){var t=null;if(n.g==e){Na(n),Vi(n),n.g=null;var r=2}else{if(!$y(n.i,e))return;t=e.D,Gy(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;$r(r=sf(),new J0(r,t,e,o)),Lg(n)}else Vu(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function Qy(n,e){return!(cE(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Li(Mr(n.Ha,n,e),Gl(n,n.C)),n.C++,0)))}(n,e)||2==r&&Ld(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:Fs(n,5);break;case 4:Fs(n,10);break;case 3:Fs(n,6);break;default:Fs(n,2)}}function Gl(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Fs(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Mr(n.jb,n);t||(t=new Ou("//www.google.com/images/cleardot.gif"),bt.location&&"http"==bt.location.protocol||Pu(t,"https"),ff(t)),function NT(n,e){const t=new Tg;if(bt.Image){const r=new Image;r.onload=Yh(qy,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Yh(qy,t,r,"TestLoadImage: error",!1,e),r.onabort=Yh(qy,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Yh(qy,t,r,"TestLoadImage: timeout",!1,e),bt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ri(2);n.G=0,n.j&&n.j.va(e),ql(n),Fd(n)}function ql(n){n.G=0,n.I=-1,n.j&&((0!=$D(n.i).length||0!=n.l.length)&&(n.i.i.length=0,fg(n.l),n.l.length=0),n.j.ua())}function zl(n,e,t){let r=function UD(n){return n instanceof Ou?po(n):new Ou(n,void 0)}(t);if(""!=r.i)e&&xg(r,e+"."+r.i),Od(r,r.m);else{const o=bt.location;r=function By(n,e,t,r){var o=new Ou(null,void 0);return n&&Pu(o,n),e&&xg(o,e),t&&Od(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&Jh(n.aa,function(o,u){dn(r,u,o)}),t=n.sa,(e=n.D)&&t&&dn(r,e,t),dn(r,"VER",n.ma),Ra(n,r),r}function Wl(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new gr(t&&n.Ba&&!n.qa?new $l({ib:!0}):n.qa)).L=n.H,e}function Kl(){}function Oa(){if(Ll&&!(10<=Number(xT)))throw Error("Environmental error: no available transport.")}function Ui(n,e){bn.call(this),this.g=new _f(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Cd(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Cd(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Zl(this)}function Jy(n){Ry.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Xy(){Ny.call(this),this.status=1}function Zl(n){this.g=n}(Xe=gr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():uf.g(),this.C=function kD(n){return n.h||(n.h=n.i())}(this.u?this.u:uf),this.g.onreadystatechange=Mr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void Ky(this,u)}n=t||"";const o=new Ma(this.headers);r&&fo(r,function(u,d){o.set(d,u)}),r=function Sa(n){e:{var e=PT;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=bt.FormData&&n instanceof bt.FormData,!(0<=P0(hE,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,d){this.g.setRequestHeader(d,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{pE(this),0<this.B&&((this.K=function qD(n){return Ll&&function MT(){return function ID(n){var e=ST;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=ED(String(mg)).split("."),t=ED("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",u=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=k0(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||k0(0==o[2].length,0==u[2].length)||k0(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Mr(this.pa,this)):this.A=mi(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Ky(this,u)}},Xe.pa=function(){void 0!==lg&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,$r(this,"timeout"),this.abort(8))},Xe.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,$r(this,"complete"),$r(this,"abort"),kd(this))},Xe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),kd(this,!0)),gr.Z.M.call(this)},Xe.Fa=function(){this.s||(this.F||this.v||this.l?fE(this):this.cb())},Xe.cb=function(){fE(this)},Xe.ba=function(){try{return 2<xa(this)?this.g.status:-1}catch(n){return-1}},Xe.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Xe.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),OT(e)}},Xe.Da=function(){return this.m},Xe.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Xe=_f.prototype).ma=8,Xe.G=1,Xe.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Xe.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new lf(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=gg(u),F0(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Hr(this,o,e),dn(t=po(this.F),"RID",n),dn(t,"CVER",22),this.D&&dn(t,"X-HTTP-Session-Id",this.D),Ra(this,t),this.o&&u&&Zy(t,this.o,u),Hy(this.i,o),this.Ra&&dn(t,"TYPE","init"),this.ja?(dn(t,"$req",e),dn(t,"SID","null"),o.$=!0,df(o,t,null)):df(o,t,e),this.G=2}}else 3==this.G&&(n?mo(this,n):0==this.l.length||lE(this.i)||mo(this))},Xe.Ga=function(){if(this.u=null,Vg(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Li(Mr(this.bb,this),n)}},Xe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ri(10),Fg(this),Vg(this))},Xe.ab=function(){null!=this.v&&(this.v=null,Fg(this),Ld(this),ri(19))},Xe.jb=function(n){n?(this.h.info("Successfully pinged google.com"),ri(2)):(this.h.info("Failed to ping google.com"),ri(1))},(Xe=Kl.prototype).xa=function(){},Xe.wa=function(){},Xe.va=function(){},Xe.ua=function(){},Xe.Oa=function(){},Oa.prototype.g=function(n,e){return new Ui(n,e)},xr(Ui,bn),Ui.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Ig(Mr(n.hb,n,e))),ri(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=zl(n,null,n.W),Lg(n)},Ui.prototype.close=function(){Lu(this.g)},Ui.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Yy(this.g,e)}else this.v?((e={}).__data__=Eg(n),Yy(this.g,e)):Yy(this.g,n)},Ui.prototype.M=function(){this.g.j=null,delete this.j,Lu(this.g),delete this.g,Ui.Z.M.call(this)},xr(Jy,Ry),xr(Xy,Ny),xr(Zl,Kl),Zl.prototype.xa=function(){$r(this.g,"a")},Zl.prototype.wa=function(n){$r(this.g,new Jy(n))},Zl.prototype.va=function(n){$r(this.g,new Xy(n))},Zl.prototype.ua=function(){$r(this.g,"b")},Oa.prototype.createWebChannel=Oa.prototype.g,Ui.prototype.send=Ui.prototype.u,Ui.prototype.open=Ui.prototype.m,Ui.prototype.close=Ui.prototype.close,xd.NO_ERROR=0,xd.TIMEOUT=8,xd.HTTP_ERROR=6,X0.COMPLETE="complete",xy.EventType=af,af.OPEN="a",af.CLOSE="b",af.ERROR="c",af.MESSAGE="d",bn.prototype.listen=bn.prototype.N,gr.prototype.listenOnce=gr.prototype.O,gr.prototype.getLastError=gr.prototype.La,gr.prototype.getLastErrorCode=gr.prototype.Da,gr.prototype.getStatus=gr.prototype.ba,gr.prototype.getResponseJson=gr.prototype.Qa,gr.prototype.getResponseText=gr.prototype.ga,gr.prototype.send=gr.prototype.ea;var mE=pr.createWebChannelTransport=function(){return new Oa},yE=pr.getStatEventTarget=function(){return sf()},Ug=pr.ErrorCode=xd,_E=pr.EventType=X0,vE=pr.Event=Ru,EE=pr.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},wE=pr.FetchXmlHttpFactory=$l,Bg=pr.WebChannel=xy,WD=pr.XhrIo=gr;const e_="@firebase/firestore";class Gr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gr.UNAUTHENTICATED=new Gr(null),Gr.GOOGLE_CREDENTIALS=new Gr("google-credentials-uid"),Gr.FIRST_PARTY=new Gr("first-party-uid"),Gr.MOCK_USER=new Gr("mock-user");let Vd="9.8.0";const Pa=new Aa.Yd("@firebase/firestore");function t_(){return Pa.logLevel}function Oe(n,...e){if(Pa.logLevel<=Aa.in.DEBUG){const t=e.map(n_);Pa.debug(`Firestore (${Vd}): ${n}`,...t)}}function er(n,...e){if(Pa.logLevel<=Aa.in.ERROR){const t=e.map(n_);Pa.error(`Firestore (${Vd}): ${n}`,...t)}}function jg(n,...e){if(Pa.logLevel<=Aa.in.WARN){const t=e.map(n_);Pa.warn(`Firestore (${Vd}): ${n}`,...t)}}function n_(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function et(n="Unexpected state"){const e=`FIRESTORE (${Vd}) INTERNAL ASSERTION FAILED: `+n;throw er(e),new Error(e)}function wt(n,e){n||et()}function We(n,e){return n}const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends Ot.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Nr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class r_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Gr.UNAUTHENTICATED))}shutdown(){}}class ZD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Ud{constructor(e){this.t=e,this.currentUser=Gr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=C=>this.i!==o?(o=this.i,t(C)):Promise.resolve();let d=new Nr;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Nr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const C=d;e.enqueueRetryable((0,Ie.Z)(function*(){yield C.promise,yield u(r.currentUser)}))},w=C=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>w(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?w(C):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Nr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(wt("string"==typeof r.accessToken),new r_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return wt(null===e||"string"==typeof e),new Gr(e)}}class YD{constructor(e,t,r){this.type="FirstParty",this.user=Gr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class DE{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new YD(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Gr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class bE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class CE{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.p;return this.p=u.token,Oe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(wt("string"==typeof t.token),this.p=t.token,new bE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class is{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function TE(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}is.A=-1;class AE{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=TE(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function At(n,e){return n<e?-1:n>e?1:0}function Bd(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function SE(n){return n+"\0"}class $n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return $n.fromMillis(Date.now())}static fromDate(e){return $n.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new $n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?At(this.nanoseconds,e.nanoseconds):At(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class _t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new _t(e)}static min(){return new _t(new $n(0,0))}static max(){return new _t(new $n(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function ME(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Uu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function s_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Yl{constructor(e,t,r){void 0===t?t=0:t>e.length&&et(),void 0===r?r=e.length-t:r>e.length-t&&et(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Yl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Yl?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class qt extends Yl{construct(e,t,r){return new qt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new qt(t)}static emptyPath(){return new qt([])}}const o_=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mr extends Yl{construct(e,t,r){return new mr(e,t,r)}static isValidIdentifier(e){return o_.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new mr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new xe(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new xe(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new xe(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===m?(d=!d,o++):"."!==m||d?(r+=m,o++):(u(),o++)}if(u(),d)throw new xe(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mr(t)}static emptyPath(){return new mr([])}}class vf{constructor(e){this.fields=e,e.sort(mr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Bd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class tr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new tr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new tr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return At(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tr.EMPTY_BYTE_STRING=new tr("");const a_=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wo(n){if(wt(!!n),"string"==typeof n){let e=0;const t=a_.exec(n);if(wt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Nn(n.seconds),nanos:Nn(n.nanos)}}function Nn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ko(n){return"string"==typeof n?tr.fromBase64String(n):tr.fromUint8Array(n)}function jd(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function $g(n){const e=n.mapValue.fields.__previous_value__;return jd(e)?$g(e):e}function Hg(n){const e=Wo(n.mapValue.fields.__local_write_time__.timestampValue);return new $n(e.seconds,e.nanos)}class QD{constructor(e,t,r,o,u,d,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class yo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new yo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof yo&&e.projectId===this.projectId&&e.database===this.database}}function Ql(n){return null==n}function $d(n){return 0===n&&1/n==-1/0}function u_(n){return"number"==typeof n&&Number.isInteger(n)&&!$d(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class je{constructor(e){this.path=e}static fromPath(e){return new je(qt.fromString(e))}static fromName(e){return new je(qt.fromString(e).popFirst(5))}static empty(){return new je(qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===qt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new je(new qt(e.slice()))}}const ka={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},wf={nullValue:"NULL_VALUE"};function Fa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?jd(n)?4:h_(n)?9007199254740991:10:et()}function _o(n,e){if(n===e)return!0;const t=Fa(n);if(t!==Fa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Hg(n).isEqual(Hg(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Wo(r.timestampValue),d=Wo(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Ko(n.bytesValue).isEqual(Ko(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Nn(r.geoPointValue.latitude)===Nn(o.geoPointValue.latitude)&&Nn(r.geoPointValue.longitude)===Nn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Nn(r.integerValue)===Nn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Nn(r.doubleValue),d=Nn(o.doubleValue);return u===d?$d(u)===$d(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return Bd(n.arrayValue.values||[],e.arrayValue.values||[],_o);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(ME(u)!==ME(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===d[m]||!_o(u[m],d[m])))return!1;return!0}(n,e);default:return et()}var o}function If(n,e){return void 0!==(n.values||[]).find(t=>_o(t,e))}function La(n,e){if(n===e)return 0;const t=Fa(n),r=Fa(e);if(t!==r)return At(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return At(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=Nn(o.integerValue||o.doubleValue),m=Nn(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return l_(n.timestampValue,e.timestampValue);case 4:return l_(Hg(n),Hg(e));case 5:return At(n.stringValue,e.stringValue);case 6:return function(o,u){const d=Ko(o),m=Ko(u);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),m=u.split("/");for(let w=0;w<d.length&&w<m.length;w++){const C=At(d[w],m[w]);if(0!==C)return C}return At(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=At(Nn(o.latitude),Nn(u.latitude));return 0!==d?d:At(Nn(o.longitude),Nn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],m=u.values||[];for(let w=0;w<d.length&&w<m.length;++w){const C=La(d[w],m[w]);if(C)return C}return At(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===ka.mapValue&&u===ka.mapValue)return 0;if(o===ka.mapValue)return 1;if(u===ka.mapValue)return-1;const d=o.fields||{},m=Object.keys(d),w=u.fields||{},C=Object.keys(w);m.sort(),C.sort();for(let R=0;R<m.length&&R<C.length;++R){const N=At(m[R],C[R]);if(0!==N)return N;const z=La(d[m[R]],w[C[R]]);if(0!==z)return z}return At(m.length,C.length)}(n.mapValue,e.mapValue);default:throw et()}}function l_(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return At(n,e);const t=Wo(n),r=Wo(e),o=At(t.seconds,r.seconds);return 0!==o?o:At(t.nanos,r.nanos)}function Bu(n){return Gg(n)}function Gg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Wo(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ko(n.bytesValue).toBase64():"referenceValue"in n?je.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=Gg(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of o)d?d=!1:u+=",",u+=`${m}:${Gg(r.fields[m])}`;return u+"}"}(n.mapValue):et();var e}function Jl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function c_(n){return!!n&&"integerValue"in n}function Df(n){return!!n&&"arrayValue"in n}function d_(n){return!!n&&"nullValue"in n}function bf(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Cf(n){return!!n&&"mapValue"in n}function Hd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Uu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Hd(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Hd(n.arrayValue.values[t]);return e}return Object.assign({},n)}function h_(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function xE(n){return"nullValue"in n?wf:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Jl(yo.empty(),je.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:et()}function RE(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Jl(yo.empty(),je.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ka:et()}function f_(n,e){const t=La(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function p_(n,e){const t=La(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class qr{constructor(e){this.value=e}static empty(){return new qr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Cf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hd(t)}setAll(e){let t=mr.emptyPath(),r={},o=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=m.popLast()}d?r[m.lastSegment()]=Hd(d):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());Cf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return _o(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Cf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Uu(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new qr(Hd(this.value))}}function JD(n){const e=[];return Uu(n.fields,(t,r)=>{const o=new mr([t]);if(Cf(r)){const u=JD(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new vf(e)}class hn{constructor(e,t,r,o,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new hn(e,0,_t.min(),_t.min(),qr.empty(),0)}static newFoundDocument(e,t,r){return new hn(e,1,t,_t.min(),r,0)}static newNoDocument(e,t){return new hn(e,2,t,_t.min(),qr.empty(),0)}static newUnknownDocument(e,t){return new hn(e,3,t,_t.min(),qr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class qg{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function zg(n){return n.fields.find(e=>2===e.kind)}function Xl(n){return n.fields.filter(e=>2!==e.kind)}qg.UNKNOWN_ID=-1;class On{constructor(e,t){this.fieldPath=e,this.kind=t}}class Gd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Gd(0,Ls.min())}}function NE(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=_t.fromTimestamp(1e9===r?new $n(t+1,0):new $n(t,r));return new Ls(o,je.empty(),e)}function XD(n){return new Ls(n.readTime,n.key,-1)}class Ls{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ls(_t.min(),je.empty(),-1)}static max(){return new Ls(_t.max(),je.empty(),-1)}}function OE(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=je.comparator(n.documentKey,e.documentKey),0!==t?t:At(n.largestBatchId,e.largestBatchId))}class Pn{constructor(e,t){this.comparator=e,this.root=t||kn.EMPTY}insert(e,t){return new Pn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,kn.BLACK,null,null))}remove(e){return new Pn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tf(this.root,e,this.comparator,!0)}}class Tf{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kn{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:kn.RED,this.left=null!=o?o:kn.EMPTY,this.right=null!=u?u:kn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new kn(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return kn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return kn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw et();const e=this.left.check();if(e!==this.right.check())throw et();return e+(this.isRed()?0:1)}}kn.EMPTY=null,kn.RED=!0,kn.BLACK=!1,kn.EMPTY=new class{constructor(){this.size=0}get key(){throw et()}get value(){throw et()}get color(){throw et()}get left(){throw et()}get right(){throw et()}copy(n,e,t,r,o){return this}insert(n,e,t){return new kn(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class un{constructor(e){this.comparator=e,this.data=new Pn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new PE(this.data.getIterator())}getIteratorFrom(e){return new PE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof un)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new un(this.comparator);return t.data=e,t}}class PE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ec(n){return n.hasNext()?n.getNext():void 0}class eb{constructor(e,t=null,r=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.P=null}}function g_(n,e=null,t=[],r=[],o=null,u=null,d=null){return new eb(n,e,t,r,o,u,d)}function qd(n){const e=We(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+Bu(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Ql(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Bu(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Bu(r)).join(",")),e.P=t}return e.P}function tc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!BE(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!_o(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!y_(n.startAt,e.startAt)&&y_(n.endAt,e.endAt)}function ss(n){return je.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Wg(n,e){return n.filters.filter(t=>t instanceof sn&&t.field.isEqual(e))}function FE(n,e,t){let r=wf,o=!0;for(const u of Wg(n,e)){let d=wf,m=!0;switch(u.op){case"<":case"<=":d=xE(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,m=!1;break;case"!=":case"not-in":d=wf}f_({value:r,inclusive:o},{value:d,inclusive:m})<0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];f_({value:r,inclusive:o},{value:d,inclusive:t.inclusive})<0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function vo(n,e,t){let r=ka,o=!0;for(const u of Wg(n,e)){let d=ka,m=!0;switch(u.op){case">=":case">":d=RE(u.value),m=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,m=!1;break;case"!=":case"not-in":d=ka}p_({value:r,inclusive:o},{value:d,inclusive:m})>0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];p_({value:r,inclusive:o},{value:d,inclusive:t.inclusive})>0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class sn extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new Eo(e,t,r):"array-contains"===t?new tb(e,r):"in"===t?new nb(e,r):"not-in"===t?new rb(e,r):"array-contains-any"===t?new m_(e,r):new sn(e,t,r)}static V(e,t,r){return"in"===t?new LE(e,r):new VE(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(La(t,this.value)):null!==t&&Fa(this.value)===Fa(t)&&this.v(La(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return et()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Eo extends sn{constructor(e,t,r){super(e,t,r),this.key=je.fromName(r.referenceValue)}matches(e){const t=je.comparator(e.key,this.key);return this.v(t)}}class LE extends sn{constructor(e,t){super(e,"in",t),this.keys=UE(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class VE extends sn{constructor(e,t){super(e,"not-in",t),this.keys=UE(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function UE(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>je.fromName(r.referenceValue))}class tb extends sn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Df(t)&&If(t.arrayValue,this.value)}}class nb extends sn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&If(this.value.arrayValue,t)}}class rb extends sn{constructor(e,t){super(e,"not-in",t)}matches(e){if(If(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!If(this.value.arrayValue,t)}}class m_ extends sn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Df(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>If(this.value.arrayValue,r))}}class Vs{constructor(e,t){this.position=e,this.inclusive=t}}class zd{constructor(e,t="asc"){this.field=e,this.dir=t}}function BE(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function jE(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?je.comparator(je.fromName(d.referenceValue),t.key):La(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function y_(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!_o(n.position[t],e.position[t]))return!1;return!0}class Zo{constructor(e,t=null,r=[],o=[],u=null,d="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=w,this.D=null,this.C=null}}function Af(n,e,t,r,o,u,d,m){return new Zo(n,e,t,r,o,u,d,m)}function Wd(n){return new Zo(n)}function Kg(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Sf(n){for(const e of n.filters)if(e.S())return e.field;return null}function Mf(n){return null!==n.collectionGroup}function nc(n){const e=We(n);if(null===e.D){e.D=[];const t=Sf(e),r=Kg(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new zd(t)),e.D.push(new zd(mr.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new zd(mr.keyField(),u))}}}return e.D}function os(n){const e=We(n);if(!e.C)if("F"===e.limitType)e.C=g_(e.path,e.collectionGroup,nc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of nc(e))t.push(new zd(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Vs(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new Vs(e.startAt.position,e.startAt.inclusive):null;e.C=g_(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function __(n,e,t){return new Zo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Kd(n,e){return tc(os(n),os(e))&&n.limitType===e.limitType}function v_(n){return`${qd(os(n))}|lt:${n.limitType}`}function Zg(n){return`Query(target=${function kE(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Bu(r.value)}`;var r}).join(", ")}]`),Ql(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Bu(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Bu(t)).join(",")),`Target(${e})`}(os(n))}; limitType=${n.limitType})`}function Yg(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):je.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,d){const m=jE(o,u,d);return o.inclusive?m<=0:m<0}(t.startAt,nc(t),r)||t.endAt&&!function(o,u,d){const m=jE(o,u,d);return o.inclusive?m>=0:m>0}(t.endAt,nc(t),r)));var t,r}function E_(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function HE(n){return(e,t)=>{let r=!1;for(const o of nc(n)){const u=ib(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function ib(n,e,t){const r=n.field.isKeyField()?je.comparator(e.key,t.key):function(o,u,d){const m=u.data.field(o),w=d.data.field(o);return null!==m&&null!==w?La(m,w):et()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return et()}}function GE(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$d(e)?"-0":e}}function qE(n){return{integerValue:""+n}}function zE(n,e){return u_(e)?qE(e):GE(n,e)}class Qg{constructor(){this._=void 0}}function sb(n,e,t){return n instanceof Zd?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof rc?KE(n,e):n instanceof ic?ZE(n,e):function(r,o){const u=WE(r,o),d=YE(u)+YE(r.k);return c_(u)&&c_(r.k)?qE(d):GE(r.M,d)}(n,e)}function ob(n,e,t){return n instanceof rc?KE(n,e):n instanceof ic?ZE(n,e):t}function WE(n,e){return n instanceof Yd?c_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Zd extends Qg{}class rc extends Qg{constructor(e){super(),this.elements=e}}function KE(n,e){const t=QE(e);for(const r of n.elements)t.some(o=>_o(o,r))||t.push(r);return{arrayValue:{values:t}}}class ic extends Qg{constructor(e){super(),this.elements=e}}function ZE(n,e){let t=QE(e);for(const r of n.elements)t=t.filter(o=>!_o(o,r));return{arrayValue:{values:t}}}class Yd extends Qg{constructor(e,t){super(),this.M=e,this.k=t}}function YE(n){return Nn(n.integerValue||n.doubleValue)}function QE(n){return Df(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class xf{constructor(e,t){this.field=e,this.transform=t}}class XE{constructor(e,t){this.version=e,this.transformResults=t}}class Hn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Hn}static exists(e){return new Hn(void 0,e)}static updateTime(e){return new Hn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rf(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Nf{}function ew(n,e,t){n instanceof Qd?function(r,o,u){const d=r.value.clone(),m=rw(r.fieldTransforms,o,u.transformResults);d.setAll(m),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof as?function(r,o,u){if(!Rf(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=rw(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(nw(r)),m.setAll(d),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Jg(n,e,t){var o;n instanceof Qd?function(r,o,u){if(!Rf(r.precondition,o))return;const d=r.value.clone(),m=sc(r.fieldTransforms,u,o);d.setAll(m),o.convertToFoundDocument(I_(o),d).setHasLocalMutations()}(n,e,t):n instanceof as?function(r,o,u){if(!Rf(r.precondition,o))return;const d=sc(r.fieldTransforms,u,o),m=o.data;m.setAll(nw(r)),m.setAll(d),o.convertToFoundDocument(I_(o),m).setHasLocalMutations()}(n,e,t):Rf(n.precondition,o=e)&&o.convertToNoDocument(_t.min())}function tw(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=WE(r.transform,o||null);null!=u&&(null==t&&(t=qr.empty()),t.set(r.field,u))}return t||null}function w_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Bd(t,r,(o,u)=>function JE(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof rc&&r instanceof rc||t instanceof ic&&r instanceof ic?Bd(t.elements,r.elements,_o):t instanceof Yd&&r instanceof Yd?_o(t.k,r.k):t instanceof Zd&&r instanceof Zd);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function I_(n){return n.isFoundDocument()?n.version:_t.min()}class Qd extends Nf{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class as extends Nf{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}}function nw(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function rw(n,e,t){const r=new Map;wt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,m=e.data.field(u.field);r.set(u.field,ob(d,m,t[o]))}return r}function sc(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,sb(u,d,e))}return r}class Xg extends Nf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Of extends Nf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class FT{constructor(e){this.count=e}}var Gn,jt;function ab(n){switch(n){default:return et();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function gt(n){if(void 0===n)return er("GRPC error has no .code"),le.UNKNOWN;switch(n){case Gn.OK:return le.OK;case Gn.CANCELLED:return le.CANCELLED;case Gn.UNKNOWN:return le.UNKNOWN;case Gn.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case Gn.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case Gn.INTERNAL:return le.INTERNAL;case Gn.UNAVAILABLE:return le.UNAVAILABLE;case Gn.UNAUTHENTICATED:return le.UNAUTHENTICATED;case Gn.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case Gn.NOT_FOUND:return le.NOT_FOUND;case Gn.ALREADY_EXISTS:return le.ALREADY_EXISTS;case Gn.PERMISSION_DENIED:return le.PERMISSION_DENIED;case Gn.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case Gn.ABORTED:return le.ABORTED;case Gn.OUT_OF_RANGE:return le.OUT_OF_RANGE;case Gn.UNIMPLEMENTED:return le.UNIMPLEMENTED;case Gn.DATA_LOSS:return le.DATA_LOSS;default:return et()}}(jt=Gn||(Gn={}))[jt.OK=0]="OK",jt[jt.CANCELLED=1]="CANCELLED",jt[jt.UNKNOWN=2]="UNKNOWN",jt[jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jt[jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jt[jt.NOT_FOUND=5]="NOT_FOUND",jt[jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",jt[jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",jt[jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",jt[jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jt[jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jt[jt.ABORTED=10]="ABORTED",jt[jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",jt[jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",jt[jt.INTERNAL=13]="INTERNAL",jt[jt.UNAVAILABLE=14]="UNAVAILABLE",jt[jt.DATA_LOSS=15]="DATA_LOSS";class ju{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Uu(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return s_(this.inner)}size(){return this.innerSize}}const ub=new Pn(je.comparator);function Us(){return ub}const em=new Pn(je.comparator);function D_(...n){let e=em;for(const t of n)e=e.insert(t.key,t);return e}function $u(){return new ju(n=>n.toString(),(n,e)=>n.isEqual(e))}const tm=new Pn(je.comparator),Fn=new un(je.comparator);function Jt(...n){let e=Fn;for(const t of n)e=e.add(t);return e}const iw=new un(At);function nm(){return iw}class Pf{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Jd.createSynthesizedTargetChangeForCurrentChange(e,t)),new Pf(_t.min(),r,nm(),Us(),Jt())}}class Jd{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Jd(tr.EMPTY_BYTE_STRING,t,Jt(),Jt(),Jt())}}class kf{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class b_{constructor(e,t){this.targetId=e,this.$=t}}class C_{constructor(e,t,r=tr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class sw{constructor(){this.B=0,this.L=Xd(),this.U=tr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Jt(),t=Jt(),r=Jt();return this.L.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:et()}}),new Jd(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=Xd()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class lb{constructor(e){this.nt=e,this.st=new Map,this.it=Us(),this.rt=ow(),this.ot=new un(At)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:et()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const u=o.target;if(ss(u))if(0===r){const d=new je(u.path);this.ct(t,d,hn.newNoDocument(d,_t.min()))}else wt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,d)=>{const m=this.wt(d);if(m){if(u.current&&ss(m.target)){const w=new je(m.target.path);null!==this.it.get(w)||this.It(d,w)||this.ct(d,w,hn.newNoDocument(w,e))}u.j&&(t.set(d,u.H()),u.J())}});let r=Jt();this.rt.forEach((u,d)=>{let m=!0;d.forEachWhile(w=>{const C=this.wt(w);return!C||2===C.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.it.forEach((u,d)=>d.setReadTime(e));const o=new Pf(e,t,this.ot,this.it,r);return this.it=Us(),this.rt=ow(),this.ot=new un(At),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new sw,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new un(At),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Oe("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new sw),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function ow(){return new Pn(je.comparator)}function Xd(){return new Pn(je.comparator)}const cb={asc:"ASCENDING",desc:"DESCENDING"},db={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class hb{constructor(e,t){this.databaseId=e,this.N=t}}function Hu(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function T_(n,e){return n.N?e.toBase64():e.toUint8Array()}function aw(n,e){return Hu(n,e.toTimestamp())}function yr(n){return wt(!!n),_t.fromTimestamp(function(e){const t=Wo(e);return new $n(t.seconds,t.nanos)}(n))}function A_(n,e){return(t=n,new qt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function eh(n){const e=qt.fromString(n);return wt(pw(e)),e}function Va(n,e){return A_(n.databaseId,e.path)}function Yo(n,e){const t=eh(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new je(M_(t))}function S_(n,e){return A_(n.databaseId,e)}function uw(n){const e=eh(n);return 4===e.length?qt.emptyPath():M_(e)}function th(n){return new qt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function M_(n){return wt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function x_(n,e,t){return{name:Va(n,e),fields:t.value.mapValue.fields}}function lw(n,e,t){const r=Yo(n,e.name),o=yr(e.updateTime),u=new qr({mapValue:{fields:e.fields}}),d=hn.newFoundDocument(r,o,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Ff(n,e){let t;if(e instanceof Qd)t={update:x_(n,e.key,e.value)};else if(e instanceof Xg)t={delete:Va(n,e.key)};else if(e instanceof as)t={update:x_(n,e.key,e.data),updateMask:vb(e.fieldMask)};else{if(!(e instanceof Of))return et();t={verify:Va(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof Zd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof rc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof ic)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Yd)return{fieldPath:u.field.canonicalString(),increment:d.k};throw et()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:aw(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:et()),t;var o}function dw(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Hn.updateTime(yr(o.updateTime)):void 0!==o.exists?Hn.exists(o.exists):Hn.none():Hn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let m=null;"setToServerValue"in d?(wt("REQUEST_TIME"===d.setToServerValue),m=new Zd):"appendMissingElements"in d?m=new rc(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new ic(d.removeAllFromArray.values||[]):"increment"in d?m=new Yd(u,d.increment):et();const w=mr.fromServerFormat(d.fieldPath);return new xf(w,m)}(n,o)):[];var o;if(e.update){const o=Yo(n,e.update.name),u=new qr({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new vf((e.updateMask.fieldPaths||[]).map(C=>mr.fromServerFormat(C)));return new as(o,u,d,t,r)}return new Qd(o,u,t,r)}if(e.delete){const o=Yo(n,e.delete);return new Xg(o,t)}if(e.verify){const o=Yo(n,e.verify);return new Of(o,t)}return et()}function pb(n,e){return{documents:[S_(n,e.path)]}}function gb(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=S_(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=S_(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0===w.length)return;const C=w.map(R=>function(N){if("=="===N.op){if(bf(N.value))return{unaryFilter:{field:Qo(N.field),op:"IS_NAN"}};if(d_(N.value))return{unaryFilter:{field:Qo(N.field),op:"IS_NULL"}}}else if("!="===N.op){if(bf(N.value))return{unaryFilter:{field:Qo(N.field),op:"IS_NOT_NAN"}};if(d_(N.value))return{unaryFilter:{field:Qo(N.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qo(N.field),op:fw(N.op),value:N.value}}}(R));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(w){if(0!==w.length)return w.map(C=>{return{field:Qo((R=C).field),direction:mb(R.dir)};var R})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(C=e.limit,n.N||Ql(C)?C:{value:C});var C,m,w;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function R_(n){let e=uw(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){wt(1===r);const R=t.from[0];R.allDescendants?o=R.collectionId:e=e.child(R.collectionId)}let u=[];t.where&&(u=hw(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(R=>{return new zd(nh((N=R).field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let m=null;t.limit&&(m=function(R){let N;return N="object"==typeof R?R.value:R,Ql(N)?null:N}(t.limit));let w=null;var R;t.startAt&&(w=new Vs((R=t.startAt).values||[],!!R.before));let C=null;return t.endAt&&(C=function(R){return new Vs(R.values||[],!R.before)}(t.endAt)),Af(e,o,d,u,m,"F",w,C)}function hw(n){return n?void 0!==n.unaryFilter?[_b(n)]:void 0!==n.fieldFilter?[yb(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>hw(e)).reduce((e,t)=>e.concat(t)):et():[]}function mb(n){return cb[n]}function fw(n){return db[n]}function Qo(n){return{fieldPath:n.canonicalString()}}function nh(n){return mr.fromServerFormat(n.fieldPath)}function yb(n){return sn.create(nh(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return et()}}(n.fieldFilter.op),n.fieldFilter.value)}function _b(n){switch(n.unaryFilter.op){case"IS_NAN":const e=nh(n.unaryFilter.field);return sn.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=nh(n.unaryFilter.field);return sn.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=nh(n.unaryFilter.field);return sn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=nh(n.unaryFilter.field);return sn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return et()}}function vb(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function pw(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ii(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=gw(e)),e=Eb(n.get(t),e);return gw(e)}function Eb(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function gw(n){return n+"\x01\x01"}function _i(n){const e=n.length;if(wt(e>=2),2===e)return wt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),qt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&et(),n.charAt(d+1)){case"\x01":const m=n.substring(u,d);let w;0===o.length?w=m:(o+=m,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:et()}u=d+2}return new qt(r)}const mw=["userId","batchId"];function Lf(n,e){return[n,ii(e)]}function yw(n,e,t){return[n,ii(e),t]}const _w={},wb=["prefixPath","collectionGroup","readTime","documentId"],vw=["prefixPath","collectionGroup","documentId"],Ib=["collectionGroup","readTime","prefixPath","documentId"],N_=["canonicalId","targetId"],Db=["targetId","path"],Ew=["path","targetId"],ww=["collectionId","parent"],bb=["indexId","uid"],Cb=["uid","sequenceNumber"],Tb=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],O_=["indexId","uid","orderedDocumentKey"],Ab=["userId","collectionPath","documentId"],Iw=["userId","collectionPath","largestBatchId"],Sb=["userId","collectionGroup","largestBatchId"],Dw=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Mb=[...Dw,"documentOverlays"],bw=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],xb=[...bw,"indexConfiguration","indexState","indexEntries"],Cw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Tw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&et(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):de.reject(t)}static resolve(e){return new de((t,r)=>{t(e)})}static reject(e){return new de((t,r)=>{r(e)})}static waitFor(e){return new de((t,r)=>{let o=0,u=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++u,d&&u===o&&t()},w=>r(w))}),d=!0,u===o&&t()})}static or(e){let t=de.resolve(!1);for(const r of e)t=t.next(o=>o?de.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}}class Vf{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Nr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Uf(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=Bf(r.target.error);this.At.reject(new Uf(e,o))}}static open(e,t,r,o){try{return new Vf(t,e.transaction(o,r))}catch(u){throw new Uf(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Oe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Nb(t)}}class Bs{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===Bs.Vt((0,Ot.z$)())&&er("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Oe("SimpleDb","Removing database:",e),oc(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Ot.hl)())return!1;if(Bs.St())return!0;const e=(0,Ot.z$)(),t=Bs.Vt(e),r=0<t&&t<10,o=Bs.Dt(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,Ie.Z)(function*(){return t.db||(Oe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new Uf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const m=d.target.error;o("VersionError"===m.name?new xe(le.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new xe(le.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Uf(e,m))},u.onupgradeneeded=d=>{Oe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.Pt.kt(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Oe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,Ie.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.Nt(e);const w=Vf.open(u.db,e,d?"readonly":"readwrite",r),C=o(w).next(R=>(w.bt(),R)).catch(R=>(w.abort(R),de.reject(R))).toPromise();return C.catch(()=>{}),yield w.Rt,C}catch(w){const C="FirebaseError"!==w.name&&m<3;if(Oe("SimpleDb","Transaction failed with error:",w.message,"Retrying:",C),u.close(),!C)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Rb{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return oc(this.Ft.delete())}}class Uf extends xe{constructor(e,t){super(le.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Gu(n){return"IndexedDbTransactionError"===n.name}class Nb{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Oe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Oe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),oc(r)}add(e){return Oe("SimpleDb","ADD",this.store.name,e,e),oc(this.store.add(e))}get(e){return oc(this.store.get(e)).next(t=>(void 0===t&&(t=null),Oe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Oe("SimpleDb","DELETE",this.store.name,e),oc(this.store.delete(e))}count(){return Oe("SimpleDb","COUNT",this.store.name),oc(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.Kt(o,(d,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new de((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new de((o,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Qt(e,t){Oe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Kt(o,(u,d,m)=>m.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Kt(o,t)}zt(e){const t=this.cursor({});return new de((r,o)=>{t.onerror=u=>{const d=Bf(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}Kt(e,t){const r=[];return new de((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void o();const w=new Rb(m),C=t(m.primaryKey,m.value,w);if(C instanceof de){const R=C.catch(N=>(w.done(),de.reject(N)));r.push(R)}w.isDone?o():null===w.Lt?m.continue():m.continue(w.Lt)}}).next(()=>de.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function oc(n){return new de((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=Bf(r.target.error);t(o)}})}let Aw=!1;function Bf(n){const e=Bs.Vt((0,Ot.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Aw||(Aw=!0,setTimeout(()=>{throw r},0)),r}}return n}class im extends Tw{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function _r(n,e){const t=We(n);return Bs.xt(t.Ht,e)}class jf{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&ew(u,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Jg(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Jg(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(_t.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Jt())}isEqual(e){return this.batchId===e.batchId&&Bd(this.mutations,e.mutations,(t,r)=>w_(t,r))&&Bd(this.baseMutations,e.baseMutations,(t,r)=>w_(t,r))}}class P_{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){wt(e.mutations.length===r.length);let o=tm;const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new P_(e,t,r,o)}}class k_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Jo{constructor(e,t,r,o,u=_t.min(),d=_t.min(),m=tr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new Jo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Jo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Jo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Sw{constructor(e){this.Jt=e}}function xw(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:$f(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Va(o=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Hu(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ac(e.version)};else{if(!e.isUnknownDocument())return et();r.unknownDocument={path:t.path.toArray(),version:ac(e.version)}}var o,u;return r}function $f(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ac(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function qu(n){const e=new $n(n.seconds,n.nanoseconds);return _t.fromTimestamp(e)}function Hf(n,e){const t=(e.baseMutations||[]).map(u=>dw(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>dw(n.Jt,u)),o=$n.fromMillis(e.localWriteTimeMs);return new jf(e.batchId,o,t,r)}function Gf(n){const e=qu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?qu(n.lastLimboFreeSnapshotVersion):_t.min();let r;var o;return void 0!==n.query.documents?(wt(1===(o=n.query).documents.length),r=os(Wd(uw(o.documents[0])))):r=os(R_(n.query)),new Jo(r,n.targetId,0,n.lastListenSequenceNumber,e,t,tr.fromBase64String(n.resumeToken))}function qf(n,e){const t=ac(e.snapshotVersion),r=ac(e.lastLimboFreeSnapshotVersion);let o;o=ss(e.target)?pb(n.Jt,e.target):gb(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:qd(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function F_(n){const e=R_({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?__(e,e.limit,"L"):e}function zu(n,e){return new k_(e.largestBatchId,dw(n.Jt,e.overlayMutation))}function rh(n,e){const t=e.path.lastSegment();return[n,ii(e.path.popLast()),t]}class Ob{getBundleMetadata(e,t){return Pb(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:qu(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return Pb(e).put({bundleId:(r=t).id,createTime:ac(yr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return L_(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:F_(o.bundledQuery),readTime:qu(o.readTime)};var o})}saveNamedQuery(e,t){return L_(e).put({name:(r=t).name,readTime:ac(yr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Pb(n){return _r(n,"bundles")}function L_(n){return _r(n,"namedQueries")}class V_{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new V_(e,t.uid||"")}getOverlay(e,t){return zf(e).get(rh(this.userId,t)).next(r=>r?zu(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((u,d)=>{const m=new k_(t,d);o.push(this.Xt(e,m))}),de.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(ii(d.getCollectionPath())));const u=[];return o.forEach(d=>{const m=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(zf(e).Qt("collectionPathOverlayIndex",m))}),de.waitFor(u)}getOverlaysForCollection(e,t,r){const o=$u(),u=ii(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return zf(e).qt("collectionPathOverlayIndex",d).next(m=>{for(const w of m){const C=zu(this.M,w);o.set(C.getKey(),C)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=$u();let d;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return zf(e).Wt({index:"collectionGroupOverlayIndex",range:m},(w,C,R)=>{const N=zu(this.M,C);u.size()<o||N.largestBatchId===d?(u.set(N.getKey(),N),d=N.largestBatchId):R.done()}).next(()=>u)}Xt(e,t){return zf(e).put(function(r,o,u){const[d,m,w]=rh(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Ff(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function zf(n){return _r(n,"documentOverlays")}class uc{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Nn(e.integerValue));else if("doubleValue"in e){const r=Nn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),$d(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Ko(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?h_(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):et()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),je.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function kb(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function U_(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=kb(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}uc.fe=new uc;class Rw{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=U_(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=U_(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class B_{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class sm{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Ua{constructor(){this.De=new Rw,this.Ce=new B_(this.De),this.xe=new sm(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class lc{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new lc(this.indexId,this.documentKey,this.arrayValue,r)}}function Wu(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=j_(n.arrayValue,e.arrayValue),0!==t?t:(t=j_(n.directionalValue,e.directionalValue),0!==t?t:je.comparator(n.documentKey,e.documentKey)))}function j_(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Fb{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=zg(e);if(void 0!==t&&!this.Be(t))return!1;const r=Xl(e);let o=0,u=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const d=r[o];if(!this.Le(this.Fe,d)||!this.Ue(this.Me[u++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(u>=this.Me.length||!this.Ue(this.Me[u++],d))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Lb{constructor(){this.qe=new Wf}addToCollectionParentIndex(e,t){return this.qe.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getIndexType(e,t){return de.resolve(0)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,t){return de.resolve(Ls.min())}updateCollectionGroup(e,t,r){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class Wf{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new un(qt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new un(qt.comparator)).toArray()}}const om=new Uint8Array(0);class VT{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new Wf,this.Ge=new ju(r=>qd(r),(r,o)=>tc(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:ii(o)};return Nw(e).put(u)}return de.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[SE(t),""],!1,!0);return Nw(e).qt(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(_i(d.parent))}return r})}addFieldIndex(e,t){const r=Ba(e),o={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var u;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=Ba(e),o=Zf(e),u=Kf(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Kf(e);let o=!0;const u=new Map;return de.forEach(this.Qe(t),d=>this.je(e,d).next(m=>{o&&(o=!!m),u.set(d,m)})).next(()=>{if(o){let d=Jt();const m=[];return de.forEach(u,(w,C)=>{var R;Oe("IndexedDbIndexManager",`Using index ${R=w,`id=${R.indexId}|cg=${R.collectionGroup}|f=${R.fields.map($t=>`${$t.fieldPath}:${$t.kind}`).join(",")}`} to execute ${qd(t)}`);const N=function($t,St){const Ut=zg(St);if(void 0===Ut)return null;for(const Xt of Wg($t,Ut.fieldPath))switch(Xt.op){case"array-contains-any":return Xt.value.arrayValue.values||[];case"array-contains":return[Xt.value]}return null}(C,w),z=function($t,St){const Ut=new Map;for(const Xt of Xl(St))for(const ji of Wg($t,Xt.fieldPath))switch(ji.op){case"==":case"in":Ut.set(Xt.fieldPath.canonicalString(),ji.value);break;case"not-in":case"!=":return Ut.set(Xt.fieldPath.canonicalString(),ji.value),Array.from(Ut.values())}return null}(C,w),ee=function($t,St){const Ut=[];let Xt=!0;for(const ji of Xl(St)){const c0=0===ji.kind?FE($t,ji.fieldPath,$t.startAt):vo($t,ji.fieldPath,$t.startAt);Ut.push(c0.value),Xt&&(Xt=c0.inclusive)}return new Vs(Ut,Xt)}(C,w),ge=function($t,St){const Ut=[];let Xt=!0;for(const ji of Xl(St)){const c0=0===ji.kind?vo($t,ji.fieldPath,$t.endAt):FE($t,ji.fieldPath,$t.endAt);Ut.push(c0.value),Xt&&(Xt=c0.inclusive)}return new Vs(Ut,Xt)}(C,w),Le=this.We(w,C,ee),nt=this.We(w,C,ge),Lt=this.ze(w,C,z),Vt=this.He(w.indexId,N,Le,ee.inclusive,nt,ge.inclusive,Lt);return de.forEach(Vt,$t=>r.Gt($t,t.limit).next(St=>{St.forEach(Ut=>{const Xt=je.fromSegments(Ut.documentKey);d.has(Xt)||(d=d.add(Xt),m.push(Xt))})}))}).next(()=>m)}return de.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,o,u,d,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),C=w/(null!=t?t.length:1),R=[];for(let N=0;N<w;++N){const z=t?this.Je(t[N/C]):om,ee=this.Ye(e,z,r[N%C],o),ge=this.Xe(e,z,u[N%C],d),Le=m.map(nt=>this.Ye(e,z,nt,!0));R.push(...this.createRange(ee,ge,Le))}return R}Ye(e,t,r,o){const u=new lc(e,je.empty(),t,r);return o?u:u.ke()}Xe(e,t,r,o){const u=new lc(e,je.empty(),t,r);return o?u.ke():u}je(e,t){const r=new Fb(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let d=null;for(const m of u)r.$e(m)&&(!d||m.fields.length>d.fields.length)&&(d=m);return d})}getIndexType(e,t){let r=2;return de.forEach(this.Qe(t),o=>this.je(e,o).next(u=>{u?0!==r&&u.fields.length<function(d){let m=new un(mr.comparator),w=!1;for(const C of d.filters){const R=C;R.field.isKeyField()||("array-contains"===R.op||"array-contains-any"===R.op?w=!0:m=m.add(R.field))}for(const C of d.orderBy)C.field.isKeyField()||(m=m.add(C.field));return m.size+(w?1:0)}(o)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new Ua;for(const o of Xl(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const d=r.Ne(o.kind);uc.fe.Zt(u,d)}return r.Se()}Je(e){const t=new Ua;return uc.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new Ua;return uc.fe.Zt(Jl(this.databaseId,t),r.Ne(function(o){const u=Xl(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let o=[];o.push(new Ua);let u=0;for(const d of Xl(e)){const m=r[u++];for(const w of o)if(this.en(t,d.fieldPath)&&Df(m))o=this.nn(o,d,m);else{const C=w.Ne(d.kind);uc.fe.Zt(m,C)}}return this.sn(o)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const o=[...e],u=[];for(const d of r.arrayValue.values||[])for(const m of o){const w=new Ua;w.seed(m.Se()),uc.fe.Zt(d,w.Ne(t.kind)),u.push(w)}return u}en(e,t){return!!e.filters.find(r=>r instanceof sn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Ba(e),o=Zf(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const d=[];return de.forEach(u,m=>o.get([m.indexId,this.uid]).next(w=>{d.push(function(C,R){const N=R?new Gd(R.sequenceNumber,new Ls(qu(R.readTime),new je(_i(R.documentKey)),R.largestBatchId)):Gd.empty(),z=C.fields.map(([ee,ge])=>new On(mr.fromServerFormat(ee),ge));return new qg(C.indexId,C.collectionGroup,z,N)}(m,w))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:At(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=Ba(e),u=Zf(e);return this.rn(e).next(d=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>de.forEach(m,w=>{return u.put({indexId:w.indexId,uid:this.user.uid||"",sequenceNumber:d,readTime:ac((z=r).readTime),documentKey:ii(z.documentKey.path),largestBatchId:z.largestBatchId});var z})))}updateIndexEntries(e,t){const r=new Map;return de.forEach(t,(o,u)=>{const d=r.get(o.collectionGroup);return(d?de.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),de.forEach(m,w=>this.on(e,o,w).next(C=>{const R=this.un(u,w);return C.isEqual(R)?de.resolve():this.an(e,u,w,C,R)}))))})}cn(e,t,r,o){return Kf(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,o){return Kf(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const o=Kf(e);let u=new un(Wu);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(d,m)=>{u=u.add(new lc(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}un(e,t){let r=new un(Wu);const o=this.Ze(t,e);if(null==o)return r;const u=zg(t);if(null!=u){const d=e.data.field(u.fieldPath);if(Df(d))for(const m of d.arrayValue.values||[])r=r.add(new lc(t.indexId,e.key,this.Je(m),o))}else r=r.add(new lc(t.indexId,e.key,om,o));return r}an(e,t,r,o,u){Oe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(m,w,C,R,N){const z=m.getIterator(),ee=w.getIterator();let ge=ec(z),Le=ec(ee);for(;ge||Le;){let nt=!1,Lt=!1;if(ge&&Le){const Vt=C(ge,Le);Vt<0?Lt=!0:Vt>0&&(nt=!0)}else null!=ge?Lt=!0:nt=!0;nt?(R(Le),Le=ec(ee)):Lt?(N(ge),ge=ec(z)):(ge=ec(z),Le=ec(ee))}}(o,u,Wu,m=>{d.push(this.cn(e,t,r,m))},m=>{d.push(this.hn(e,t,r,m))}),de.waitFor(d)}rn(e){let t=1;return Zf(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,m)=>Wu(d,m)).filter((d,m,w)=>!m||0!==Wu(d,w[m-1]));const o=[];o.push(e);for(const d of r){const m=Wu(d,e),w=Wu(d,t);if(0===m)o[0]=e.ke();else if(m>0&&w<0)o.push(d),o.push(d.ke());else if(w>0)break}o.push(t);const u=[];for(let d=0;d<o.length;d+=2)u.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,om,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,om,[]]));return u}getMinOffset(e,t){let r;return de.forEach(this.Qe(t),o=>this.je(e,o).next(u=>{u?(!r||OE(u.indexState.offset,r)<0)&&(r=u.indexState.offset):r=Ls.min()})).next(()=>r)}}function Nw(n){return _r(n,"collectionParents")}function Kf(n){return _r(n,"indexEntries")}function Ba(n){return _r(n,"indexConfiguration")}function Zf(n){return _r(n,"indexState")}const cc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class us{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new us(e,us.DEFAULT_COLLECTION_PERCENTILE,us.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function $_(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let m=0;const w=r.Wt({range:d},(R,N,z)=>(m++,z.delete()));u.push(w.next(()=>{wt(1===m)}));const C=[];for(const R of t.mutations){const N=yw(e,R.key.path,t.batchId);u.push(o.delete(N)),C.push(R.key)}return de.waitFor(u).next(()=>C)}function am(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw et();e=n.noDocument}return JSON.stringify(e).length}us.DEFAULT_COLLECTION_PERCENTILE=10,us.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,us.DEFAULT=new us(41943040,us.DEFAULT_COLLECTION_PERCENTILE,us.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),us.DISABLED=new us(-1,0,0);class Ow{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.ln={}}static Yt(e,t,r,o){wt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Ow(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return dc(e).Wt({index:"userMutationsIndex",range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=hc(e),d=dc(e);return d.add({}).next(m=>{wt("number"==typeof m);const w=new jf(m,t,r,o),C=function(z,ee,ge){const Le=ge.baseMutations.map(Lt=>Ff(z.Jt,Lt)),nt=ge.mutations.map(Lt=>Ff(z.Jt,Lt));return{userId:ee,batchId:ge.batchId,localWriteTimeMs:ge.localWriteTime.toMillis(),baseMutations:Le,mutations:nt}}(this.M,this.userId,w),R=[];let N=new un((z,ee)=>At(z.canonicalString(),ee.canonicalString()));for(const z of o){const ee=yw(this.userId,z.key.path,m);N=N.add(z.key.path.popLast()),R.push(d.put(C)),R.push(u.put(ee,_w))}return N.forEach(z=>{R.push(this.indexManager.addToCollectionParentIndex(e,z))}),e.addOnCommittedListener(()=>{this.ln[m]=w.keys()}),de.waitFor(R).next(()=>w)})}lookupMutationBatch(e,t){return dc(e).get(t).next(r=>r?(wt(r.userId===this.userId),Hf(this.M,r)):null)}fn(e,t){return this.ln[t]?de.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.ln[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return dc(e).Wt({index:"userMutationsIndex",range:o},(d,m,w)=>{m.userId===this.userId&&(wt(m.batchId>=r),u=Hf(this.M,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return dc(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return dc(e).qt("userMutationsIndex",t).next(r=>r.map(o=>Hf(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Lf(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return hc(e).Wt({range:o},(d,m,w)=>{const[C,R,N]=d,z=_i(R);if(C===this.userId&&t.path.isEqual(z))return dc(e).get(N).next(ee=>{if(!ee)throw et();wt(ee.userId===this.userId),u.push(Hf(this.M,ee))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new un(At);const o=[];return t.forEach(u=>{const d=Lf(this.userId,u.path),m=IDBKeyRange.lowerBound(d),w=hc(e).Wt({range:m},(C,R,N)=>{const[z,ee,ge]=C,Le=_i(ee);z===this.userId&&u.path.isEqual(Le)?r=r.add(ge):N.done()});o.push(w)}),de.waitFor(o).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=Lf(this.userId,r),d=IDBKeyRange.lowerBound(u);let m=new un(At);return hc(e).Wt({range:d},(w,C,R)=>{const[N,z,ee]=w,ge=_i(z);N===this.userId&&r.isPrefixOf(ge)?ge.length===o&&(m=m.add(ee)):R.done()}).next(()=>this.dn(e,m))}dn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(dc(e).get(u).next(d=>{if(null===d)throw et();wt(d.userId===this.userId),r.push(Hf(this.M,d))}))}),de.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return $_(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),de.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return de.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return hc(e).Wt({range:r},(u,d,m)=>{if(u[0]===this.userId){const w=_i(u[1]);o.push(w)}else m.done()}).next(()=>{wt(0===o.length)})})}containsKey(e,t){return H_(e,this.userId,t)}wn(e){return um(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function H_(n,e,t){const r=Lf(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return hc(n).Wt({range:u,jt:!0},(m,w,C)=>{const[R,N,z]=m;R===e&&N===o&&(d=!0),C.done()}).next(()=>d)}function dc(n){return _r(n,"mutations")}function hc(n){return _r(n,"documentMutations")}function um(n){return _r(n,"mutationQueues")}class fc{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new fc(0)}static yn(){return new fc(-1)}}class Vb{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new fc(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>_t.fromTimestamp(new $n(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.In(e,o)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ih(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(wt(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return ih(e).Wt((d,m)=>{const w=Gf(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,u.push(this.removeTargetData(e,w)))}).next(()=>de.waitFor(u)).next(()=>o)}forEachTarget(e,t){return ih(e).Wt((r,o)=>{const u=Gf(o);t(u)})}pn(e){return Pw(e).get("targetGlobalKey").next(t=>(wt(null!==t),t))}In(e,t){return Pw(e).put("targetGlobalKey",t)}Tn(e,t){return ih(e).put(qf(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=qd(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return ih(e).Wt({range:o,index:"queryTargetsIndex"},(d,m,w)=>{const C=Gf(m);tc(t,C.target)&&(u=C,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=Ku(e);return t.forEach(d=>{const m=ii(d.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,d))}),de.waitFor(o)}removeMatchingKeys(e,t,r){const o=Ku(e);return de.forEach(t,u=>{const d=ii(u.path);return de.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Ku(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Ku(e);let u=Jt();return o.Wt({range:r,jt:!0},(d,m,w)=>{const C=_i(d[1]),R=new je(C);u=u.add(R)}).next(()=>u)}containsKey(e,t){const r=ii(t.path),o=IDBKeyRange.bound([r],[SE(r)],!1,!0);let u=0;return Ku(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([d,m],w,C)=>{0!==d&&(u++,C.done())}).next(()=>u>0)}Et(e,t){return ih(e).get(t).next(r=>r?Gf(r):null)}}function ih(n){return _r(n,"targets")}function Pw(n){return _r(n,"targetGlobal")}function Ku(n){return _r(n,"targetDocuments")}function pc(n){return G_.apply(this,arguments)}function G_(){return G_=(0,Ie.Z)(function*(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==Cw)throw n;Oe("LocalStore","Unexpectedly lost primary lease")}),G_.apply(this,arguments)}function kw([n,e],[t,r]){const o=At(n,t);return 0===o?At(e,r):o}class Ub{constructor(e){this.An=e,this.buffer=new un(kw),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();kw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Bb{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Oe("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,Ie.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){Gu(o)?Oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield pc(o)}yield t.Sn(e)}))}}class Yf{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return de.resolve(is.A);const r=new Ub(t);return this.Dn.forEachTarget(e,o=>r.Pn(o.sequenceNumber)).next(()=>this.Dn.xn(e,o=>r.Pn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(cc)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cc):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,o,u,d,m,w,C;const R=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,d=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,m=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(C=Date.now(),t_()<=Aa.in.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-R}ms\n\tDetermined least recently used ${o} in `+(m-d)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${N} documents in `+(C-w)+`ms\nTotal Duration: ${C-R}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:N})))}}class Fw{constructor(e,t){this.db=e,this.garbageCollector=new Yf(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,o)=>t(o))}addReference(e,t,r){return Qf(e,r)}removeReference(e,t,r){return Qf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Qf(e,t)}On(e,t){return function(r,o){let u=!1;return um(r).zt(d=>H_(r,d,o).next(m=>(m&&(u=!0),de.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Mn(e,(d,m)=>{if(m<=t){const w=this.On(e,d).next(C=>{if(!C)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,_t.min()),Ku(e).delete([0,ii(d.path)])))});o.push(w)}}).next(()=>de.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Qf(e,t)}Mn(e,t){const r=Ku(e);let o,u=is.A;return r.Wt({index:"documentTargetsIndex"},([d,m],{path:w,sequenceNumber:C})=>{0===d?(u!==is.A&&t(new je(_i(o)),u),u=C,o=w):u=is.A}).next(()=>{u!==is.A&&t(new je(_i(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Qf(n,e){return Ku(n).put((r=n.currentSequenceNumber,{targetId:0,path:ii(e.path),sequenceNumber:r}));var r}class q_{constructor(){this.changes=new ju(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,hn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?de.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Lw{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return gc(e).put(r)}removeEntry(e,t,r){return gc(e).delete(function(o,u){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],$f(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=hn.newInvalidDocument(t);return gc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Jf(t))},(o,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:hn.newInvalidDocument(t)};return gc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Jf(t))},(o,u)=>{r={document:this.$n(t,u),size:am(u)}}).next(()=>r)}getEntries(e,t){let r=Us();return this.Ln(e,t,(o,u)=>{const d=this.$n(o,u);r=r.insert(o,d)}).next(()=>r)}Un(e,t){let r=Us(),o=new Pn(je.comparator);return this.Ln(e,t,(u,d)=>{const m=this.$n(u,d);r=r.insert(u,m),o=o.insert(u,am(d))}).next(()=>({documents:r,qn:o}))}Ln(e,t,r){if(t.isEmpty())return de.resolve();let o=new un(jw);t.forEach(w=>o=o.add(w));const u=IDBKeyRange.bound(Jf(o.first()),Jf(o.last())),d=o.getIterator();let m=d.getNext();return gc(e).Wt({index:"documentKeyIndex",range:u},(w,C,R)=>{const N=je.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;m&&jw(m,N)<0;)r(m,null),m=d.getNext();m&&m.isEqual(N)&&(r(m,C),m=d.hasNext()?d.getNext():null),m?R.Ut(Jf(m)):R.done()}).next(()=>{for(;m;)r(m,null),m=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),$f(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return gc(e).qt(IDBKeyRange.bound(o,u,!0)).next(d=>{let m=Us();for(const w of d){const C=this.$n(je.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);m=m.insert(C.key,C)}return m})}getAllFromCollectionGroup(e,t,r,o){let u=Us();const d=Bw(t,r),m=Bw(t,Ls.max());return gc(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,m,!0)},(w,C,R)=>{const N=this.$n(je.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);u=u.insert(N.key,N),u.size===o&&R.done()}).next(()=>u)}newChangeBuffer(e){return new Vw(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Uw(e).get("remoteDocumentGlobalKey").next(t=>(wt(!!t),t))}Fn(e,t){return Uw(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function Mw(n,e){let t;if(e.document)t=lw(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=je.fromSegments(e.noDocument.path),o=qu(e.noDocument.readTime);t=hn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return et();{const r=je.fromSegments(e.unknownDocument.path),o=qu(e.unknownDocument.version);t=hn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new $n(r[0],r[1]);return _t.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(_t.min()))return r}return hn.newInvalidDocument(e)}}class Vw extends q_{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new ju(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new un((u,d)=>At(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const m=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,m.readTime)),d.isValidDocument()){const w=xw(this.Kn.M,d);o=o.add(u.path.popLast()),r+=am(w)-m.size,t.push(this.Kn.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=xw(this.Kn.M,d.convertToNoDocument(_t.min()));t.push(this.Kn.addEntry(e,u,w))}}),o.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),de.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:o})=>(o.forEach((u,d)=>{this.Gn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function Uw(n){return _r(n,"remoteDocumentGlobal")}function gc(n){return _r(n,"remoteDocumentsV14")}function Jf(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Bw(n,e){const t=e.documentKey.path.toArray();return[n,$f(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function jw(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=At(t[u],r[u]),o)return o;return o=At(t.length,r.length),o||(o=At(t[t.length-2],r[r.length-2]),o||At(t[t.length-1],r[r.length-1]))}class jb{constructor(e){this.M=e}kt(e,t,r,o){const u=new Vf("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",mw,{unique:!0}),m.createObjectStore("documentMutations"),$w(e),function(m){m.createObjectStore("remoteDocuments")}(e));let d=de.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),$w(e)),d=d.next(()=>function(m){const w=m.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:_t.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",C)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(m,w){return w.store("mutations").qt().next(C=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",mw,{unique:!0});const R=w.store("mutations"),N=C.map(z=>R.put(z));return de.waitFor(N)})}(e,u))),d=d.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.Qn(u))),r<6&&o>=6&&(d=d.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&o>=7&&(d=d.next(()=>this.Wn(u))),r<8&&o>=8&&(d=d.next(()=>this.zn(e,u))),r<9&&o>=9&&(d=d.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.Hn(u))),r<11&&o>=11&&(d=d.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:Ab});w.createIndex("collectionPathOverlayIndex",Iw,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",Sb,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:wb});w.createIndex("documentKeyIndex",vw),w.createIndex("collectionGroupIndex",Ib)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>{!function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:bb}).createIndex("sequenceNumberIndex",Cb,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:Tb}).createIndex("documentKeyIndex",O_,{unique:!1})}(e)})),d}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=am(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>de.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",d).next(m=>de.forEach(m,w=>{wt(w.userId===u.userId);const C=Hf(this.M,w);return $_(e,u.userId,C).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Wt((d,m)=>{const w=new qt(d),C=[0,ii(w)];u.push(t.get(C).next(R=>R?de.resolve():t.put({targetId:0,path:ii(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>de.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:ww});const r=t.store("collectionParents"),o=new Wf,u=d=>{if(o.add(d)){const m=d.lastSegment(),w=d.popLast();return r.put({collectionId:m,parent:ii(w)})}};return t.store("remoteDocuments").Wt({jt:!0},(d,m)=>{const w=new qt(d);return u(w.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([d,m,w],C)=>{const R=_i(m);return u(R.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,o)=>{const u=Gf(o),d=qf(this.M,u);return t.put(d)})}Jn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((u,d)=>{const m=t.store("remoteDocumentsV14"),w=(C=d,C.document?new je(qt.fromString(C.document.name).popFirst(5)):C.noDocument?je.fromSegments(C.noDocument.path):C.unknownDocument?je.fromSegments(C.unknownDocument.path):et()).path.toArray();var C;const R={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(m.put(R))}).next(()=>de.waitFor(o))}}function $w(n){n.createObjectStore("targetDocuments",{keyPath:Db}).createIndex("documentTargetsIndex",Ew,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",N_,{unique:!0}),n.createObjectStore("targetGlobal")}const mc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class z_{constructor(e,t,r,o,u,d,m,w,C,R,N=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=d,this.document=m,this.Xn=C,this.Zn=R,this.ts=N,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=z=>Promise.resolve(),!z_.vt())throw new xe(le.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Fw(this,o),this.hs=t+"main",this.M=new Sw(w),this.ls=new Bs(this.hs,this.ts,new jb(this.M)),this.fs=new Vb(this.referenceDelegate,this.M),this.ds=new Lw(this.M),this._s=new Ob,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===R&&er("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(le.FAILED_PRECONDITION,mc);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new is(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,Ie.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,Ie.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,Ie.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ls(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(Gu(e))return Oe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return yc(e).get("owner").next(t=>de.resolve(this.Ps(t)))}Vs(e){return ls(e).delete(this.clientId)}vs(){var e=this;return(0,Ie.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=_r(r,"clientMetadata");return o.qt().next(u=>{const d=e.Ds(u,18e5),m=u.filter(w=>-1===d.indexOf(w));return de.forEach(m,w=>o.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?de.resolve(!0):yc(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new xe(le.FAILED_PRECONDITION,mc);return!1}}return!(!this.networkEnabled||!this.inForeground)||ls(e).qt().next(r=>void 0===this.Ds(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Oe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ie.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new im(t,is.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>ls(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return Ow.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new VT(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return V_.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Oe("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=14===(d=this.ts)?xb:13===d?bw:12===d?Mb:11===d?Dw:void et();var d;let m;return this.ls.runTransaction(e,o,u,w=>(m=new im(w,this.es?this.es.next():is.A),"readwrite-primary"===t?this.Es(m).next(C=>!!C||this.As(m)).next(C=>{if(!C)throw er(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new xe(le.FAILED_PRECONDITION,Cw);return r(m)}).next(C=>this.bs(m).next(()=>C)):this.$s(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}$s(e){return yc(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(le.FAILED_PRECONDITION,mc)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return yc(e).put("owner",t)}static vt(){return Bs.vt()}Rs(e){const t=yc(e);return t.get("owner").next(r=>this.Ps(r)?(Oe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):de.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(er(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,Ot.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Oe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return er("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){er("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function yc(n){return _r(n,"owner")}function ls(n){return _r(n,"clientMetadata")}function W_(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class K_{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(o=>{for(const u of r)u.applyToLocalView(o);return o})}qs(e,t){e.forEach((r,o)=>{for(const u of t)u.applyToLocalView(o)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return je.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.js(e,t.path):Mf(t)?this.Ws(e,t,r):this.zs(e,t,r);var o}js(e,t){return this.Ls(e,new je(t)).next(r=>{let o=D_();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Ws(e,t,r){const o=t.collectionGroup;let u=D_();return this.indexManager.getCollectionParents(e,o).next(d=>de.forEach(d,m=>{const w=(C=t,R=m.child(o),new Zo(R,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,R;return this.zs(e,w,r).next(C=>{C.forEach((R,N)=>{u=u.insert(R,N)})})}).next(()=>u))}zs(e,t,r){let o;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const d of u)for(const m of d.mutations){const w=m.key;let C=o.get(w);null==C&&(C=hn.newInvalidDocument(w),o=o.insert(w,C)),Jg(m,C,d.localWriteTime),C.isFoundDocument()||(o=o.remove(w))}}).next(()=>(o.forEach((u,d)=>{Yg(t,d)||(o=o.remove(u))}),o))}}class _c{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=o}static Ys(e,t){let r=Jt(),o=Jt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new _c(e,t.fromCache,r,o)}}class Hw{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,o){return this.ti(e,t).next(u=>u||this.ei(e,t,o,r)).next(u=>u||this.ni(e,t))}ti(e,t){return de.resolve(null)}ei(e,t,r,o){return function $E(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||o.isEqual(_t.min())?this.ni(e,t):this.Zs.Ks(e,r).next(u=>{const d=this.si(t,u);return this.ii(t,d,r,o)?this.ni(e,t):(t_()<=Aa.in.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Zg(t)),this.ri(e,d,t,NE(o,-1)))})}si(e,t){let r=new un(HE(e));return t.forEach((o,u)=>{Yg(e,u)&&(r=r.add(u))}),r}ii(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ni(e,t){return t_()<=Aa.in.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",Zg(t)),this.Zs.Qs(e,t,Ls.min())}ri(e,t,r,o){return this.Zs.Qs(e,r,o).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class $b{constructor(e,t,r,o){this.persistence=e,this.oi=t,this.M=o,this.ui=new Pn(At),this.ai=new ju(u=>qd(u),tc),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new K_(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function Gw(n,e,t,r){return new $b(n,e,t,r)}function Xf(n,e){return sh.apply(this,arguments)}function sh(){return sh=(0,Ie.Z)(function*(n,e){const t=We(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.Bs.getAllMutationBatches(r).next(u=>(o=u,t.li(e),t.Bs.getAllMutationBatches(r))).next(u=>{const d=[],m=[];let w=Jt();for(const C of o){d.push(C.batchId);for(const R of C.mutations)w=w.add(R.key)}for(const C of u){m.push(C.batchId);for(const R of C.mutations)w=w.add(R.key)}return t.fi.Ks(r,w).next(C=>({di:C,removedBatchIds:d,addedBatchIds:m}))})})}),sh.apply(this,arguments)}function Hb(n,e){const t=We(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.hi.newChangeBuffer({trackRemovals:!0});return function(d,m,w,C){const R=w.batch,N=R.keys();let z=de.resolve();return N.forEach(ee=>{z=z.next(()=>C.getEntry(m,ee)).next(ge=>{const Le=w.docVersions.get(ee);wt(null!==Le),ge.version.compareTo(Le)<0&&(R.applyToRemoteDocument(ge,w),ge.isValidDocument()&&(ge.setReadTime(w.commitVersion),C.addEntry(ge)))})}),z.next(()=>d.Bs.removeMutationBatch(m,R))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,o))})}function qw(n){const e=We(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function zw(n,e){const t=We(n),r=e.snapshotVersion;let o=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.hi.newChangeBuffer({trackRemovals:!0});o=t.ui;const m=[];e.targetChanges.forEach((C,R)=>{const N=o.get(R);if(!N)return;m.push(t.fs.removeMatchingKeys(u,C.removedDocuments,R).next(()=>t.fs.addMatchingKeys(u,C.addedDocuments,R)));let z=N.withSequenceNumber(u.currentSequenceNumber);var ee,ge,Le;e.targetMismatches.has(R)?z=z.withResumeToken(tr.EMPTY_BYTE_STRING,_t.min()).withLastLimboFreeSnapshotVersion(_t.min()):C.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(C.resumeToken,r)),o=o.insert(R,z),ge=z,Le=C,(0===(ee=N).resumeToken.approximateByteSize()||ge.snapshotVersion.toMicroseconds()-ee.snapshotVersion.toMicroseconds()>=3e8||Le.addedDocuments.size+Le.modifiedDocuments.size+Le.removedDocuments.size>0)&&m.push(t.fs.updateTargetData(u,z))});let w=Us();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,C))}),m.push(Z_(u,d,e.documentUpdates).next(C=>{w=C})),!r.isEqual(_t.min())){const C=t.fs.getLastRemoteSnapshotVersion(u).next(R=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(C)}return de.waitFor(m).next(()=>d.apply(u)).next(()=>t.fi.Gs(u,w)).next(()=>w)}).then(u=>(t.ui=o,u))}function Z_(n,e,t){let r=Jt();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=Us();return t.forEach((d,m)=>{const w=o.get(d);m.isNoDocument()&&m.version.isEqual(_t.min())?(e.removeEntry(d,m.readTime),u=u.insert(d,m)):!w.isValidDocument()||m.version.compareTo(w.version)>0||0===m.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(m),u=u.insert(d,m)):Oe("LocalStore","Ignoring outdated watch update for ",d,". Current version:",w.version," Watch version:",m.version)}),u})}function Y_(n,e){const t=We(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function vc(n,e){const t=We(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.fs.getTargetData(r,e).next(u=>u?(o=u,de.resolve(o)):t.fs.allocateTargetId(r).next(d=>(o=new Jo(e,d,0,r.currentSequenceNumber),t.fs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.ui.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function oh(n,e,t){return Q_.apply(this,arguments)}function Q_(){return Q_=(0,Ie.Z)(function*(n,e,t){const r=We(n),o=r.ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Gu(d))throw d;Oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.ui=r.ui.remove(e),r.ai.delete(o.target)}),Q_.apply(this,arguments)}function J_(n,e,t){const r=We(n);let o=_t.min(),u=Jt();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,w,C){const R=We(m),N=R.ai.get(C);return void 0!==N?de.resolve(R.ui.get(N)):R.fs.getTargetData(w,C)}(r,d,os(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(d,m.targetId).next(w=>{u=w})}).next(()=>r.oi.Qs(d,e,t?o:_t.min(),t?u:Jt())).next(m=>(X_(r,E_(e),m),{documents:m,_i:u})))}function lm(n,e){const t=We(n),r=We(t.fs),o=t.ui.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(d=>d?d.target:null))}function cm(n,e){const t=We(n),r=t.ci.get(e)||_t.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.hi.getAllFromCollectionGroup(o,e,NE(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(X_(t,e,o),o))}function X_(n,e,t){let r=_t.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ci.set(e,r)}function ep(){return ep=(0,Ie.Z)(function*(n,e,t,r){const o=We(n);let u=Jt(),d=Us();for(const C of t){const R=e.wi(C.metadata.name);C.document&&(u=u.add(R));const N=e.mi(C);N.setReadTime(e.gi(C.metadata.readTime)),d=d.insert(R,N)}const m=o.hi.newChangeBuffer({trackRemovals:!0}),w=yield vc(o,(C=r,os(Wd(qt.fromString(`__bundle__/docs/${C}`)))));var C;return o.persistence.runTransaction("Apply bundle documents","readwrite",C=>Z_(C,m,d).next(R=>(m.apply(C),R)).next(R=>o.fs.removeMatchingKeysForTargetId(C,w.targetId).next(()=>o.fs.addMatchingKeys(C,u,w.targetId)).next(()=>o.fi.Gs(C,R)).next(()=>R)))}),ep.apply(this,arguments)}function Gb(n,e){return tv.apply(this,arguments)}function tv(){return tv=(0,Ie.Z)(function*(n,e,t=Jt()){const r=yield vc(n,os(F_(e.bundledQuery))),o=We(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=yr(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o._s.saveNamedQuery(u,e);const m=r.withResumeToken(tr.EMPTY_BYTE_STRING,d);return o.ui=o.ui.insert(m.targetId,m),o.fs.updateTargetData(u,m).next(()=>o.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.fs.addMatchingKeys(u,t,r.targetId)).next(()=>o._s.saveNamedQuery(u,e))})}),tv.apply(this,arguments)}class qb{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return de.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:yr(r.createTime)}),de.resolve()}getNamedQuery(e,t){return de.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:F_(r.bundledQuery),readTime:yr(r.readTime)}),de.resolve();var r}}class zb{constructor(){this.overlays=new Pn(je.comparator),this.Ii=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.Xt(e,t,u)}),de.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Ii.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Ii.delete(r)),de.resolve()}getOverlaysForCollection(e,t,r){const o=$u(),u=t.length+1,d=new je(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const w=m.getNext().value,C=w.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===u&&w.largestBatchId>r&&o.set(w.getKey(),w)}return de.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Pn((C,R)=>C-R);const d=this.overlays.getIterator();for(;d.hasNext();){const C=d.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let R=u.get(C.largestBatchId);null===R&&(R=$u(),u=u.insert(C.largestBatchId,R)),R.set(C.getKey(),C)}}const m=$u(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((C,R)=>m.set(C,R)),!(m.size()>=o)););return de.resolve(m)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const d=this.Ii.get(o.largestBatchId).delete(r.key);this.Ii.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new k_(t,r));let u=this.Ii.get(t);void 0===u&&(u=Jt(),this.Ii.set(t,u)),this.Ii.set(t,u.add(r.key))}}class dm{constructor(){this.Ti=new un(nr.Ei),this.Ai=new un(nr.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new nr(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new nr(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new je(new qt([])),r=new nr(t,e),o=new nr(t,e+1),u=[];return this.Ai.forEachInRange([r,o],d=>{this.Pi(d),u.push(d.key)}),u}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new je(new qt([])),r=new nr(t,e),o=new nr(t,e+1);let u=Jt();return this.Ai.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new nr(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class nr{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return je.comparator(e.key,t.key)||At(e.Ci,t.Ci)}static Ri(e,t){return At(e.Ci,t.Ci)||je.comparator(e.key,t.key)}}class Ww{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new un(nr.Ei)}checkEmpty(e){return de.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,o){const u=this.xi;this.xi++;const d=new jf(u,t,r,o);this.Bs.push(d);for(const m of o)this.Ni=this.Ni.add(new nr(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return de.resolve(d)}lookupMutationBatch(e,t){return de.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.Mi(t+1),u=o<0?0:o;return de.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return de.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new nr(t,0),o=new nr(t,Number.POSITIVE_INFINITY),u=[];return this.Ni.forEachInRange([r,o],d=>{const m=this.ki(d.Ci);u.push(m)}),de.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new un(At);return t.forEach(o=>{const u=new nr(o,0),d=new nr(o,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([u,d],m=>{r=r.add(m.Ci)})}),de.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;je.isDocumentKey(u)||(u=u.child(""));const d=new nr(new je(u),0);let m=new un(At);return this.Ni.forEachWhile(w=>{const C=w.key.path;return!!r.isPrefixOf(C)&&(C.length===o&&(m=m.add(w.Ci)),!0)},d),de.resolve(this.Oi(m))}Oi(e){const t=[];return e.forEach(r=>{const o=this.ki(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){wt(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return de.forEach(t.mutations,o=>{const u=new nr(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new nr(t,0),o=this.Ni.firstAfterOrEqual(r);return de.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return de.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class Wb{constructor(e){this.$i=e,this.docs=new Pn(je.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return de.resolve(r?r.document.mutableCopy():hn.newInvalidDocument(t))}getEntries(e,t){let r=Us();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():hn.newInvalidDocument(o))}),de.resolve(r)}getAllFromCollection(e,t,r){let o=Us();const u=new je(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:m,value:{document:w}}=d.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||OE(XD(w),r)<=0||(o=o.insert(w.key,w.mutableCopy()))}return de.resolve(o)}getAllFromCollectionGroup(e,t,r,o){et()}Bi(e,t){return de.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Kw(this)}getSize(e){return de.resolve(this.size)}}class Kw extends q_{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Kn.addEntry(e,o)):this.Kn.removeEntry(r)}),de.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class Zw{constructor(e){this.persistence=e,this.Li=new ju(t=>qd(t),tc),this.lastRemoteSnapshotVersion=_t.min(),this.highestTargetId=0,this.Ui=0,this.qi=new dm,this.targetCount=0,this.Ki=fc.gn()}forEachTarget(e,t){return this.Li.forEach((r,o)=>t(o)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),de.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new fc(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.Tn(t),de.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Li.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Li.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),de.waitFor(u).next(()=>o)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return de.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),de.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),de.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),de.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return de.resolve(r)}containsKey(e,t){return de.resolve(this.qi.containsKey(t))}}class Kb{constructor(e,t){this.Gi={},this.overlays={},this.es=new is(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new Zw(this),this.indexManager=new Lb,this.ds=new Wb(r=>this.referenceDelegate.Qi(r)),this.M=new Sw(t),this._s=new qb(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new zb,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new Ww(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Oe("MemoryPersistence","Starting transaction:",e);const o=new Yw(this.es.next());return this.referenceDelegate.ji(),r(o).next(u=>this.referenceDelegate.Wi(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}zi(e,t){return de.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class Yw extends Tw{constructor(e){super(),this.currentSequenceNumber=e}}class hm{constructor(e){this.persistence=e,this.Hi=new dm,this.Ji=null}static Yi(e){return new hm(e)}get Xi(){if(this.Ji)return this.Ji;throw et()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),de.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),de.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(o=>this.Xi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Xi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.Xi,r=>{const o=je.fromPath(r);return this.Zi(e,o).next(u=>{u||t.removeEntry(o,_t.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return de.or([()=>de.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function Qw(n,e){return`firestore_clients_${n}_${e}`}function nv(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function rv(n,e){return`firestore_targets_${n}_${e}`}class Or{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static tr(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new xe(o.error.code,o.error.message))),d?new Or(e,t,o.state,u):(er("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Xo{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new xe(r.error.code,r.error.message))),u?new Xo(e,r.state,o):(er("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class fm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=nm();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=u_(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new fm(e,u):(er("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class iv{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new iv(t.clientId,t.onlineState):(er("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Jw{constructor(){this.activeTargetIds=nm()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ec{constructor(e,t,r,o,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Pn(At),this.started=!1,this.cr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.hr=Qw(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new Jw),this.dr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.syncEngine.Fs();for(const o of t){if(o===e.ir)continue;const u=e.getItem(Qw(e.persistenceKey,o));if(u){const d=fm.tr(o,u);d&&(e.ar=e.ar.insert(d.clientId,d))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const o=e.pr(r);o&&e.Ir(o)}for(const o of e.cr)e.ur(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(rv(this.persistenceKey,e));if(r){const o=Xo.tr(e,r);o&&(t=o.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(rv(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Ar(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Oe("SharedClientState","READ",e,t),t}setItem(e,t){Oe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Oe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Oe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void er("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,Ie.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Sr(o,null)}{const o=t.Dr(r.key,r.newValue);if(o)return t.Sr(o.clientId,o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Cr(r.key,r.newValue);if(o)return t.Nr(o)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const o=t.kr(r.key,r.newValue);if(o)return t.Mr(o)}}else if(r.key===t.mr){if(null!==r.newValue){const o=t.pr(r.newValue);if(o)return t.Ir(o)}}else if(r.key===t.lr){const o=function(u){let d=is.A;if(null!=u)try{const m=JSON.parse(u);wt("number"==typeof m),d=m}catch(m){er("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);o!==is.A&&t.sequenceNumberHandler(o)}else if(r.key===t.gr){const o=t.Or(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Fr(u)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const o=new Or(this.currentUser,e,t,r),u=nv(this.persistenceKey,this.currentUser,e);this.setItem(u,o.er())}Ar(e){const t=nv(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const o=rv(this.persistenceKey,e),u=new Xo(e,t,r);this.setItem(o,u.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return fm.tr(r,t)}Cr(e,t){const r=this._r.exec(e),o=Number(r[1]);return Or.tr(new Gr(void 0!==r[2]?r[2]:null),o,t)}kr(e,t){const r=this.wr.exec(e),o=Number(r[1]);return Xo.tr(o,t)}pr(e){return iv.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,Ie.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Oe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),o=this.Tr(this.ar),u=this.Tr(r),d=[],m=[];return u.forEach(w=>{o.has(w)||d.push(w)}),o.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Lr(d,m).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=nm();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class Xw{constructor(){this.Ur=new Jw,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new Jw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class sv{Kr(e){}shutdown(){}}class eI{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){Oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const tI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Zb{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class Yb extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,o,u){const d=this.ho(e,t);Oe("RestConnection","Sending: ",d,r);const m={};return this.lo(m,o,u),this.fo(e,d,m,r).then(w=>(Oe("RestConnection","Received: ",w),w),w=>{throw jg("RestConnection",`${e} failed with error: `,w,"url: ",d,"request:",r),w})}_o(e,t,r,o,u){return this.co(e,t,r,o,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Vd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ho(e,t){return`${this.uo}/v1/${t}:${tI[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,o){return new Promise((u,d)=>{const m=new WD;m.listenOnce(_E.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Ug.NO_ERROR:const C=m.getResponseJson();Oe("Connection","XHR received:",JSON.stringify(C)),u(C);break;case Ug.TIMEOUT:Oe("Connection",'RPC "'+e+'" timed out'),d(new xe(le.DEADLINE_EXCEEDED,"Request time out"));break;case Ug.HTTP_ERROR:const R=m.getStatus();if(Oe("Connection",'RPC "'+e+'" failed with status:',R,"response text:",m.getResponseText()),R>0){const N=m.getResponseJson().error;if(N&&N.status&&N.message){const z=function(ee){const ge=ee.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(ge)>=0?ge:le.UNKNOWN}(N.status);d(new xe(z,N.message))}else d(new xe(le.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new xe(le.UNAVAILABLE,"Connection failed."));break;default:et()}}finally{Oe("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(o);m.send(t,"POST",w,r,15)})}wo(e,t,r){const o=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=mE(),d=yE(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new wE({})),this.lo(m.initMessageHeaders,t,r),(0,Ot.uI)()||(0,Ot.b$)()||(0,Ot.d)()||(0,Ot.w1)()||(0,Ot.Mn)()||(0,Ot.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const w=o.join("");Oe("Connection","Creating WebChannel: "+w,m);const C=u.createWebChannel(w,m);let R=!1,N=!1;const z=new Zb({Jr:ge=>{N?Oe("Connection","Not sending because WebChannel is closed:",ge):(R||(Oe("Connection","Opening WebChannel transport."),C.open(),R=!0),Oe("Connection","WebChannel sending:",ge),C.send(ge))},Yr:()=>C.close()}),ee=(ge,Le,nt)=>{ge.listen(Le,Lt=>{try{nt(Lt)}catch(Vt){setTimeout(()=>{throw Vt},0)}})};return ee(C,Bg.EventType.OPEN,()=>{N||Oe("Connection","WebChannel transport opened.")}),ee(C,Bg.EventType.CLOSE,()=>{N||(N=!0,Oe("Connection","WebChannel transport closed"),z.ro())}),ee(C,Bg.EventType.ERROR,ge=>{N||(N=!0,jg("Connection","WebChannel transport errored:",ge),z.ro(new xe(le.UNAVAILABLE,"The operation could not be completed")))}),ee(C,Bg.EventType.MESSAGE,ge=>{var Le;if(!N){const nt=ge.data[0];wt(!!nt);const Lt=nt,Vt=Lt.error||(null===(Le=Lt[0])||void 0===Le?void 0:Le.error);if(Vt){Oe("Connection","WebChannel received error:",Vt);const $t=Vt.status;let St=function(Xt){const ji=Gn[Xt];if(void 0!==ji)return gt(ji)}($t),Ut=Vt.message;void 0===St&&(St=le.INTERNAL,Ut="Unknown error status: "+$t+" with message "+Vt.message),N=!0,z.ro(new xe(St,Ut)),C.close()}else Oe("Connection","WebChannel received:",nt),z.oo(nt)}}),ee(d,vE.STAT_EVENT,ge=>{ge.stat===EE.PROXY?Oe("Connection","Detected buffering proxy"):ge.stat===EE.NOPROXY&&Oe("Connection","Detected no buffering proxy")}),setTimeout(()=>{z.io()},0),z}}function pm(){return"undefined"!=typeof window?window:null}function tp(){return"undefined"!=typeof document?document:null}function ah(n){return new hb(n,!0)}class uh{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=o,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),o=Math.max(0,t-r);o>0&&Oe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,o,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class gm{constructor(e,t,r,o,u,d,m,w){this.Yn=e,this.Vo=r,this.vo=o,this.So=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new uh(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Ie.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,Ie.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,Ie.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(er(t.toString()),er("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===le.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Do===t&&this.Qo(r,o)},r=>{e(()=>{const o=new xe(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(o)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(o=>{r(()=>this.jo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Oo(){var e=this;this.state=5,this.No.Ro((0,Ie.Z)(function*(){e.state=0,e.start()}))}jo(e){return Oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(Oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class UT extends gm{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.M=u}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function fb(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:et(),o=e.targetChange.targetIds||[],u=function(w,C){return w.N?(wt(void 0===C||"string"==typeof C),tr.fromBase64String(C||"")):(wt(void 0===C||C instanceof Uint8Array),tr.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(w){const C=void 0===w.code?le.UNKNOWN:gt(w.code);return new xe(C,w.message||"")}(d);t=new C_(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=Yo(n,r.document.name),u=yr(r.document.updateTime),d=new qr({mapValue:{fields:r.document.fields}}),m=hn.newFoundDocument(o,u,d);t=new kf(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=Yo(n,r.document),u=r.readTime?yr(r.readTime):_t.min(),d=hn.newNoDocument(o,u);t=new kf([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=Yo(n,r.document);t=new kf([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return et();{const r=e.filter,u=new FT(r.count||0);t=new b_(r.targetId,u)}}var w;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return _t.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?_t.min():u.readTime?yr(u.readTime):_t.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=th(this.M),t.addTarget=function(o,u){let d;const m=u.target;return d=ss(m)?{documents:pb(o,m)}:{query:gb(o,m)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=T_(o,u.resumeToken):u.snapshotVersion.compareTo(_t.min())>0&&(d.readTime=Hu(o,u.snapshotVersion.toTimestamp())),d}(this.M,e);const r=function rm(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return et()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=th(this.M),t.removeTarget=e,this.Lo(t)}}class nI extends gm{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.M=u,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(wt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function LT(n,e){return n&&n.length>0?(wt(void 0!==e),n.map(t=>function(r,o){let u=yr(r.updateTime?r.updateTime:o);return u.isEqual(_t.min())&&(u=yr(o)),new XE(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=yr(e.commitTime);return this.listener.tu(r,t)}return wt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=th(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Ff(this.M,r))};this.Lo(t)}}class Qb extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=o,this.su=!1}iu(){if(this.su)throw new xe(le.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.So.co(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(le.UNKNOWN,o.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.So._o(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(le.UNKNOWN,o.toString())})}terminate(){this.su=!0}}class rI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(er(t),this.uu=!1):Oe("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class mm{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=u,this.gu.Kr(m=>{r.enqueueAndForget((0,Ie.Z)(function*(){var w;ja(d)&&(Oe("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,Ie.Z)(function*(C){const R=We(C);R.wu.add(4),yield Zu(R),R.yu.set("Unknown"),R.wu.delete(4),yield lh(R)}),function(C){return w.apply(this,arguments)})(d))}))}),this.yu=new rI(r,o)}}function lh(n){return ov.apply(this,arguments)}function ov(){return ov=(0,Ie.Z)(function*(n){if(ja(n))for(const e of n.mu)yield e(!0)}),ov.apply(this,arguments)}function Zu(n){return np.apply(this,arguments)}function np(){return np=(0,Ie.Z)(function*(n){for(const e of n.mu)yield e(!1)}),np.apply(this,arguments)}function av(n,e){const t=We(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),cv(t)?ym(t):Yu(t).Mo()&&uv(t,e))}function rp(n,e){const t=We(n),r=Yu(t);t._u.delete(e),r.Mo()&&lv(t,e),0===t._u.size&&(r.Mo()?r.$o():ja(t)&&t.yu.set("Unknown"))}function uv(n,e){n.pu.Z(e.targetId),Yu(n).Ho(e)}function lv(n,e){n.pu.Z(e),Yu(n).Jo(e)}function ym(n){n.pu=new lb({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),Yu(n).start(),n.yu.au()}function cv(n){return ja(n)&&!Yu(n).ko()&&n._u.size>0}function ja(n){return 0===We(n).wu.size}function dv(n){n.pu=void 0}function Jb(n){return hv.apply(this,arguments)}function hv(){return hv=(0,Ie.Z)(function*(n){n._u.forEach((e,t)=>{uv(n,e)})}),hv.apply(this,arguments)}function iI(n,e){return fv.apply(this,arguments)}function fv(){return fv=(0,Ie.Z)(function*(n,e){dv(n),cv(n)?(n.yu.lu(e),ym(n)):n.yu.set("Unknown")}),fv.apply(this,arguments)}function sI(n,e,t){return _m.apply(this,arguments)}function _m(){return _m=(0,Ie.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof C_&&2===e.state&&e.cause)try{yield(r=(0,Ie.Z)(function*(o,u){const d=u.cause;for(const m of u.targetIds)o._u.has(m)&&(yield o.remoteSyncer.rejectListen(m,d),o._u.delete(m),o.pu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ip(n,r)}else if(e instanceof kf?n.pu.ut(e):e instanceof b_?n.pu._t(e):n.pu.ht(e),!t.isEqual(_t.min()))try{const r=yield qw(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.pu.yt(u);return d.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const C=o._u.get(w);C&&o._u.set(w,C.withResumeToken(m.resumeToken,u))}}),d.targetMismatches.forEach(m=>{const w=o._u.get(m);if(!w)return;o._u.set(m,w.withResumeToken(tr.EMPTY_BYTE_STRING,w.snapshotVersion)),lv(o,m);const C=new Jo(w.target,m,1,w.sequenceNumber);uv(o,C)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Oe("RemoteStore","Failed to raise snapshot:",r),yield ip(n,r)}var r}),_m.apply(this,arguments)}function ip(n,e,t){return vm.apply(this,arguments)}function vm(){return vm=(0,Ie.Z)(function*(n,e,t){if(!Gu(e))throw e;n.wu.add(1),yield Zu(n),n.yu.set("Offline"),t||(t=()=>qw(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ie.Z)(function*(){Oe("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield lh(n)}))}),vm.apply(this,arguments)}function oI(n,e){return e().catch(t=>ip(n,t,e))}function ch(n){return aI.apply(this,arguments)}function aI(){return aI=(0,Ie.Z)(function*(n){const e=We(n),t=$a(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;uI(e);)try{const o=yield Y_(e.localStore,r);if(null===o){0===e.du.length&&t.$o();break}r=o.batchId,BT(e,o)}catch(o){yield ip(e,o)}Xb(e)&&eC(e)}),aI.apply(this,arguments)}function uI(n){return ja(n)&&n.du.length<10}function BT(n,e){n.du.push(e);const t=$a(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function Xb(n){return ja(n)&&!$a(n).ko()&&n.du.length>0}function eC(n){$a(n).start()}function jT(n){return lI.apply(this,arguments)}function lI(){return lI=(0,Ie.Z)(function*(n){$a(n).nu()}),lI.apply(this,arguments)}function $T(n){return cI.apply(this,arguments)}function cI(){return cI=(0,Ie.Z)(function*(n){const e=$a(n);for(const t of n.du)e.Zo(t.mutations)}),cI.apply(this,arguments)}function HT(n,e,t){return dh.apply(this,arguments)}function dh(){return dh=(0,Ie.Z)(function*(n,e,t){const r=n.du.shift(),o=P_.from(r,e,t);yield oI(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield ch(n)}),dh.apply(this,arguments)}function GT(n,e){return Em.apply(this,arguments)}function Em(){return Em=(0,Ie.Z)(function*(n,e){var t;e&&$a(n).Xo&&(yield(t=(0,Ie.Z)(function*(r,o){if(ab(u=o.code)&&u!==le.ABORTED){const d=r.du.shift();$a(r).Fo(),yield oI(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield ch(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),Xb(n)&&eC(n)}),Em.apply(this,arguments)}function wm(n,e){return Im.apply(this,arguments)}function Im(){return Im=(0,Ie.Z)(function*(n,e){const t=We(n);t.asyncQueue.verifyOperationInProgress(),Oe("RemoteStore","RemoteStore received new credentials");const r=ja(t);t.wu.add(3),yield Zu(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield lh(t)}),Im.apply(this,arguments)}function Dm(n,e){return dI.apply(this,arguments)}function dI(){return dI=(0,Ie.Z)(function*(n,e){const t=We(n);e?(t.wu.delete(2),yield lh(t)):e||(t.wu.add(2),yield Zu(t),t.yu.set("Unknown"))}),dI.apply(this,arguments)}function Yu(n){return n.Iu||(n.Iu=function(e,t,r){const o=We(e);return o.iu(),new UT(t,o.So,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Xr:Jb.bind(null,n),eo:iI.bind(null,n),zo:sI.bind(null,n)}),n.mu.push(function(){var e=(0,Ie.Z)(function*(t){t?(n.Iu.Fo(),cv(n)?ym(n):n.yu.set("Unknown")):(yield n.Iu.stop(),dv(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function $a(n){return n.Tu||(n.Tu=function(e,t,r){const o=We(e);return o.iu(),new nI(t,o.So,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Xr:jT.bind(null,n),eo:GT.bind(null,n),eu:$T.bind(null,n),tu:HT.bind(null,n)}),n.mu.push(function(){var e=(0,Ie.Z)(function*(t){t?(n.Tu.Fo(),yield ch(n)):(yield n.Tu.stop(),n.du.length>0&&(Oe("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class pv{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,m=new pv(e,t,d,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wc(n,e){if(er("AsyncQueue",`${e}: ${n}`),Gu(n))return new xe(le.UNAVAILABLE,`${e}: ${n}`);throw n}class sp{constructor(e){this.comparator=e?(t,r)=>e(t,r)||je.comparator(t.key,r.key):(t,r)=>je.comparator(t.key,r.key),this.keyedMap=D_(),this.sortedSet=new Pn(this.comparator)}static emptySet(e){return new sp(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof sp)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new sp;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class hI{constructor(){this.Eu=new Pn(je.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):et():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class hh{constructor(e,t,r,o,u,d,m,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=w}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new hh(e,t,sp.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class gv{constructor(){this.Ru=void 0,this.listeners=[]}}class tC{constructor(){this.queries=new ju(e=>v_(e),Kd),this.onlineState="Unknown",this.bu=new Set}}function fI(n,e){return pI.apply(this,arguments)}function pI(){return pI=(0,Ie.Z)(function*(n,e){const t=We(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new gv),o)try{u.Ru=yield t.onListen(r)}catch(d){const m=wc(d,`Initialization of query '${Zg(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Pu(t.onlineState),u.Ru&&e.Vu(u.Ru)&&mI(t)}),pI.apply(this,arguments)}function gI(n,e){return mv.apply(this,arguments)}function mv(){return mv=(0,Ie.Z)(function*(n,e){const t=We(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),mv.apply(this,arguments)}function nC(n,e){const t=We(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const m of d.listeners)m.Vu(o)&&(r=!0);d.Ru=o}}r&&mI(t)}function rC(n,e,t){const r=We(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function mI(n){n.bu.forEach(e=>{e.next()})}class yv{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new hh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=hh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class _v{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class yI{constructor(e){this.M=e}wi(e){return Yo(this.M,e)}mi(e){return e.metadata.exists?lw(this.M,e.document,!1):hn.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return yr(e)}}class wo{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=_I(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=qt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new yI(this.M);for(const o of e)if(o.metadata.queries){const u=r.wi(o.metadata.name);for(const d of o.metadata.queries){const m=(t.get(d)||Jt()).add(u);t.set(d,m)}}return t}complete(){var e=this;return(0,Ie.Z)(function*(){const t=yield function ev(n,e,t,r){return ep.apply(this,arguments)}(e.localStore,new yI(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const o of e.queries)yield Gb(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function _I(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class bm{constructor(e){this.key=e}}class vI{constructor(e){this.key=e}}class EI{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=Jt(),this.mutatedKeys=Jt(),this.Gu=HE(e),this.Qu=new sp(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new hI,o=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const w="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,C="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((R,N)=>{const z=o.get(R),ee=Yg(this.query,N)?N:null,ge=!!z&&this.mutatedKeys.has(z.key),Le=!!ee&&(ee.hasLocalMutations||this.mutatedKeys.has(ee.key)&&ee.hasCommittedMutations);let nt=!1;z&&ee?z.data.isEqual(ee.data)?ge!==Le&&(r.track({type:3,doc:ee}),nt=!0):this.Hu(z,ee)||(r.track({type:2,doc:ee}),nt=!0,(w&&this.Gu(ee,w)>0||C&&this.Gu(ee,C)<0)&&(m=!0)):!z&&ee?(r.track({type:0,doc:ee}),nt=!0):z&&!ee&&(r.track({type:1,doc:z}),nt=!0,(w||C)&&(m=!0)),nt&&(ee?(d=d.add(ee),u=Le?u.add(R):u.delete(R)):(d=d.delete(R),u=u.delete(R)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const R="F"===this.query.limitType?d.last():d.first();d=d.delete(R.key),u=u.delete(R.key),r.track({type:1,doc:R})}return{Qu:d,zu:r,ii:m,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Au();u.sort((C,R)=>function(N,z){const ee=ge=>{switch(ge){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return et()}};return ee(N)-ee(z)}(C.type,R.type)||this.Gu(C.doc,R.doc)),this.Ju(r);const d=t?this.Yu():[],m=0===this.Ku.size&&this.current?1:0,w=m!==this.qu;return this.qu=m,0!==u.length||w?{snapshot:new hh(this.query,e.Qu,o,u,e.mutatedKeys,0===m,w,!1),Xu:d}:{Xu:d}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new hI,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Jt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new vI(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new bm(r))}),t}ta(e){this.Uu=e._i,this.Ku=Jt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return hh.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class vv{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class wI{constructor(e){this.key=e,this.na=!1}}class II{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.sa={},this.ia=new ju(m=>v_(m),Kd),this.ra=new Map,this.oa=new Set,this.ua=new Pn(je.comparator),this.aa=new Map,this.ca=new dm,this.ha={},this.la=new Map,this.fa=fc.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function iC(n,e){return Cm.apply(this,arguments)}function Cm(){return Cm=(0,Ie.Z)(function*(n,e){const t=Ga(n);let r,o;const u=t.ia.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.ea();else{const d=yield vc(t.localStore,os(e));t.isPrimaryClient&&av(t.remoteStore,d);const m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield Ev(t,e,r,"current"===m)}return o}),Cm.apply(this,arguments)}function Ev(n,e,t,r){return wv.apply(this,arguments)}function wv(){return wv=(0,Ie.Z)(function*(n,e,t,r){n._a=(R,N,z)=>{return(ee=(0,Ie.Z)(function*(ge,Le,nt,Lt){let Vt=Le.view.Wu(nt);Vt.ii&&(Vt=yield J_(ge.localStore,Le.query,!1).then(({documents:Ut})=>Le.view.Wu(Ut,Vt)));const $t=Lt&&Lt.targetChanges.get(Le.targetId),St=Le.view.applyChanges(Vt,ge.isPrimaryClient,$t);return up(ge,Le.targetId,St.Xu),St.snapshot}),function(ge,Le,nt,Lt){return ee.apply(this,arguments)})(n,R,N,z);var ee};const o=yield J_(n.localStore,e,!0),u=new EI(e,o._i),d=u.Wu(o.documents),m=Jd.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),w=u.applyChanges(d,n.isPrimaryClient,m);up(n,t,w.Xu);const C=new vv(e,t,u);return n.ia.set(e,C),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),w.snapshot}),wv.apply(this,arguments)}function sC(n,e){return op.apply(this,arguments)}function op(){return op=(0,Ie.Z)(function*(n,e){const t=We(n),r=t.ia.get(e),o=t.ra.get(r.targetId);if(o.length>1)return t.ra.set(r.targetId,o.filter(u=>!Kd(u,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield oh(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),rp(t.remoteStore,r.targetId),fh(t,r.targetId)}).catch(pc))):(fh(t,r.targetId),yield oh(t.localStore,r.targetId,!0))}),op.apply(this,arguments)}function Tm(){return Tm=(0,Ie.Z)(function*(n,e,t){const r=Om(n);try{const o=yield function(u,d){const m=We(u),w=$n.now(),C=d.reduce((N,z)=>N.add(z.key),Jt());let R;return m.persistence.runTransaction("Locally write mutations","readwrite",N=>m.fi.Ks(N,C).next(z=>{R=z;const ee=[];for(const ge of d){const Le=tw(ge,R.get(ge.key));null!=Le&&ee.push(new as(ge.key,Le,JD(Le.value.mapValue),Hn.exists(!0)))}return m.Bs.addMutationBatch(N,w,ee,d)})).then(N=>(N.applyToLocalDocumentSet(R),{batchId:N.batchId,changes:R}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,m){let w=u.ha[u.currentUser.toKey()];w||(w=new Pn(At)),w=w.insert(d,m),u.ha[u.currentUser.toKey()]=w}(r,o.batchId,t),yield Ha(r,o.changes),yield ch(r.remoteStore)}catch(o){const u=wc(o,"Failed to persist write");t.reject(u)}}),Tm.apply(this,arguments)}function Iv(n,e){return Dv.apply(this,arguments)}function Dv(){return Dv=(0,Ie.Z)(function*(n,e){const t=We(n);try{const r=yield zw(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.aa.get(u);d&&(wt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.na=!0:o.modifiedDocuments.size>0?wt(d.na):o.removedDocuments.size>0&&(wt(d.na),d.na=!1))}),yield Ha(t,r,e)}catch(r){yield pc(r)}}),Dv.apply(this,arguments)}function oC(n,e,t){const r=We(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ia.forEach((u,d)=>{const m=d.view.Pu(e);m.snapshot&&o.push(m.snapshot)}),function(u,d){const m=We(u);m.onlineState=d;let w=!1;m.queries.forEach((C,R)=>{for(const N of R.listeners)N.Pu(d)&&(w=!0)}),w&&mI(m)}(r.eventManager,e),o.length&&r.sa.zo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function aC(n,e,t){return bv.apply(this,arguments)}function bv(){return bv=(0,Ie.Z)(function*(n,e,t){const r=We(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.aa.get(e),u=o&&o.key;if(u){let d=new Pn(je.comparator);d=d.insert(u,hn.newNoDocument(u,_t.min()));const m=Jt().add(u),w=new Pf(_t.min(),new Map,new un(At),d,m);yield Iv(r,w),r.ua=r.ua.remove(u),r.aa.delete(e),Mm(r)}else yield oh(r.localStore,e,!1).then(()=>fh(r,e,t)).catch(pc)}),bv.apply(this,arguments)}function uC(n,e){return Am.apply(this,arguments)}function Am(){return Am=(0,Ie.Z)(function*(n,e){const t=We(n),r=e.batch.batchId;try{const o=yield Hb(t.localStore,e);Tv(t,r,null),Sm(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ha(t,o)}catch(o){yield pc(o)}}),Am.apply(this,arguments)}function lC(n,e,t){return Cv.apply(this,arguments)}function Cv(){return Cv=(0,Ie.Z)(function*(n,e,t){const r=We(n);try{const o=yield function(u,d){const m=We(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let C;return m.Bs.lookupMutationBatch(w,d).next(R=>(wt(null!==R),C=R.keys(),m.Bs.removeMutationBatch(w,R))).next(()=>m.Bs.performConsistencyCheck(w)).next(()=>m.fi.Ks(w,C))})}(r.localStore,e);Tv(r,e,t),Sm(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ha(r,o)}catch(o){yield pc(o)}}),Cv.apply(this,arguments)}function ap(){return ap=(0,Ie.Z)(function*(n,e){const t=We(n);ja(t.remoteStore)||Oe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=We(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.Bs.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.la.get(r)||[];o.push(e),t.la.set(r,o)}catch(r){const o=wc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),ap.apply(this,arguments)}function Sm(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function Tv(n,e,t){const r=We(n);let o=r.ha[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.ha[r.currentUser.toKey()]=o}}function fh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||Av(n,r)})}function Av(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(rp(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),Mm(n))}function up(n,e,t){for(const r of t)r instanceof bm?(n.ca.addReference(r.key,e),Sv(n,r)):r instanceof vI?(Oe("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||Av(n,r.key)):et()}function Sv(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(Oe("SyncEngine","New document in limbo: "+t),n.oa.add(r),Mm(n))}function Mm(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new je(qt.fromString(e)),r=n.fa.next();n.aa.set(r,new wI(t)),n.ua=n.ua.insert(t,r),av(n.remoteStore,new Jo(os(Wd(t.path)),r,2,is.A))}}function Ha(n,e,t){return xm.apply(this,arguments)}function xm(){return xm=(0,Ie.Z)(function*(n,e,t){const r=We(n),o=[],u=[],d=[];var m;r.ia.isEmpty()||(r.ia.forEach((m,w)=>{d.push(r._a(w,e,t).then(C=>{if(C){r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,C.fromCache?"not-current":"current"),o.push(C);const R=_c.Ys(w.targetId,C);u.push(R)}}))}),yield Promise.all(d),r.sa.zo(o),yield(m=(0,Ie.Z)(function*(w,C){const R=We(w);try{yield R.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>de.forEach(C,z=>de.forEach(z.Hs,ee=>R.persistence.referenceDelegate.addReference(N,z.targetId,ee)).next(()=>de.forEach(z.Js,ee=>R.persistence.referenceDelegate.removeReference(N,z.targetId,ee)))))}catch(N){if(!Gu(N))throw N;Oe("LocalStore","Failed to update sequence numbers: "+N)}for(const N of C){const z=N.targetId;if(!N.fromCache){const ee=R.ui.get(z),Le=ee.withLastLimboFreeSnapshotVersion(ee.snapshotVersion);R.ui=R.ui.insert(z,Le)}}}),function(w,C){return m.apply(this,arguments)})(r.localStore,u))}),xm.apply(this,arguments)}function DI(n,e){return Mv.apply(this,arguments)}function Mv(){return Mv=(0,Ie.Z)(function*(n,e){const t=We(n);if(!t.currentUser.isEqual(e)){Oe("SyncEngine","User change. New user:",e.toKey());const r=yield Xf(t.localStore,e);t.currentUser=e,(o=t).la.forEach(d=>{d.forEach(m=>{m.reject(new xe(le.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ha(t,r.di)}var o}),Mv.apply(this,arguments)}function cC(n,e){const t=We(n),r=t.aa.get(e);if(r&&r.na)return Jt().add(r.key);{let o=Jt();const u=t.ra.get(e);if(!u)return o;for(const d of u){const m=t.ia.get(d);o=o.unionWith(m.view.ju)}return o}}function zT(n,e){return bI.apply(this,arguments)}function bI(){return bI=(0,Ie.Z)(function*(n,e){const t=We(n),r=yield J_(t.localStore,e.query,!0),o=e.view.ta(r);return t.isPrimaryClient&&up(t,e.targetId,o.Xu),o}),bI.apply(this,arguments)}function CI(n,e){return xv.apply(this,arguments)}function xv(){return xv=(0,Ie.Z)(function*(n,e){const t=We(n);return cm(t.localStore,e).then(r=>Ha(t,r))}),xv.apply(this,arguments)}function dC(n,e,t,r){return Rv.apply(this,arguments)}function Rv(){return Rv=(0,Ie.Z)(function*(n,e,t,r){const o=We(n),u=yield function(d,m){const w=We(d),C=We(w.Bs);return w.persistence.runTransaction("Lookup mutation documents","readonly",R=>C.fn(R,m).next(N=>N?w.fi.Ks(R,N):de.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield ch(o.remoteStore):"acknowledged"===t||"rejected"===t?(Tv(o,e,r||null),Sm(o,e),m=e,We(We(o.localStore).Bs)._n(m)):et(),yield Ha(o,u)):Oe("SyncEngine","Cannot apply mutation batch with id: "+e)}),Rv.apply(this,arguments)}function TI(){return TI=(0,Ie.Z)(function*(n,e){const t=We(n);if(Ga(t),Om(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield hC(t,r.toArray());t.da=!0,yield Dm(t.remoteStore,!0);for(const u of o)av(t.remoteStore,u)}else if(!1===e&&!1!==t.da){const r=[];let o=Promise.resolve();t.ra.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(fh(t,d),oh(t.localStore,d,!0))),rp(t.remoteStore,d)}),yield o,yield hC(t,r),function(u){const d=We(u);d.aa.forEach((m,w)=>{rp(d.remoteStore,w)}),d.ca.Si(),d.aa=new Map,d.ua=new Pn(je.comparator)}(t),t.da=!1,yield Dm(t.remoteStore,!1)}}),TI.apply(this,arguments)}function hC(n,e,t){return AI.apply(this,arguments)}function AI(){return AI=(0,Ie.Z)(function*(n,e,t){const r=We(n),o=[],u=[];for(const d of e){let m;const w=r.ra.get(d);if(w&&0!==w.length){m=yield vc(r.localStore,os(w[0]));for(const C of w){const R=r.ia.get(C),N=yield zT(r,R);N.snapshot&&u.push(N.snapshot)}}else{const C=yield lm(r.localStore,d);m=yield vc(r.localStore,C),yield Ev(r,fC(C),d,!1)}o.push(m)}return r.sa.zo(u),o}),AI.apply(this,arguments)}function fC(n){return Af(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function pC(n){const e=We(n);return We(We(e.localStore).persistence).Fs()}function Rm(n,e,t,r){return Nv.apply(this,arguments)}function Nv(){return Nv=(0,Ie.Z)(function*(n,e,t,r){const o=We(n);if(o.da)return void Oe("SyncEngine","Ignoring unexpected query state notification.");const u=o.ra.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield cm(o.localStore,E_(u[0])),m=Pf.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Ha(o,d,m);break}case"rejected":yield oh(o.localStore,e,!0),fh(o,e,r);break;default:et()}}),Nv.apply(this,arguments)}function gC(n,e,t){return Nm.apply(this,arguments)}function Nm(){return Nm=(0,Ie.Z)(function*(n,e,t){const r=Ga(n);if(r.da){for(const o of e){if(r.ra.has(o)){Oe("SyncEngine","Adding an already active target "+o);continue}const u=yield lm(r.localStore,o),d=yield vc(r.localStore,u);yield Ev(r,fC(u),d.targetId,!1),av(r.remoteStore,d)}for(const o of t)r.ra.has(o)&&(yield oh(r.localStore,o,!1).then(()=>{rp(r.remoteStore,o),fh(r,o)}).catch(pc))}}),Nm.apply(this,arguments)}function Ga(n){const e=We(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Iv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aC.bind(null,e),e.sa.zo=nC.bind(null,e.eventManager),e.sa.wa=rC.bind(null,e.eventManager),e}function Om(n){const e=We(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lC.bind(null,e),e}class Pm{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ie.Z)(function*(){t.M=ah(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return Gw(this.persistence,new Hw,e.initialUser,this.M)}ya(e){return new Kb(hm.Yi,this.M)}ga(e){return new Xw}terminate(){var e=this;return(0,Ie.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class SI extends Pm{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ie.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield Om(r.Ta.syncEngine),yield ch(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return Gw(this.persistence,new Hw,e.initialUser,this.M)}pa(e){return new Bb(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=W_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?us.withCacheSize(this.cacheSizeBytes):us.DEFAULT;return new z_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,pm(),tp(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new Xw}}class Pv extends SI{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ie.Z)(function*(){yield t().call(r,e);const o=r.Ta.syncEngine;r.sharedClientState instanceof Ec&&(r.sharedClientState.syncEngine={$r:dC.bind(null,o),Br:Rm.bind(null,o),Lr:gC.bind(null,o),Fs:pC.bind(null,o),Fr:CI.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,Ie.Z)(function*(d){yield function WT(n,e){return TI.apply(this,arguments)}(r.Ta.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}ga(e){const t=pm();if(!Ec.vt(t))throw new xe(le.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=W_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ec(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class lp{initialize(e,t){var r=this;return(0,Ie.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>oC(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=DI.bind(null,r.syncEngine),yield Dm(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new tC}createDatastore(e){const t=ah(e.databaseInfo.databaseId),r=new Yb(e.databaseInfo);return new Qb(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>oC(this.syncEngine,m,0),d=eI.vt()?new eI:new sv,new mm(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,m,w,C){const R=new II(r,o,u,d,m,w);return C&&(R.da=!0),R}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ie.Z)(function*(t){const r=We(t);Oe("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield Zu(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function cp(n,e=10240){let t=0;return{read:()=>(0,Ie.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ie.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class kv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class KT{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new Nr,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,Ie.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,Ie.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),o=Number(r);isNaN(o)&&e.va(`length string (${r}) is not valid number`);const u=yield e.Sa(o);return new _v(JSON.parse(u),t.length+o)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,Ie.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,Ie.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class ZT{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ie.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(le.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,Ie.Z)(function*(u,d){const m=We(u),w=th(m.M)+"/documents",C={documents:d.map(ee=>Va(m.M,ee))},R=yield m._o("BatchGetDocuments",w,C),N=new Map;R.forEach(ee=>{const ge=function cw(n,e){return"found"in e?function(t,r){wt(!!r.found);const o=Yo(t,r.found.name),u=yr(r.found.updateTime),d=new qr({mapValue:{fields:r.found.fields}});return hn.newFoundDocument(o,u,d)}(n,e):"missing"in e?function(t,r){wt(!!r.missing),wt(!!r.readTime);const o=Yo(t,r.missing),u=yr(r.readTime);return hn.newNoDocument(o,u)}(n,e):et()}(m.M,ee);N.set(ge.key.toString(),ge)});const z=[];return d.forEach(ee=>{const ge=N.get(ee.toString());wt(!!ge),z.push(ge)}),z}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Xg(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ie.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=je.fromPath(o);e.mutations.push(new Of(u,e.precondition(u)))}),yield(r=(0,Ie.Z)(function*(o,u){const d=We(o),m=th(d.M)+"/documents",w={writes:u.map(C=>Ff(d.M,C))};yield d.co("Commit",m,w)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw et();t=_t.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(le.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Hn.updateTime(t):Hn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(_t.min()))throw new xe(le.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Hn.updateTime(t)}return Hn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class YT{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.xa=r.maxAttempts,this.No=new uh(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,Ie.Z)(function*(){const t=new ZT(e.datastore),r=e.ka(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Ma(u)}))}).catch(o=>{e.Ma(o)})}))}ka(e){try{const t=this.updateFunction(e);return!Ql(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!ab(t)}return!1}}class MI{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Gr.UNAUTHENTICATED,this.clientId=AE.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,Ie.Z)(function*(m){Oe("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Oe("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,Ie.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(le.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=wc(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function xI(n,e){return Fv.apply(this,arguments)}function Fv(){return Fv=(0,Ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Oe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,Ie.Z)(function*(u){r.isEqual(u)||(yield Xf(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Fv.apply(this,arguments)}function RI(n,e){return Lv.apply(this,arguments)}function Lv(){return Lv=(0,Ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield km(n);Oe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>wm(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>wm(e.remoteStore,u)),n.onlineComponents=e}),Lv.apply(this,arguments)}function km(n){return Fm.apply(this,arguments)}function Fm(){return Fm=(0,Ie.Z)(function*(n){return n.offlineComponents||(Oe("FirestoreClient","Using default OfflineComponentProvider"),yield xI(n,new Pm)),n.offlineComponents}),Fm.apply(this,arguments)}function dp(n){return Vv.apply(this,arguments)}function Vv(){return Vv=(0,Ie.Z)(function*(n){return n.onlineComponents||(Oe("FirestoreClient","Using default OnlineComponentProvider"),yield RI(n,new lp)),n.onlineComponents}),Vv.apply(this,arguments)}function NI(n){return km(n).then(e=>e.persistence)}function Lm(n){return km(n).then(e=>e.localStore)}function Vm(n){return dp(n).then(e=>e.remoteStore)}function OI(n){return dp(n).then(e=>e.syncEngine)}function Dc(n){return hp.apply(this,arguments)}function hp(){return hp=(0,Ie.Z)(function*(n){const e=yield dp(n),t=e.eventManager;return t.onListen=iC.bind(null,e.syncEngine),t.onUnlisten=sC.bind(null,e.syncEngine),t}),hp.apply(this,arguments)}function _C(n,e,t={}){const r=new Nr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(o,u,d,m,w){const C=new kv({next:N=>{u.enqueueAndForget(()=>gI(o,R));const z=N.docs.has(d);!z&&N.fromCache?w.reject(new xe(le.UNAVAILABLE,"Failed to get document because the client is offline.")):z&&N.fromCache&&m&&"server"===m.source?w.reject(new xe(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(N)},error:N=>w.reject(N)}),R=new yv(Wd(d.path),C,{includeMetadataChanges:!0,ku:!0});return fI(o,R)}(yield Dc(n),n.asyncQueue,e,t,r)})),r.promise}function PI(n,e,t={}){const r=new Nr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(o,u,d,m,w){const C=new kv({next:N=>{u.enqueueAndForget(()=>gI(o,R)),N.fromCache&&"server"===m.source?w.reject(new xe(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(N)},error:N=>w.reject(N)}),R=new yv(d,C,{includeMetadataChanges:!0,ku:!0});return fI(o,R)}(yield Dc(n),n.asyncQueue,e,t,r)})),r.promise}const EC=new Map;function Uv(n,e,t){if(!t)throw new xe(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function wC(n,e,t,r){if(!0===e&&!0===r)throw new xe(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function IC(n){if(!je.isDocumentKey(n))throw new xe(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function DC(n){if(je.isDocumentKey(n))throw new xe(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Bv(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":et()}function i(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Bv(n);throw new xe(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function s(n,e){if(e<=0)throw new xe(le.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class a{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,wC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class l{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new a({}),this._settingsFrozen=!1,e instanceof yo?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new xe(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yo(o.options.projectId)}(e))}get app(){if(!this._app)throw new xe(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new a(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new kT;switch(t.type){case"gapi":const r=t.client;return wt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new DE(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new xe(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=EC.get(e);t&&(Oe("ComponentProvider","Removing Datastore"),EC.delete(e),t.terminate())}(this),Promise.resolve()}}class f{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new E(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new f(this.firestore,e,this._key)}}class _{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new _(this.firestore,e,this._query)}}class E extends _{constructor(e,t,r){super(e,t,Wd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new f(this.firestore,null,new je(e))}withConverter(e){return new E(this.firestore,e,this._path)}}function I(n,e,...t){if(n=(0,Ot.m9)(n),Uv("collection","path",e),n instanceof l){const r=qt.fromString(e,...t);return DC(r),new E(n,null,r)}{if(!(n instanceof f||n instanceof E))throw new xe(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(qt.fromString(e,...t));return DC(r),new E(n.firestore,null,r)}}function S(n,e,...t){if(n=(0,Ot.m9)(n),1===arguments.length&&(e=AE.R()),Uv("doc","path",e),n instanceof l){const r=qt.fromString(e,...t);return IC(r),new f(n,null,new je(r))}{if(!(n instanceof f||n instanceof E))throw new xe(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(qt.fromString(e,...t));return IC(r),new f(n.firestore,n instanceof E?n.converter:null,new je(r))}}function k(n,e){return n=(0,Ot.m9)(n),e=(0,Ot.m9)(e),(n instanceof f||n instanceof E)&&(e instanceof f||e instanceof E)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function V(n,e){return n=(0,Ot.m9)(n),e=(0,Ot.m9)(e),n instanceof _&&e instanceof _&&n.firestore===e.firestore&&Kd(n._query,e._query)&&n.converter===e.converter}class Z{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new uh(this,"async_queue_retry"),this.Qa=()=>{const t=tp();t&&Oe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=tp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=tp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new Nr;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,Ie.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!Gu(t))throw t;Oe("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,er("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const o=pv.createAndSchedule(this,e,t,r,u=>this.Ha(u));return this.La.push(o),o}ja(){this.Ua&&et()}verifyOperationInProgress(){}Ja(){var e=this;return(0,Ie.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function ye(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class Pe{constructor(){this._progressObserver={},this._taskCompletionResolver=new Nr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Fe extends l{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new Z,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Kt(this),this._firestoreClient.terminate()}}function dt(n){return n._firestoreClient||Kt(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Kt(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new QD(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new MI(n._authCredentials,n._appCheckCredentials,n._queue,r)}function Um(n,e,t){const r=new Nr;return n.asyncQueue.enqueue((0,Ie.Z)(function*(){try{yield xI(n,t),yield RI(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(u=o).name?u.code===le.FAILED_PRECONDITION||u.code===le.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function Bm(n){if(n._initialized||n._terminated)throw new xe(le.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Cc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Qu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qu(tr.fromBase64String(e))}catch(t){throw new xe(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Qu(tr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class fp{constructor(e){this._methodName=e}}class FI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return At(this._lat,e._lat)||At(this._long,e._long)}}const xM=/^__.*__$/;class RM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new as(e,this.data,this.fieldMask,t,this.fieldTransforms):new Qd(e,this.data,t,this.fieldTransforms)}}class nA{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new as(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function rA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw et()}}class LI{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===u&&this.tc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new LI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.nc({path:r,ic:!1});return o.rc(e),o}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.nc({path:r,ic:!1});return o.tc(),o}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return BI(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(rA(this.ec)&&xM.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class NM{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||ah(e)}lc(e,t,r,o=!1){return new LI({ec:e,methodName:t,hc:r,path:mr.emptyPath(),ic:!1,cc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function pp(n){const e=n._freezeSettings(),t=ah(n._databaseId);return new NM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function VI(n,e,t,r,o,u={}){const d=n.lc(u.merge||u.mergeFields?2:0,e,t,o);AC("Data must be an object, but it was:",d,r);const m=oA(r,d);let w,C;if(u.merge)w=new vf(d.fieldMask),C=d.fieldTransforms;else if(u.mergeFields){const R=[];for(const N of u.mergeFields){const z=SC(e,N,t);if(!d.contains(z))throw new xe(le.INVALID_ARGUMENT,`Field '${z}' is specified in your field mask but missing from your input data.`);uA(R,z)||R.push(z)}w=new vf(R),C=d.fieldTransforms.filter(N=>w.covers(N.field))}else w=null,C=d.fieldTransforms;return new RM(new qr(m),w,C)}class Wv extends fp{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Wv}}function iA(n,e,t){return new LI({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class bC extends fp{_toFieldTransform(e){return new xf(e.path,new Zd)}isEqual(e){return e instanceof bC}}class OM extends fp{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=iA(this,e,!0),r=this.fc.map(u=>gp(u,t)),o=new rc(r);return new xf(e.path,o)}isEqual(e){return this===e}}class PM extends fp{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=iA(this,e,!0),r=this.fc.map(u=>gp(u,t)),o=new ic(r);return new xf(e.path,o)}isEqual(e){return this===e}}class kM extends fp{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new Yd(e.M,zE(e.M,this.dc));return new xf(e.path,t)}isEqual(e){return this===e}}function CC(n,e,t,r){const o=n.lc(1,e,t);AC("Data must be an object, but it was:",o,r);const u=[],d=qr.empty();Uu(r,(w,C)=>{const R=UI(e,w,t);C=(0,Ot.m9)(C);const N=o.oc(R);if(C instanceof Wv)u.push(R);else{const z=gp(C,N);null!=z&&(u.push(R),d.set(R,z))}});const m=new vf(u);return new nA(d,m,o.fieldTransforms)}function TC(n,e,t,r,o,u){const d=n.lc(1,e,t),m=[SC(e,r,t)],w=[o];if(u.length%2!=0)throw new xe(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let z=0;z<u.length;z+=2)m.push(SC(e,u[z])),w.push(u[z+1]);const C=[],R=qr.empty();for(let z=m.length-1;z>=0;--z)if(!uA(C,m[z])){const ee=m[z];let ge=w[z];ge=(0,Ot.m9)(ge);const Le=d.oc(ee);if(ge instanceof Wv)C.push(ee);else{const nt=gp(ge,Le);null!=nt&&(C.push(ee),R.set(ee,nt))}}const N=new vf(C);return new nA(R,N,d.fieldTransforms)}function sA(n,e,t,r=!1){return gp(t,n.lc(r?4:3,e))}function gp(n,e){if(aA(n=(0,Ot.m9)(n)))return AC("Unsupported field value:",e,n),oA(n,e);if(n instanceof fp)return function(t,r){if(!rA(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let m=gp(d,r.uc(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Ot.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return zE(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=$n.fromDate(t);return{timestampValue:Hu(r.M,o)}}if(t instanceof $n){const o=new $n(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Hu(r.M,o)}}if(t instanceof FI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Qu)return{bytesValue:T_(r.M,t._byteString)};if(t instanceof f){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ac(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:A_(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${Bv(t)}`)}(n,e)}function oA(n,e){const t={};return s_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Uu(n,(r,o)=>{const u=gp(o,e.sc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function aA(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof $n||n instanceof FI||n instanceof Qu||n instanceof f||n instanceof fp)}function AC(n,e,t){if(!aA(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Bv(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function SC(n,e,t){if((e=(0,Ot.m9)(e))instanceof Cc)return e._internalPath;if("string"==typeof e)return UI(n,e);throw BI("Field path arguments must be of type string or ",n,!1,void 0,t)}const FM=new RegExp("[~\\*/\\[\\]]");function UI(n,e,t){if(e.search(FM)>=0)throw BI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Cc(...e.split("."))._internalPath}catch(r){throw BI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function BI(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||d)&&(w+=" (found",u&&(w+=` in field ${r}`),d&&(w+=` in document ${o}`),w+=")"),new xe(le.INVALID_ARGUMENT,m+n+w)}function uA(n,e){return n.some(t=>t.isEqual(e))}class Kv{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new f(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new LM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(jI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class LM extends Kv{data(){return super.data()}}function jI(n,e){return"string"==typeof e?UI(n,e):e instanceof Cc?e._internalPath:e._delegate._internalPath}class mp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Tc extends Kv{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Zv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(jI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Zv extends Tc{data(e={}){return super.data(e)}}class ph{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new mp(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Zv(this._firestore,this._userDataWriter,r.key,r,new mp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new Zv(r._firestore,r._userDataWriter,d.doc.key,d.doc,new mp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const m=new Zv(r._firestore,r._userDataWriter,d.doc.key,d.doc,new mp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,C=-1;return 0!==d.type&&(w=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),C=u.indexOf(d.doc.key)),{type:VM(d.type),doc:m,oldIndex:w,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function VM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return et()}}function lA(n,e){return n instanceof Tc&&e instanceof Tc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof ph&&e instanceof ph&&n._firestore===e._firestore&&V(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function cA(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new xe(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Yv{}function gh(n,...e){for(const t of e)n=t._apply(n);return n}class UM extends Yv{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=pp(e.firestore),r=function(o,u,d,m,w,C,R){let N;if(w.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new xe(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){mA(R,C);const ee=[];for(const ge of R)ee.push(gA(m,o,ge));N={arrayValue:{values:ee}}}else N=gA(m,o,R)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||mA(R,C),N=sA(d,"where",R,"in"===C||"not-in"===C);const z=sn.create(w,C,N);return function(ee,ge){if(ge.S()){const nt=Sf(ee);if(null!==nt&&!nt.isEqual(ge.field))throw new xe(le.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${nt.toString()}' and '${ge.field.toString()}'`);const Lt=Kg(ee);null!==Lt&&yA(0,ge.field,Lt)}const Le=function(nt,Lt){for(const Vt of nt.filters)if(Lt.indexOf(Vt.op)>=0)return Vt.op;return null}(ee,function(nt){switch(nt){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ge.op));if(null!==Le)throw new xe(le.INVALID_ARGUMENT,Le===ge.op?`Invalid query. You cannot use more than one '${ge.op.toString()}' filter.`:`Invalid query. You cannot use '${ge.op.toString()}' filters with '${Le.toString()}' filters.`)}(o,z),z}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new _(e.firestore,e.converter,function(o,u){const d=o.filters.concat([u]);return new Zo(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class jM extends Yv{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new xe(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new zd(o,u);return function(m,w){if(null===Kg(m)){const C=Sf(m);null!==C&&yA(0,C,w.field)}}(r,d),d}(e._query,this._c,this.gc);return new _(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Zo(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class dA extends Yv{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new _(e.firestore,e.converter,__(e._query,this.yc,this.Ic))}}class hA extends Yv{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=pA(e,this.type,this.Tc,this.Ec);return new _(e.firestore,e.converter,(o=t,new Zo((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class fA extends Yv{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=pA(e,this.type,this.Tc,this.Ec);return new _(e.firestore,e.converter,(o=t,new Zo((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function pA(n,e,t,r){if(t[0]=(0,Ot.m9)(t[0]),t[0]instanceof Kv)return function(o,u,d,m,w){if(!m)throw new xe(le.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const C=[];for(const R of nc(o))if(R.field.isKeyField())C.push(Jl(u,m.key));else{const N=m.data.field(R.field);if(jd(N))throw new xe(le.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+R.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const z=R.field.canonicalString();throw new xe(le.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${z}' (used as the orderBy) does not exist.`)}C.push(N)}return new Vs(C,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=pp(n.firestore);return function(u,d,m,w,C,R){const N=u.explicitOrderBy;if(C.length>N.length)throw new xe(le.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const z=[];for(let ee=0;ee<C.length;ee++){const ge=C[ee];if(N[ee].field.isKeyField()){if("string"!=typeof ge)throw new xe(le.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof ge}`);if(!Mf(u)&&-1!==ge.indexOf("/"))throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${ge}' contains a slash.`);const Le=u.path.child(qt.fromString(ge));if(!je.isDocumentKey(Le))throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Le}' is not because it contains an odd number of segments.`);const nt=new je(Le);z.push(Jl(d,nt))}else{const Le=sA(m,w,ge);z.push(Le)}}return new Vs(z,R)}(n._query,n.firestore._databaseId,o,e,t,r)}}function gA(n,e,t){if("string"==typeof(t=(0,Ot.m9)(t))){if(""===t)throw new xe(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Mf(e)&&-1!==t.indexOf("/"))throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(qt.fromString(t));if(!je.isDocumentKey(r))throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Jl(n,new je(r))}if(t instanceof f)return Jl(n,t._key);throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bv(t)}.`)}function mA(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new xe(le.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function yA(n,e,t){if(!t.isEqual(e))throw new xe(le.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const ZM={maxAttempts:5};class MC{convertValue(e,t="none"){switch(Fa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ko(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw et()}}convertObject(e,t){const r={};return Uu(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new FI(Nn(e.latitude),Nn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=$g(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Hg(e));default:return null}}convertTimestamp(e){const t=Wo(e);return new $n(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=qt.fromString(e);wt(pw(r));const o=new yo(r.get(1),r.get(3)),u=new je(r.popFirst(5));return o.isEqual(t)||er(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function $I(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class YM extends MC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new f(this.firestore,null,t)}}class _A{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=pp(e)}set(e,t,r){this._verifyNotCommitted();const o=mh(e,this._firestore),u=$I(o.converter,t,r),d=VI(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,Hn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=mh(e,this._firestore);let d;return d="string"==typeof(t=(0,Ot.m9)(t))||t instanceof Cc?TC(this._dataReader,"WriteBatch.update",u._key,t,r,o):CC(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,Hn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=mh(e,this._firestore);return this._mutations=this._mutations.concat(new Xg(t._key,Hn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function mh(n,e){if((n=(0,Ot.m9)(n)).firestore!==e)throw new xe(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class yp extends MC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new f(this.firestore,null,t)}}function vA(n,e,t){n=i(n,f);const r=i(n.firestore,Fe),o=$I(n.converter,e,t);return jm(r,[VI(pp(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Hn.none())])}function EA(n,e,t,...r){n=i(n,f);const o=i(n.firestore,Fe),u=pp(o);let d;return d="string"==typeof(e=(0,Ot.m9)(e))||e instanceof Cc?TC(u,"updateDoc",n._key,e,t,r):CC(u,"updateDoc",n._key,e),jm(o,[d.toMutation(n._key,Hn.exists(!0))])}function wA(n,...e){var t,r,o;n=(0,Ot.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||ye(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges};if(ye(e[d])){const N=e[d];e[d]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[d+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[d+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let w,C,R;if(n instanceof f)C=i(n.firestore,Fe),R=Wd(n._key.path),w={next:N=>{e[d]&&e[d](xC(C,n,N))},error:e[d+1],complete:e[d+2]};else{const N=i(n,_);C=i(N.firestore,Fe),R=N._query;const z=new yp(C);w={next:ee=>{e[d]&&e[d](new ph(C,z,N,ee))},error:e[d+1],complete:e[d+2]},cA(n._query)}return function(N,z,ee,ge){const Le=new kv(ge),nt=new yv(z,Le,ee);return N.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return fI(yield Dc(N),nt)})),()=>{Le.Aa(),N.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return gI(yield Dc(N),nt)}))}}(dt(C),R,m,w)}function jm(n,e){return function(t,r){const o=new Nr;return t.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function Ic(n,e,t){return Tm.apply(this,arguments)}(yield OI(t),r,o)})),o.promise}(dt(n),e)}function xC(n,e,t){const r=t.docs.get(e._key),o=new yp(n);return new Tc(n,o,e._key,r,new mp(t.hasPendingWrites,t.fromCache),e.converter)}class ox extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=pp(e)}get(e){const t=mh(e,this._firestore),r=new YM(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return et();const u=o[0];if(u.isFoundDocument())return new Kv(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new Kv(this._firestore,r,t._key,null,t.converter);throw et()})}set(e,t,r){const o=mh(e,this._firestore),u=$I(o.converter,t,r),d=VI(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=mh(e,this._firestore);let d;return d="string"==typeof(t=(0,Ot.m9)(t))||t instanceof Cc?TC(this._dataReader,"Transaction.update",u._key,t,r,o):CC(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=mh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=mh(e,this._firestore),r=new yp(this._firestore);return super.get(e).then(o=>new Tc(this._firestore,r,t._key,o._document,new mp(!1,!1),t.converter))}}function RC(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function DA(){if("undefined"==typeof Uint8Array)throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function bA(){if(!function Ef(){return"undefined"!=typeof atob}())throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Vd=Su.SDK_VERSION,(0,Su._registerComponent)(new ug.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new Fe(o,new Ud(t.getProvider("auth-internal")),new CE(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,Su.registerVersion)(e_,"3.4.9",n),(0,Su.registerVersion)(e_,"3.4.9","esm2017")}();class Qv{constructor(e){this._delegate=e}static fromBase64String(e){return bA(),new Qv(Qu.fromBase64String(e))}static fromUint8Array(e){return DA(),new Qv(Qu.fromUint8Array(e))}toBase64(){return bA(),this._delegate.toBase64()}toUint8Array(){return DA(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function NC(n){return function gx(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class mx{enableIndexedDbPersistence(e,t){return function cs(n,e){Bm(n=i(n,Fe));const t=dt(n),r=n._freezeSettings(),o=new lp;return Um(t,o,new SI(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function bc(n){Bm(n=i(n,Fe));const e=dt(n),t=n._freezeSettings(),r=new lp;return Um(e,r,new Pv(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function jv(n){if(n._initialized&&!n._terminated)throw new xe(le.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Nr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{yield(t=(0,Ie.Z)(function*(r){if(!Bs.vt())return Promise.resolve();const o=r+"main";yield Bs.delete(o)}),function(r){return t.apply(this,arguments)})(W_(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class CA{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof yo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&jg("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function c(n,e,t,r={}){var o;const u=(n=i(n,l))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&jg("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=Gr.MOCK_USER;else{d=(0,Ot.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new xe(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Gr(w)}n._authCredentials=new ZD(new r_(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function Hv(n){return function mC(n){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield NI(n),t=yield Vm(n);return e.setNetworkEnabled(!0),function(r){const o=We(r);return o.wu.delete(0),lh(o)}(t)}))}(dt(n=i(n,Fe)))}(this._delegate)}disableNetwork(){return function Gv(n){return function yC(n){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield NI(n),t=yield Vm(n);return e.setNetworkEnabled(!1),(r=(0,Ie.Z)(function*(o){const u=We(o);u.wu.add(0),yield Zu(u),u.yu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(dt(n=i(n,Fe)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,wC("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function $v(n){return function(e){const t=new Nr;return e.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function qT(n,e){return ap.apply(this,arguments)}(yield OI(e),t)})),t.promise}(dt(n=i(n,Fe)))}(this._delegate)}onSnapshotsInSync(e){return function sx(n,e){return function JT(n,e){const t=new kv(e);return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return r=yield Dc(n),o=t,We(r).bu.add(o),void o.next();var r,o})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return r=yield Dc(n),o=t,void We(r).bu.delete(o);var r,o}))}}(dt(n=i(n,Fe)),ye(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new $m(this,I(this._delegate,e))}catch(t){throw ds(t,"collection()","Firestore.collection()")}}doc(e){try{return new ea(this,S(this._delegate,e))}catch(t){throw ds(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new hs(this,function A(n,e){if(n=i(n,l),Uv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(le.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new _(n,null,(t=e,new Zo(qt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ds(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function ax(n,e,t){n=i(n,Fe);const r=Object.assign(Object.assign({},ZM),t);return function(o){if(o.maxAttempts<1)throw new xe(le.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function XT(n,e,t){const r=new Nr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){const o=yield(u=n,dp(u).then(d=>d.datastore));var u;new YT(n.asyncQueue,o,t,e,r).run()})),r.promise}(dt(n),o=>e(new ox(n,o)),r)}(this._delegate,t=>e(new TA(this,t)))}batch(){return dt(this._delegate),new AA(new _A(this._delegate,e=>jm(this._delegate,e)))}loadBundle(e){return function qv(n,e){const t=dt(n=i(n,Fe)),r=new Pe;return function eA(n,e,t,r){const o=function(u,d){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,C){if(w instanceof Uint8Array)return cp(w,C);if(w instanceof ArrayBuffer)return cp(new Uint8Array(w),C);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new KT(w,d);var w}(t,ah(e));n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){!function Ov(n,e,t){const r=We(n);var o;(o=(0,Ie.Z)(function*(u,d,m){try{const w=yield d.getMetadata();if(yield function(z,ee){const ge=We(z),Le=yr(ee.createTime);return ge.persistence.runTransaction("hasNewerBundle","readonly",nt=>ge._s.getBundleMetadata(nt,ee.id)).then(nt=>!!nt&&nt.createTime.compareTo(Le)>=0)}(u.localStore,w))return yield d.close(),m._completeWith({taskState:"Success",documentsLoaded:(z=w).totalDocuments,bytesLoaded:z.totalBytes,totalDocuments:z.totalDocuments,totalBytes:z.totalBytes}),Promise.resolve(new Set);m._updateProgress(_I(w));const C=new wo(w,u.localStore,d.M);let R=yield d.ma();for(;R;){const z=yield C.Fu(R);z&&m._updateProgress(z),R=yield d.ma()}const N=yield C.complete();return yield Ha(u,N.Lu,void 0),yield function(z,ee){const ge=We(z);return ge.persistence.runTransaction("Save bundle","readwrite",Le=>ge._s.saveBundleMetadata(Le,ee))}(u.localStore,w),m._completeWith(N.progress),Promise.resolve(N.Bu)}catch(w){return jg("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var z}),function(u,d,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield OI(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function zv(n,e){return function tA(n,e){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){return function(t,r){const o=We(t);return o.persistence.runTransaction("Get named query","readonly",u=>o._s.getNamedQuery(u,r))}(yield Lm(n),e)}))}(dt(n=i(n,Fe)),e).then(t=>t?new _(n,null,t.query):null)}(this._delegate,e).then(t=>t?new hs(this,t):null)}}class HI extends MC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qv(new Qu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ea.forKey(t,this.firestore,null)}}class TA{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new HI(e)}get(e){const t=vp(e);return this._delegate.get(t).then(r=>new Jv(this._firestore,new Tc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=vp(e);return r?(RC("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=vp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=vp(e);return this._delegate.delete(t),this}}class AA{constructor(e){this._delegate=e}set(e,t,r){const o=vp(e);return r?(RC("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=vp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=vp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class _p{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Zv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Xv(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=_p.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new _p(e,new HI(e),t),o.set(t,u)),u}}_p.INSTANCES=new WeakMap;class ea{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new HI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ea(t,new f(t._delegate,r,new je(e)))}static forKey(e,t,r){return new ea(t,new f(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new $m(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new $m(this.firestore,I(this._delegate,e))}catch(t){throw ds(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ot.m9)(e))instanceof f&&k(this._delegate,e)}set(e,t){t=RC("DocumentReference.set",t);try{return t?vA(this._delegate,e,t):vA(this._delegate,e)}catch(r){throw ds(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?EA(this._delegate,e):EA(this._delegate,e,t,...r)}catch(o){throw ds(o,"updateDoc()","DocumentReference.update()")}}delete(){return function rx(n){return jm(i(n.firestore,Fe),[new Xg(n._key,Hn.none())])}(this._delegate)}onSnapshot(...e){const t=SA(e),r=MA(e,o=>new Jv(this.firestore,new Tc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return wA(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function JM(n){n=i(n,f);const e=i(n.firestore,Fe),t=dt(e),r=new yp(e);return function QT(n,e){const t=new Nr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(r=(0,Ie.Z)(function*(o,u,d){try{const m=yield function(w,C){const R=We(w);return R.persistence.runTransaction("read document","readonly",N=>R.fi.Ls(N,C))}(o,u);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new xe(le.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=wc(m,`Failed to get document '${u} from cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield Lm(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Tc(e,r,n._key,o,new mp(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function XM(n){n=i(n,f);const e=i(n.firestore,Fe);return _C(dt(e),n._key,{source:"server"}).then(t=>xC(e,n,t))}(this._delegate):function QM(n){n=i(n,f);const e=i(n.firestore,Fe);return _C(dt(e),n._key).then(t=>xC(e,n,t))}(this._delegate),t.then(r=>new Jv(this.firestore,new Tc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ea(this.firestore,this._delegate.withConverter(e?_p.getInstance(this.firestore,e):null))}}function ds(n,e,t){return n.message=n.message.replace(e,t),n}function SA(n){for(const e of n)if("object"==typeof e&&!NC(e))return e;return{}}function MA(n,e){var t,r;let o;return o=NC(n[0])?n[0]:NC(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class Jv{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ea(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return lA(this._delegate,e._delegate)}}class Xv extends Jv{data(e){const t=this._delegate.data(e);return function KD(n,e){n||et()}(void 0!==t),t}}class hs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new HI(e)}where(e,t,r){try{return new hs(this.firestore,gh(this._delegate,function BM(n,e,t){const r=e,o=jI("where",n);return new UM(o,r,t)}(e,t,r)))}catch(o){throw ds(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new hs(this.firestore,gh(this._delegate,function $M(n,e="asc"){const t=e,r=jI("orderBy",n);return new jM(r,t)}(e,t)))}catch(r){throw ds(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new hs(this.firestore,gh(this._delegate,function HM(n){return s("limit",n),new dA("limit",n,"F")}(e)))}catch(t){throw ds(t,"limit()","Query.limit()")}}limitToLast(e){try{return new hs(this.firestore,gh(this._delegate,function GM(n){return s("limitToLast",n),new dA("limitToLast",n,"L")}(e)))}catch(t){throw ds(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new hs(this.firestore,gh(this._delegate,function qM(...n){return new hA("startAt",n,!0)}(...e)))}catch(t){throw ds(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new hs(this.firestore,gh(this._delegate,function zM(...n){return new hA("startAfter",n,!1)}(...e)))}catch(t){throw ds(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new hs(this.firestore,gh(this._delegate,function WM(...n){return new fA("endBefore",n,!1)}(...e)))}catch(t){throw ds(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new hs(this.firestore,gh(this._delegate,function KM(...n){return new fA("endAt",n,!0)}(...e)))}catch(t){throw ds(t,"endAt()","Query.endAt()")}}isEqual(e){return V(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function tx(n){n=i(n,_);const e=i(n.firestore,Fe),t=dt(e),r=new yp(e);return function vC(n,e){const t=new Nr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(r=(0,Ie.Z)(function*(o,u,d){try{const m=yield J_(o,u,!0),w=new EI(u,m._i),C=w.Wu(m.documents),R=w.applyChanges(C,!1);d.resolve(R.snapshot)}catch(m){const w=wc(m,`Failed to execute query '${u} against cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield Lm(n),e,t);var r})),t.promise}(t,n._query).then(o=>new ph(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function nx(n){n=i(n,_);const e=i(n.firestore,Fe),t=dt(e),r=new yp(e);return PI(t,n._query,{source:"server"}).then(o=>new ph(e,r,n,o))}(this._delegate):function ex(n){n=i(n,_);const e=i(n.firestore,Fe),t=dt(e),r=new yp(e);return cA(n._query),PI(t,n._query).then(o=>new ph(e,r,n,o))}(this._delegate),t.then(r=>new OC(this.firestore,new ph(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=SA(e),r=MA(e,o=>new OC(this.firestore,new ph(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return wA(this._delegate,t,r)}withConverter(e){return new hs(this.firestore,this._delegate.withConverter(e?_p.getInstance(this.firestore,e):null))}}class _x{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Xv(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class OC{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new hs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Xv(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new _x(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Xv(this._firestore,r))})}isEqual(e){return lA(this._delegate,e._delegate)}}class $m extends hs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ea(this.firestore,e):null}doc(e){try{return new ea(this.firestore,void 0===e?S(this._delegate):S(this._delegate,e))}catch(t){throw ds(t,"doc()","CollectionReference.doc()")}}add(e){return function ix(n,e){const t=i(n.firestore,Fe),r=S(n),o=$I(n.converter,e);return jm(t,[VI(pp(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Hn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ea(this.firestore,t))}isEqual(e){return k(this._delegate,e._delegate)}withConverter(e){return new $m(this.firestore,this._delegate.withConverter(e?_p.getInstance(this.firestore,e):null))}}function vp(n){return i(n,f)}class PC{constructor(...e){this._delegate=new Cc(...e)}static documentId(){return new PC(mr.keyField().canonicalString())}isEqual(e){return(e=(0,Ot.m9)(e))instanceof Cc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ep{constructor(e){this._delegate=e}static serverTimestamp(){const e=function lx(){return new bC("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ep(e)}static delete(){const e=function ux(){return new Wv("deleteField")}();return e._methodName="FieldValue.delete",new Ep(e)}static arrayUnion(...e){const t=function cx(...n){return new OM("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Ep(t)}static arrayRemove(...e){const t=function dx(...n){return new PM("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Ep(t)}static increment(e){const t=function hx(n){return new kM("increment",n)}(e);return t._methodName="FieldValue.increment",new Ep(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const vx={Firestore:CA,GeoPoint:FI,Timestamp:$n,Blob:Qv,Transaction:TA,WriteBatch:AA,DocumentReference:ea,DocumentSnapshot:Jv,Query:hs,QueryDocumentSnapshot:Xv,QuerySnapshot:OC,CollectionReference:$m,FieldPath:PC,FieldValue:Ep,setLogLevel:function yx(n){!function IE(n){Pa.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function wx(n){(function Ex(n,e){n.INTERNAL.registerComponent(new ug.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},vx)))})(n,(e,t)=>new CA(e,t,new mx)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(R0.Z);var Ix=O(6451),GI=O(5363),Dx=O(6063);class bx extends Cr.x{constructor(e=1/0,t=1/0,r=Dx.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!o&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const d=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=d;w+=2)m=w;m&&r.splice(0,m+1)}}}var Cx=O(3099);function xA(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,Cx.B)({connector:()=>new bx(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function RA(n,e){return(0,to.m)(e)?xn(()=>n,e):xn(()=>n)}var kC=O(9468);O(5867);const OA=new Map,xx={activated:!1,tokenObservers:[]},Rx={initialized:!1,enabled:!1};function si(n){return OA.get(n)||xx}function qa(n,e){OA.set(n,e)}function zI(){return Rx}class Fx{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ie.Z)(function*(){t.stop();try{t.pending=new Ot.BH,yield function Lx(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Ot.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const fs=new Ot.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function kA(n){if(!si(n).activated)throw fs.create("use-before-activation",{appName:n.name})}function UC(n,e){return BC.apply(this,arguments)}function BC(){return BC=(0,Ie.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const N=yield o.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const u={method:"POST",body:JSON.stringify(e),headers:r};let d,m;try{d=yield fetch(n,u)}catch(N){throw fs.create("fetch-network-error",{originalErrorMessage:N.message})}if(200!==d.status)throw fs.create("fetch-status-error",{httpStatus:d.status});try{m=yield d.json()}catch(N){throw fs.create("fetch-parse-error",{originalErrorMessage:N.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw fs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const C=1e3*Number(w[1]),R=Date.now();return{token:m.token,expireTimeMillis:R+C,issuedAtTimeMillis:R}}),BC.apply(this,arguments)}function $x(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const e0="firebase-app-check-store";let ZI=null;function LA(){return ZI||(ZI=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(fs.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(e0,{keyPath:"compositeKey"})}}catch(t){e(fs.create("storage-open",{originalErrorMessage:t.message}))}}),ZI)}function jC(){return jC=(0,Ie.Z)(function*(n,e){const r=(yield LA()).transaction(e0,"readwrite"),u=r.objectStore(e0).put({compositeKey:n,value:e});return new Promise((d,m)=>{u.onsuccess=w=>{d()},r.onerror=w=>{var C;m(fs.create("storage-set",{originalErrorMessage:null===(C=w.target.error)||void 0===C?void 0:C.message}))}})}),jC.apply(this,arguments)}const t0=new Aa.Yd("@firebase/app-check");function jA(n,e){return(0,Ot.hl)()?function zx(n,e){return function VA(n,e){return jC.apply(this,arguments)}(function BA(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{t0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function $A(){return zI().enabled}function HA(){return qC.apply(this,arguments)}function qC(){return qC=(0,Ie.Z)(function*(){const n=zI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),qC.apply(this,arguments)}const Jx={error:"UNKNOWN_ERROR"};function Xx(n){return Ot.US.encodeString(JSON.stringify(n),!1)}function YI(n){return zC.apply(this,arguments)}function zC(){return zC=(0,Ie.Z)(function*(n,e=!1){const t=n.app;kA(t);const r=si(t);let u,o=r.token;if(!o){const w=yield r.cachedTokenPromise;w&&QI(w)&&(o=w)}if(!e&&o&&QI(o))return{token:o.token};let m,d=!1;if($A()){r.exchangeTokenPromise||(r.exchangeTokenPromise=UC($x(t,yield HA()),n.heartbeatServiceProvider).then(C=>(r.exchangeTokenPromise=void 0,C)),d=!0);const w=yield r.exchangeTokenPromise;return yield jA(t,w),qa(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(w=>(r.exchangeTokenPromise=void 0,w)),d=!0),o=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?t0.warn(w.message):t0.error(w),u=w}return o?(m={token:o.token},qa(t,Object.assign(Object.assign({},r),{token:o})),yield jA(t,o)):m=tR(u),d&&qA(t,m),m}),zC.apply(this,arguments)}function KC(n,e){const t=si(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),qa(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function GA(n){const{app:e}=n,t=si(e);let r=t.tokenRefresher;r||(r=function eR(n){const{app:e}=n;return new Fx((0,Ie.Z)(function*(){let r;if(r=si(e).token?yield YI(n,!0):yield YI(n),r.error)throw r.error}),()=>!0,()=>{const t=si(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),qa(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function qA(n,e){const t=si(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function QI(n){return n.expireTimeMillis-Date.now()>0}function tR(n){return{token:Xx(Jx),error:n}}class nR{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=si(this.app);for(const t of e)KC(this.app,t.next);return Promise.resolve()}}const XA="app-check-internal";!function mR(){(0,Su._registerComponent)(new ug.wA("app-check",n=>function rR(n,e){return new nR(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(XA).initialize()})),(0,Su._registerComponent)(new ug.wA(XA,n=>function iR(n){return{getToken:e=>YI(n,e),addTokenListener:e=>function WC(n,e,t,r){const{app:o}=n,u=si(o),d={next:t,error:r,type:e};if(qa(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,d]})),u.token&&QI(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),GA(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>GA(n))}(n,"INTERNAL",e),removeTokenListener:e=>KC(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Su.registerVersion)("@firebase/app-check","0.5.8")}();class JC{constructor(){return(0,Sr.vb)("app-check")}}"undefined"!=typeof window&&window;var tS=O(127);const nS=new g.OlP("angularfire2.auth.use-emulator"),rS=new g.OlP("angularfire2.auth.settings"),iS=new g.OlP("angularfire2.auth.tenant-id"),sS=new g.OlP("angularfire2.auth.langugage-code"),oS=new g.OlP("angularfire2.auth.use-device-language"),aS=new g.OlP("angularfire.auth.persistence"),uS=(n,e,t,r,o,u,d,m)=>(0,ks.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,u&&w.useDeviceLanguage(),d)for(const[C,R]of Object.entries(d))w.settings[C]=R;return m&&w.setPersistence(m),w},[t,r,o,u,d,m]);let eT=(()=>{class n{constructor(t,r,o,u,d,m,w,C,R,N,z,ee){const ge=new Cr.x,Le=it(void 0).pipe((0,GI.Q)(d.outsideAngular),xn(()=>u.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,7092)))),(0,It.U)(()=>(0,ks.on)(t,u,r)),(0,It.U)(nt=>uS(nt,u,m,C,R,N,w,z)),xA({bufferSize:1,refCount:!1}));if(Ao(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=it(null);else{Le.pipe(Uo()).subscribe();const Lt=Le.pipe(xn(St=>St.getRedirectResult().then(Ut=>Ut,()=>null)),Sr.iC,xA({bufferSize:1,refCount:!1})),Vt=Le.pipe(xn(St=>new Mn.y(Ut=>({unsubscribe:u.runOutsideAngular(()=>St.onAuthStateChanged(Xt=>Ut.next(Xt),Xt=>Ut.error(Xt),()=>Ut.complete()))})))),$t=Le.pipe(xn(St=>new Mn.y(Ut=>({unsubscribe:u.runOutsideAngular(()=>St.onIdTokenChanged(Xt=>Ut.next(Xt),Xt=>Ut.error(Xt),()=>Ut.complete()))}))));this.authState=Lt.pipe(RA(Vt),(0,kC.R)(d.outsideAngular),(0,GI.Q)(d.insideAngular)),this.user=Lt.pipe(RA($t),(0,kC.R)(d.outsideAngular),(0,GI.Q)(d.insideAngular)),this.idToken=this.user.pipe(xn(St=>St?(0,an.D)(St.getIdToken()):it(null))),this.idTokenResult=this.user.pipe(xn(St=>St?(0,an.D)(St.getIdTokenResult()):it(null))),this.credential=(0,Ix.T)(Lt,ge,this.authState.pipe(Qn(St=>!St))).pipe((0,It.U)(St=>(null==St?void 0:St.user)?St:null),(0,kC.R)(d.outsideAngular),(0,GI.Q)(d.insideAngular))}return(0,ks.pX)(this,Le,u,{spy:{apply:(nt,Lt,Vt)=>{(nt.startsWith("signIn")||nt.startsWith("createUser"))&&Vt.then($t=>ge.next($t))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ks.Dh),g.LFG(ks.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Sr.HU),g.LFG(nS,8),g.LFG(rS,8),g.LFG(iS,8),g.LFG(sS,8),g.LFG(oS,8),g.LFG(aS,8),g.LFG(JC,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),IR=(()=>{class n{constructor(){tS.Z.registerVersion("angularfire",Sr.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[eT]}),n})();function lS(n,e){return function DR(n,e=Kh.z){return new Mn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function tT(n,e){return lS(n,e).pipe((0,It.U)(t=>({payload:t,type:"query"})))}function XI(n,e){return tT(n,e).pipe(so(void 0),ag(),(0,It.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const w=o.find(R=>R.doc.ref.isEqual(d.ref)),C=null==t?void 0:t.payload.docs.find(R=>R.ref.isEqual(d.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(d.metadata)||!w&&C&&JSON.stringify(C.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),u}))}function cS(n,e,t){return XI(n,t).pipe(Ri((r,o)=>function CR(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function TR(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return nT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return nT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return nT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function gD(n,e=xi.y){return n=null!=n?n:mD,(0,Yn.e)((t,r)=>{let o,u=!0;t.subscribe((0,Kn.x)(r,d=>{const m=e(d);(u||!n(o,m))&&(u=!1,o=m,r.next(d))}))})}(),(0,It.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function nT(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function dS(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class hS{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=XI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,It.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(so(void 0),ag(),Qn(([r,o])=>o.length>0||!r),(0,It.U)(([r,o])=>o),Sr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ri((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=dS(e);return cS(this.query,t,this.afs.schedulers.outsideAngular).pipe(Sr.iC)}valueChanges(e={}){return tT(this.query,this.afs.schedulers.outsideAngular).pipe((0,It.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Sr.iC)}get(e){return(0,an.D)(this.query.get(e)).pipe(Sr.iC)}add(e){return this.ref.add(e)}doc(e){return new fS(this.ref.doc(e),this.afs)}}class fS{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=mS(r,t);return new hS(o,u,this.afs)}snapshotChanges(){return function bR(n,e){return lS(n,e).pipe(so(void 0),ag(),(0,It.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Sr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,It.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,an.D)(this.ref.get(e)).pipe(Sr.iC)}}class AR{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?XI(this.query,this.afs.schedulers.outsideAngular).pipe((0,It.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Qn(t=>t.length>0),Sr.iC):XI(this.query,this.afs.schedulers.outsideAngular).pipe(Sr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ri((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=dS(e);return cS(this.query,t,this.afs.schedulers.outsideAngular).pipe(Sr.iC)}valueChanges(e={}){return tT(this.query,this.afs.schedulers.outsideAngular).pipe((0,It.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Sr.iC)}get(e){return(0,an.D)(this.query.get(e)).pipe(Sr.iC)}}const pS=new g.OlP("angularfire2.enableFirestorePersistence"),gS=new g.OlP("angularfire2.firestore.persistenceSettings"),SR=new g.OlP("angularfire2.firestore.settings"),MR=new g.OlP("angularfire2.firestore.use-emulator");function mS(n,e=(t=>t)){return{query:e(n),ref:n}}let yS=(()=>{class n{constructor(t,r,o,u,d,m,w,C,R,N,z,ee,ge,Le,nt,Lt,Vt){this.schedulers=w;const $t=(0,ks.on)(t,m,r),St=R;N&&uS($t,m,z,ge,Le,nt,ee,Lt),[this.firestore,this.persistenceEnabled$]=(0,ks.cc)(`${$t.name}.firestore`,"AngularFirestore",$t.name,()=>{const Ut=m.runOutsideAngular(()=>$t.firestore());if(u&&Ut.settings(u),St&&Ut.useEmulator(...St),o&&!Ao(d)){const Xt=()=>{try{return(0,an.D)(Ut.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(ji){return"undefined"!=typeof console&&console.warn(ji),it(!1)}};return[Ut,m.runOutsideAngular(Xt)]}return[Ut,it(!1)]},[u,St,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=mS(o,r),m=this.schedulers.ngZone.run(()=>u);return new hS(m,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new AR(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new fS(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ks.Dh),g.LFG(ks.xv,8),g.LFG(pS,8),g.LFG(SR,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Sr.HU),g.LFG(gS,8),g.LFG(MR,8),g.LFG(eT,8),g.LFG(nS,8),g.LFG(rS,8),g.LFG(iS,8),g.LFG(sS,8),g.LFG(oS,8),g.LFG(aS,8),g.LFG(JC,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),xR=(()=>{class n{constructor(){tS.Z.registerVersion("angularfire",Sr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:pS,useValue:!0},{provide:gS,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[yS]}),n})(),rT=(()=>{class n{constructor(t){this.angularFirestore=t}getPosts(){return this.angularFirestore.collection("posts").snapshotChanges()}getPostById(t){return this.angularFirestore.collection("posts").doc(t).valueChanges()}createPost(t){return new Promise((r,o)=>{this.angularFirestore.collection("posts").add(t).then(u=>{console.log(u)},u=>{o(u)})})}updatePost(t,r){return this.angularFirestore.collection("posts").doc(r).update({title:t.title,content:t.content,author:t.author})}deletePost(t){return this.angularFirestore.collection("posts").doc(t.id).delete()}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(yS))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),_S=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n}),n})(),wp=(()=>{class n extends _S{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,features:[g.qOj]}),n})();const Ju=new g.OlP("NgValueAccessor"),OR={provide:Ju,useExisting:(0,g.Gpc)(()=>n0),multi:!0},kR=new g.OlP("CompositionEventMode");let n0=(()=>{class n extends _S{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function PR(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(kR,8))},n.\u0275dir=g.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&g.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[g._Bn([OR]),g.qOj]}),n})();const Bi=new g.OlP("NgValidators"),_h=new g.OlP("NgAsyncValidators");function DS(n){return function yh(n){return null==n||0===n.length}(n.value)?{required:!0}:null}function eD(n){return null}function MS(n){return null!=n}function xS(n){const e=(0,g.QGY)(n)?(0,an.D)(n):n;return(0,g.CqO)(e),e}function RS(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function NS(n,e){return e.map(t=>t(n))}function OS(n){return n.map(e=>function LR(n){return!n.validate}(e)?e:t=>e.validate(t))}function iT(n){return null!=n?function PS(n){if(!n)return null;const e=n.filter(MS);return 0==e.length?null:function(t){return RS(NS(t,e))}}(OS(n)):null}function sT(n){return null!=n?function kS(n){if(!n)return null;const e=n.filter(MS);return 0==e.length?null:function(t){return function RR(...n){const e=(0,fa.jO)(n),{args:t,keys:r}=mn(n),o=new Mn.y(u=>{const{length:d}=t;if(!d)return void u.complete();const m=new Array(d);let w=d,C=d;for(let R=0;R<d;R++){let N=!1;(0,ml.Xf)(t[R]).subscribe((0,Kn.x)(u,z=>{N||(N=!0,C--),m[R]=z},()=>w--,void 0,()=>{(!w||!N)&&(C||u.next(r?gl(r,m):m),u.complete())}))}});return e?o.pipe(pl(e)):o}(NS(t,e).map(xS)).pipe((0,It.U)(RS))}}(OS(n)):null}function FS(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function LS(n){return n._rawValidators}function VS(n){return n._rawAsyncValidators}function oT(n){return n?Array.isArray(n)?n:[n]:[]}function tD(n,e){return Array.isArray(n)?n.includes(e):n===e}function US(n,e){const t=oT(e);return oT(n).forEach(o=>{tD(t,o)||t.push(o)}),t}function BS(n,e){return oT(e).filter(t=>!tD(n,t))}class jS{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=iT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=sT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class vh extends jS{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ps extends jS{get formDirective(){return null}get path(){return null}}class $S{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let aT=(()=>{class n extends $S{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(vh,2))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[g.qOj]}),n})(),uT=(()=>{class n extends $S{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(ps,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[g.qOj]}),n})();function r0(n,e){dT(n,e),e.valueAccessor.writeValue(n.value),function qR(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&GS(n,e)})}(n,e),function WR(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function zR(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&GS(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function GR(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function iD(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),oD(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function sD(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function dT(n,e){const t=LS(n);null!==e.validator?n.setValidators(FS(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=VS(n);null!==e.asyncValidator?n.setAsyncValidators(FS(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();sD(e._rawValidators,o),sD(e._rawAsyncValidators,o)}function oD(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=LS(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.validator);u.length!==o.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const o=VS(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.asyncValidator);u.length!==o.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return sD(e._rawValidators,r),sD(e._rawAsyncValidators,r),t}function GS(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function pT(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const s0="VALID",aD="INVALID",Hm="PENDING",o0="DISABLED";function mT(n){return(uD(n)?n.validators:n)||null}function KS(n){return Array.isArray(n)?iT(n):n||null}function yT(n,e){return(uD(e)?e.asyncValidators:n)||null}function ZS(n){return Array.isArray(n)?sT(n):n||null}function uD(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const _T=n=>n instanceof ET,lD=n=>n instanceof cD,YS=n=>n instanceof eM;function QS(n){return _T(n)?n.value:n.getRawValue()}function JS(n,e){const t=lD(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new g.vHH(1e3,"");if(!r[e])throw new g.vHH(1001,"")}function XS(n,e){lD(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new g.vHH(1002,"")})}class vT{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=KS(this._rawValidators),this._composedAsyncValidatorFn=ZS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===s0}get invalid(){return this.status===aD}get pending(){return this.status==Hm}get disabled(){return this.status===o0}get enabled(){return this.status!==o0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=KS(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=ZS(e)}addValidators(e){this.setValidators(US(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(US(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(BS(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(BS(e,this._rawAsyncValidators))}hasValidator(e){return tD(this._rawValidators,e)}hasAsyncValidator(e){return tD(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Hm,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=o0,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=s0,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===s0||this.status===Hm)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?o0:s0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Hm,this._hasOwnPendingAsyncValidator=!0;const t=xS(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function QR(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=lD(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:YS(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?o0:this.errors?aD:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Hm)?Hm:this._anyControlsHaveStatus(aD)?aD:s0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){uD(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class ET extends vT{constructor(e=null,t,r){super(mT(t),yT(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),uD(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){pT(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){pT(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class cD extends vT{constructor(e,t,r){super(mT(t),yT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){XS(this,e),Object.keys(e).forEach(r=>{JS(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=QS(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class eM extends vT{constructor(e,t,r){super(mT(t),yT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){XS(this,e),e.forEach((r,o)=>{JS(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>QS(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let IT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),oM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();const DT=new g.OlP("NgModelWithFormControlWarning"),oN={provide:ps,useExisting:(0,g.Gpc)(()=>u0)};let u0=(()=>{class n extends ps{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new g.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(oD(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return r0(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){iD(t.control||null,t,!1),pT(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function WS(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(iD(r||null,t),_T(o)&&(r0(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function qS(n,e){dT(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function KR(n,e){return oD(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){dT(this.form,this),this._oldForm&&oD(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Bi,10),g.Y36(_h,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&g.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([oN]),g.qOj,g.TTD]}),n})();const lN={provide:vh,useExisting:(0,g.Gpc)(()=>dD)};let dD=(()=>{class n extends vh{constructor(t,r,o,u,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.update=new g.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function fT(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===n0?t=u:function YR(n){return Object.getPrototypeOf(n.constructor)===wp}(u)?r=u:o=u}),o||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function hT(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function rD(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(g.Y36(ps,13),g.Y36(Bi,10),g.Y36(_h,10),g.Y36(Ju,10),g.Y36(DT,8))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[g._Bn([lN]),g.qOj,g.TTD]}),n})(),Ip=(()=>{class n{constructor(){this._validator=eD}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):eD,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n,features:[g.TTD]}),n})();const vN={provide:Bi,useExisting:(0,g.Gpc)(()=>l0),multi:!0};let l0=(()=>{class n extends Ip{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function mN(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>DS}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&g.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[g._Bn([vN]),g.qOj]}),n})(),IM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[oM]]}),n})(),CN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[IM]}),n})(),DM=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:DT,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[IM]}),n})(),bM=(()=>{class n{group(t,r=null){const o=this._reduceControls(t);let m,u=null,d=null;return null!=r&&(function TN(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(u=null!=r.validators?r.validators:null,d=null!=r.asyncValidators?r.asyncValidators:null,m=null!=r.updateOn?r.updateOn:void 0):(u=null!=r.validator?r.validator:null,d=null!=r.asyncValidator?r.asyncValidator:null)),new cD(o,{asyncValidators:d,updateOn:m,validators:u})}control(t,r,o){return new ET(t,r,o)}array(t,r,o){const u=t.map(d=>this._createControl(d));return new eM(u,r,o)}_reduceControls(t){const r={};return Object.keys(t).forEach(o=>{r[o]=this._createControl(t[o])}),r}_createControl(t){return _T(t)||lD(t)||YS(t)?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:DM}),n})(),AN=(()=>{class n{constructor(t,r,o){this.postService=t,this.formBuilder=r,this.router=o,this.postForm=this.formBuilder.group({title:[""],content:[""],author:[""]})}ngOnInit(){}onSubmit(){this.postService.createPost(this.postForm.value),this.router.navigate([""])}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(rT),g.Y36(bM),g.Y36(Xn))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-create"]],decls:17,vars:2,consts:[["novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"form-label"],["formControlName","title","type","text","required","",1,"form-control"],["formControlName","content","type","text","required","",1,"form-control"],["formControlName","author","type","text","required","",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(t,r){1&t&&(g.TgZ(0,"h2"),g._uU(1,"Crear elementos"),g.qZA(),g.TgZ(2,"form",0),g.NdJ("ngSubmit",function(){return r.onSubmit()}),g.TgZ(3,"div",1)(4,"label",2),g._uU(5,"T\xedtulo"),g.qZA(),g._UZ(6,"input",3),g.qZA(),g.TgZ(7,"div",1)(8,"label",2),g._uU(9,"Contenido"),g.qZA(),g._UZ(10,"input",4),g.qZA(),g.TgZ(11,"div",1)(12,"label",2),g._uU(13,"Autor"),g.qZA(),g._UZ(14,"input",5),g.qZA(),g.TgZ(15,"button",6),g._uU(16,"Guardar"),g.qZA()()),2&t&&(g.xp6(2),g.Q6J("formGroup",r.postForm),g.xp6(13),g.Q6J("disabled",!r.postForm.valid))},directives:[IT,uT,u0,n0,aT,dD,l0],styles:[""]}),n})(),SN=(()=>{class n{constructor(t,r,o,u){this.postService=t,this.formBuilder=r,this.activeRoute=o,this.router=u,this.editForm=this.formBuilder.group({title:[""],content:[""],author:[""]})}ngOnInit(){const t=this.activeRoute.snapshot.paramMap.get("id");this.postService.getPostById(t).subscribe(r=>{this.postRef=r,this.editForm=this.formBuilder.group({title:[this.postRef.title],content:[this.postRef.content],author:[this.postRef.author]})})}onSubmit(){const t=this.activeRoute.snapshot.paramMap.get("id");this.postService.updatePost(this.editForm.value,t),this.router.navigate([""])}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(rT),g.Y36(bM),g.Y36(Ea),g.Y36(Xn))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-edit"]],decls:17,vars:1,consts:[["novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"form-label"],["formControlName","title","type","text","required","",1,"form-control"],["formControlName","content","type","text","required","",1,"form-control"],["formControlName","author","type","text","required","",1,"form-control"],["type","submit",1,"btn","btn-primary"]],template:function(t,r){1&t&&(g.TgZ(0,"h2"),g._uU(1,"Editar datos"),g.qZA(),g.TgZ(2,"form",0),g.NdJ("ngSubmit",function(){return r.onSubmit()}),g.TgZ(3,"div",1)(4,"label",2),g._uU(5,"T\xedtulo"),g.qZA(),g._UZ(6,"input",3),g.qZA(),g.TgZ(7,"div",1)(8,"label",2),g._uU(9,"Contenido"),g.qZA(),g._UZ(10,"input",4),g.qZA(),g.TgZ(11,"div",1)(12,"label",2),g._uU(13,"Autor"),g.qZA(),g._UZ(14,"input",5),g.qZA(),g.TgZ(15,"button",6),g._uU(16,"Actualizar"),g.qZA()()),2&t&&(g.xp6(2),g.Q6J("formGroup",r.editForm))},directives:[IT,uT,u0,n0,aT,dD,l0],styles:[""]}),n})();function MN(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"tr")(1,"td"),g._uU(2),g.qZA(),g.TgZ(3,"td"),g._uU(4),g.qZA(),g.TgZ(5,"td"),g._uU(6),g.qZA(),g.TgZ(7,"td")(8,"button",5),g._UZ(9,"i",6),g.qZA(),g.TgZ(10,"button",7),g.NdJ("click",function(){const u=g.CHM(t).$implicit;return g.oxw().deleteRow(u)}),g._UZ(11,"i",8),g.qZA()()()}if(2&n){const t=e.$implicit;g.xp6(2),g.Oqu(t.title),g.xp6(2),g.Oqu(t.content),g.xp6(2),g.Oqu(t.author),g.xp6(2),g.MGl("routerLink","/edit/",t.id,"")}}const xN=[{path:"",component:(()=>{class n{constructor(t){this.postService=t,this.deleteRow=r=>this.postService.deletePost(r)}ngOnInit(){this.postService.getPosts().subscribe(t=>{this.Posts=t.map(r=>Object.assign({id:r.payload.doc.id},r.payload.doc.data()))})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(rT))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-show"]],decls:18,vars:1,consts:[[1,"d-grip","gap-2","mt-4"],["routerLink","/create","type","button",1,"btn","btn-primary","mb-2"],[1,"table","table-hover","table-striped"],[1,"bg-gradient","text-white"],[4,"ngFor","ngForOf"],[1,"btn","btn-outline-secondary","mx-2",3,"routerLink"],[1,"fa-solid","fa-pencil"],[1,"btn","btn-outline-danger","mx-2",3,"click"],[1,"fa-solid","fa-trash-can"]],template:function(t,r){1&t&&(g.TgZ(0,"h2"),g._uU(1,"Tabla con los datos"),g.qZA(),g.TgZ(2,"div",0)(3,"a",1),g._uU(4,"Crear"),g.qZA()(),g.TgZ(5,"table",2)(6,"thead",3)(7,"tr")(8,"th"),g._uU(9,"T\xedtulo"),g.qZA(),g.TgZ(10,"th"),g._uU(11,"Contenido"),g.qZA(),g.TgZ(12,"th"),g._uU(13,"Autor"),g.qZA(),g.TgZ(14,"th"),g._uU(15,"Acciones"),g.qZA()()(),g.TgZ(16,"tbody"),g.YNc(17,MN,12,4,"tr",4),g.qZA()()),2&t&&(g.xp6(17),g.Q6J("ngForOf",r.Posts))},directives:[bu,Vn,Dd],styles:[".bg-gradient[_ngcontent-%COMP%]{background:linear-gradient(to right,#606c88,#3f4c6b)!important}"]}),n})()},{path:"create",component:AN},{path:"edit/:id",component:SN}];let RN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[D0.forRoot(xN)],D0]}),n})(),NN=(()=>{class n{constructor(){this.title="crud_daw"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-root"]],decls:8,vars:0,consts:[[1,"container"],[1,"row","align-items-md-stretch"],[1,"col-md-12"],[1,"h-100","p-4","text-white","bg-gradient","rounded-3","text-center"],["src","../assets/img/angular.png","width","100","height","100"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3"),g._uU(5,"CRUD Angular + Firebase"),g.qZA(),g._UZ(6,"img",4),g.qZA()()(),g._UZ(7,"router-outlet"),g.qZA())},directives:[xl],styles:[".bg-gradient[_ngcontent-%COMP%]{background:linear-gradient(to right,#606c88,#3f4c6b)!important}"]}),n})();const CM_firebaseConfig={apiKey:"AIzaSyC4qlPVT7vo9So3SiR6vb107JqURBUI3Nc",authDomain:"crud-angular-235b5.firebaseapp.com",projectId:"crud-angular-235b5",storageBucket:"crud-angular-235b5.appspot.com",messagingSenderId:"749515066147",appId:"1:749515066147:web:d347a20d1df1819c5f1a96"};let ON=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n,bootstrap:[NN]}),n.\u0275inj=g.cJS({providers:[],imports:[[da,RN,ks.hO.initializeApp(CM_firebaseConfig),IR,xR,CN,DM]]}),n})();(0,g.G48)(),iu().bootstrapModule(ON).catch(n=>console.error(n))},5867:(Je,Ee,O)=>{O.d(Ee,{C6:()=>g.getApps,Mq:()=>g.getApp});var g=O(9681);(0,g.registerVersion)("firebase","9.8.1","app")},127:(Je,Ee,O)=>{O.d(Ee,{Z:()=>g.Z});var g=O(3942);g.Z.registerVersion("firebase","9.8.1","app-compat")},7092:(Je,Ee,O)=>{O.r(Ee);var g=O(5861),Q=O(3942),P=O(2090),oe=O(9681),ne=O(655),pe=O(1877),ae=O(4859);const Re=function He(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ve=function Ae(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},he=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ge=new pe.Yd("@firebase/auth");function Ke(y,...h){Ge.logLevel<=pe.in.ERROR&&Ge.error(`Auth (${oe.SDK_VERSION}): ${y}`,...h)}function Ce(y,...h){throw Ue(y,...h)}function ve(y,...h){return Ue(y,...h)}function we(y,h,p){const v=Object.assign(Object.assign({},Ve()),{[h]:p});return new P.LL("auth","Firebase",v).create(h,{appName:y.name})}function Be(y,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&Ce(y,"argument-error"),we(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ue(y,...h){if("string"!=typeof y){const p=h[0],v=[...h.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(p,...v)}return he.create(y,...h)}function B(y,h,...p){if(!y)throw Ue(h,...p)}function _e(y){const h="INTERNAL ASSERTION FAILED: "+y;throw Ke(h),new Error(h)}function W(y,h){y||_e(h)}const re=new Map;function J(y){W(y instanceof Function,"Expected a class definition");let h=re.get(y);return h?(W(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,re.set(y,h),h)}function Ne(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function ot(){return"http:"===Pt()||"https:"===Pt()}function Pt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class zt{constructor(h,p){this.shortDelay=h,this.longDelay=p,W(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function Rt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ot()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function fn(y,h){W(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class Zt{static initialize(h,p,v){this.fetchImpl=h,p&&(this.headersImpl=p),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void _e("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void _e("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void _e("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ht={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},vr=new zt(3e4,6e4);function Bt(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function Mt(y,h,p,v){return $i.apply(this,arguments)}function $i(){return($i=(0,g.Z)(function*(y,h,p,v,T={}){return zr(y,T,(0,g.Z)(function*(){let x={},q={};v&&("GET"===h?q=v:x={body:JSON.stringify(v)});const ce=(0,P.xO)(Object.assign({key:y.config.apiKey},q)).slice(1),ke=yield y._getAdditionalHeaders();return ke["Content-Type"]="application/json",y.languageCode&&(ke["X-Firebase-Locale"]=y.languageCode),Zt.fetch()(gs(y,y.config.apiHost,p,ce),Object.assign({method:h,headers:ke,referrerPolicy:"no-referrer"},x))}))})).apply(this,arguments)}function zr(y,h,p){return rr.apply(this,arguments)}function rr(){return(rr=(0,g.Z)(function*(y,h,p){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},Ht),h);try{const T=new Wr(y),x=yield Promise.race([p(),T.promise]);T.clearNetworkTimeout();const q=yield x.json();if("needConfirmation"in q)throw Ei(y,"account-exists-with-different-credential",q);if(x.ok&&!("errorMessage"in q))return q;{const ce=x.ok?q.errorMessage:q.error.message,[ke,Qe]=ce.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ke)throw Ei(y,"credential-already-in-use",q);if("EMAIL_EXISTS"===ke)throw Ei(y,"email-already-in-use",q);const lt=v[ke]||ke.toLowerCase().replace(/[_\s]+/g,"-");if(Qe)throw we(y,lt,Qe);Ce(y,lt)}}catch(T){if(T instanceof P.ZR)throw T;Ce(y,"network-request-failed")}})).apply(this,arguments)}function Er(y,h,p,v){return vi.apply(this,arguments)}function vi(){return(vi=(0,g.Z)(function*(y,h,p,v,T={}){const x=yield Mt(y,h,p,v,T);return"mfaPendingCredential"in x&&Ce(y,"multi-factor-auth-required",{_serverResponse:x}),x})).apply(this,arguments)}function gs(y,h,p,v){const T=`${h}${p}?${v}`;return y.config.emulator?fn(y.config,T):`${y.config.apiScheme}://${T}`}class Wr{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,v)=>{this.timer=setTimeout(()=>v(ve(this.auth,"network-request-failed")),vr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ei(y,h,p){const v={appName:y.name};p.email&&(v.email=p.email),p.phoneNumber&&(v.phoneNumber=p.phoneNumber);const T=ve(y,h,v);return T.customData._tokenResponse=p,T}function Kr(){return(Kr=(0,g.Z)(function*(y,h){return Mt(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function ln(y,h){return pn.apply(this,arguments)}function pn(){return(pn=(0,g.Z)(function*(y,h){return Mt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function js(y,h){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,g.Z)(function*(y,h){return Mt(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Ln(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function Io(){return(Io=(0,g.Z)(function*(y,h=!1){const p=(0,P.m9)(y),v=yield p.getIdToken(h),T=rt(v);B(T&&T.exp&&T.auth_time&&T.iat,p.auth,"internal-error");const x="object"==typeof T.firebase?T.firebase:void 0,q=null==x?void 0:x.sign_in_provider;return{claims:T,token:v,authTime:Ln(kt(T.auth_time)),issuedAtTime:Ln(kt(T.iat)),expirationTime:Ln(kt(T.exp)),signInProvider:q||null,signInSecondFactor:(null==x?void 0:x.sign_in_second_factor)||null}})).apply(this,arguments)}function kt(y){return 1e3*Number(y)}function rt(y){const[h,p,v]=y.split(".");if(void 0===h||void 0===p||void 0===v)return Ke("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,P.tV)(p);return T?JSON.parse(T):(Ke("Failed to decode base64 JWT payload"),null)}catch(T){return Ke("Caught error parsing JWT payload as JSON",T),null}}function ir(y,h){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,g.Z)(function*(y,h,p=!1){if(p)return h;try{return yield h}catch(v){throw v instanceof P.ZR&&Nt(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}function Nt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class $s{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const T=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const v=this.getInterval(h);this.timerId=setTimeout((0,g.Z)(function*(){yield p.iteration()}),v)}iteration(){var h=this;return(0,g.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p.code&&h.schedule(!0))}h.schedule()})()}}class sr{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ln(this.lastLoginAt),this.creationTime=Ln(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function or(y){return L.apply(this,arguments)}function L(){return(L=(0,g.Z)(function*(y){var h;const p=y.auth,v=yield y.getIdToken(),T=yield ir(y,js(p,{idToken:v}));B(null==T?void 0:T.users.length,p,"internal-error");const x=T.users[0];y._notifyReloadListener(x);const q=(null===(h=x.providerUserInfo)||void 0===h?void 0:h.length)?$(x.providerUserInfo):[],ce=be(y.providerData,q),lt=!!y.isAnonymous&&!(y.email&&x.passwordHash||(null==ce?void 0:ce.length)),ut={uid:x.localId,displayName:x.displayName||null,photoURL:x.photoUrl||null,email:x.email||null,emailVerified:x.emailVerified||!1,phoneNumber:x.phoneNumber||null,tenantId:x.tenantId||null,providerData:ce,metadata:new sr(x.createdAt,x.lastLoginAt),isAnonymous:lt};Object.assign(y,ut)})).apply(this,arguments)}function G(){return(G=(0,g.Z)(function*(y){const h=(0,P.m9)(y);yield or(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function be(y,h){return[...y.filter(v=>!h.some(T=>T.providerId===v.providerId)),...h]}function $(y){return y.map(h=>{var{providerId:p}=h,v=(0,ne._T)(h,["providerId"]);return{providerId:p,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function Me(){return(Me=(0,g.Z)(function*(y,h){const p=yield zr(y,{},(0,g.Z)(function*(){const v=(0,P.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:T,apiKey:x}=y.config,q=gs(y,T,"/v1/token",`key=${x}`),ce=yield y._getAdditionalHeaders();return ce["Content-Type"]="application/x-www-form-urlencoded",Zt.fetch()(q,{method:"POST",headers:ce,body:v})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class Ye{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){B(h.idToken,"internal-error"),B(void 0!==h.idToken,"internal-error"),B(void 0!==h.refreshToken,"internal-error");const p="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function mt(y){const h=rt(y);return B(h,"internal-error"),B(void 0!==h.exp,"internal-error"),B(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var v=this;return(0,g.Z)(function*(){return B(!v.accessToken||v.refreshToken,h,"user-token-expired"),p||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(h,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var v=this;return(0,g.Z)(function*(){const{accessToken:T,refreshToken:x,expiresIn:q}=yield function Y(y,h){return Me.apply(this,arguments)}(h,p);v.updateTokensAndExpiration(T,x,Number(q))})()}updateTokensAndExpiration(h,p,v){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(h,p){const{refreshToken:v,accessToken:T,expirationTime:x}=p,q=new Ye;return v&&(B("string"==typeof v,"internal-error",{appName:h}),q.refreshToken=v),T&&(B("string"==typeof T,"internal-error",{appName:h}),q.accessToken=T),x&&(B("number"==typeof x,"internal-error",{appName:h}),q.expirationTime=x),q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Ye,this.toJSON())}_performRefresh(){return _e("not implemented")}}function ct(y,h){B("string"==typeof y||void 0===y,"internal-error",{appName:h})}class vt{constructor(h){var{uid:p,auth:v,stsTokenManager:T}=h,x=(0,ne._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $s(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=v,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=x.displayName||null,this.email=x.email||null,this.emailVerified=x.emailVerified||!1,this.phoneNumber=x.phoneNumber||null,this.photoURL=x.photoURL||null,this.isAnonymous=x.isAnonymous||!1,this.tenantId=x.tenantId||null,this.providerData=x.providerData?[...x.providerData]:[],this.metadata=new sr(x.createdAt||void 0,x.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,g.Z)(function*(){const v=yield ir(p,p.stsTokenManager.getToken(p.auth,h));return B(v,p.auth,"internal-error"),p.accessToken!==v&&(p.accessToken=v,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),v})()}getIdTokenResult(h){return function oi(y){return Io.apply(this,arguments)}(this,h)}reload(){return function H(y){return G.apply(this,arguments)}(this)}_assign(h){this!==h&&(B(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new vt(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){B(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var v=this;return(0,g.Z)(function*(){let T=!1;h.idToken&&h.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(h),T=!0),p&&(yield or(v)),yield v.auth._persistUserIfCurrent(v),T&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var h=this;return(0,g.Z)(function*(){const p=yield h.getIdToken();return yield ir(h,function ht(y,h){return Kr.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var v,T,x,q,ce,ke,Qe,lt;const ut=null!==(v=p.displayName)&&void 0!==v?v:void 0,yn=null!==(T=p.email)&&void 0!==T?T:void 0,ti=null!==(x=p.phoneNumber)&&void 0!==x?x:void 0,Du=null!==(q=p.photoURL)&&void 0!==q?q:void 0,qh=null!==(ce=p.tenantId)&&void 0!==ce?ce:void 0,eg=null!==(ke=p._redirectEventId)&&void 0!==ke?ke:void 0,Ta=null!==(Qe=p.createdAt)&&void 0!==Qe?Qe:void 0,Fl=null!==(lt=p.lastLoginAt)&&void 0!==lt?lt:void 0,{uid:Id,emailVerified:tg,isAnonymous:Xn,providerData:zh,stsTokenManager:Wh}=p;B(Id&&Wh,h,"internal-error");const Dd=Ye.fromJSON(this.name,Wh);B("string"==typeof Id,h,"internal-error"),ct(ut,h.name),ct(yn,h.name),B("boolean"==typeof tg,h,"internal-error"),B("boolean"==typeof Xn,h,"internal-error"),ct(ti,h.name),ct(Du,h.name),ct(qh,h.name),ct(eg,h.name),ct(Ta,h.name),ct(Fl,h.name);const bu=new vt({uid:Id,auth:h,email:yn,emailVerified:tg,displayName:ut,isAnonymous:Xn,photoURL:Du,phoneNumber:ti,tenantId:qh,stsTokenManager:Dd,createdAt:Ta,lastLoginAt:Fl});return zh&&Array.isArray(zh)&&(bu.providerData=zh.map(Cu=>Object.assign({},Cu))),eg&&(bu._redirectEventId=eg),bu}static _fromIdTokenResponse(h,p,v=!1){return(0,g.Z)(function*(){const T=new Ye;T.updateFromServerResponse(p);const x=new vt({uid:p.localId,auth:h,stsTokenManager:T,isAnonymous:v});return yield or(x),x})()}}const yt=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(p,v){var T=this;return(0,g.Z)(function*(){T.storage[p]=v})()}_get(p){var v=this;return(0,g.Z)(function*(){const T=v.storage[p];return void 0===T?null:T})()}_remove(p){var v=this;return(0,g.Z)(function*(){delete v.storage[p]})()}_addListener(p,v){}_removeListener(p,v){}}return y.type="NONE",y})();function Cn(y,h,p){return`firebase:${y}:${h}:${p}`}class wr{constructor(h,p,v){this.persistence=h,this.auth=p,this.userKey=v;const{config:T,name:x}=this.auth;this.fullUserKey=Cn(this.userKey,T.apiKey,x),this.fullPersistenceKey=Cn("persistence",T.apiKey,x),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,g.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?vt._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,g.Z)(function*(){if(p.persistence===h)return;const v=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,v?p.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,v="authUser"){return(0,g.Z)(function*(){if(!p.length)return new wr(J(yt),h,v);const T=(yield Promise.all(p.map(function(){var Qe=(0,g.Z)(function*(lt){if(yield lt._isAvailable())return lt});return function(lt){return Qe.apply(this,arguments)}}()))).filter(Qe=>Qe);let x=T[0]||J(yt);const q=Cn(v,h.config.apiKey,h.name);let ce=null;for(const Qe of p)try{const lt=yield Qe._get(q);if(lt){const ut=vt._fromJSON(h,lt);Qe!==x&&(ce=ut),x=Qe;break}}catch(lt){}const ke=T.filter(Qe=>Qe._shouldAllowMigration);return x._shouldAllowMigration&&ke.length?(x=ke[0],ce&&(yield x._set(q,ce.toJSON())),yield Promise.all(p.map(function(){var Qe=(0,g.Z)(function*(lt){if(lt!==x)try{yield lt._remove(q)}catch(ut){}});return function(lt){return Qe.apply(this,arguments)}}())),new wr(x,h,v)):new wr(x,h,v)})()}}function za(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Tn(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(ta(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Hi(h))return"Blackberry";if(An(h))return"Webos";if(Wa(h))return"Safari";if((h.includes("chrome/")||na(h))&&!h.includes("edge/"))return"Chrome";if(Ir(h))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function ta(y=(0,P.z$)()){return/firefox\//i.test(y)}function Wa(y=(0,P.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function na(y=(0,P.z$)()){return/crios\//i.test(y)}function Tn(y=(0,P.z$)()){return/iemobile/i.test(y)}function Ir(y=(0,P.z$)()){return/android/i.test(y)}function Hi(y=(0,P.z$)()){return/blackberry/i.test(y)}function An(y=(0,P.z$)()){return/webos/i.test(y)}function Pr(y=(0,P.z$)()){return/iphone|ipad|ipod/i.test(y)}function ms(y=(0,P.z$)()){return Pr(y)||Ir(y)||An(y)||Hi(y)||/windows phone/i.test(y)||Tn(y)}function Do(y,h=[]){let p;switch(y){case"Browser":p=za((0,P.z$)());break;case"Worker":p=`${za((0,P.z$)())}-${y}`;break;default:p=y}const v=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${oe.SDK_VERSION}/${v}`}class kr{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,p){const v=x=>new Promise((q,ce)=>{try{q(h(x))}catch(ke){ce(ke)}});v.onAbort=p,this.queue.push(v);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(h){var p=this;return(0,g.Z)(function*(){if(p.auth.currentUser===h)return;const v=[];try{for(const T of p.queue)yield T(h),T.onAbort&&v.push(T.onAbort)}catch(T){v.reverse();for(const x of v)try{x()}catch(q){}throw p.auth._errorFactory.create("login-blocked",{originalMessage:T.message})}})()}}class qe{constructor(h,p,v){this.app=h,this.heartbeatServiceProvider=p,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wt(this),this.idTokenSubscription=new Wt(this),this.beforeStateQueue=new kr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=he,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(h,p){var v=this;return p&&(this._popupRedirectResolver=J(p)),this._initializationPromise=this.queue((0,g.Z)(function*(){var T,x;if(!v._deleted&&(v.persistenceManager=yield wr.create(v,h),!v._deleted)){if(null===(T=v._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(q){}yield v.initializeCurrentUser(p),v.lastNotifiedUid=(null===(x=v.currentUser)||void 0===x?void 0:x.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,g.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p,!0)}})()}initializeCurrentUser(h){var p=this;return(0,g.Z)(function*(){var v;const T=yield p.assertedPersistence.getCurrentUser();let x=T,q=!1;if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const ce=null===(v=p.redirectUser)||void 0===v?void 0:v._redirectEventId,ke=null==x?void 0:x._redirectEventId,Qe=yield p.tryRedirectSignIn(h);(!ce||ce===ke)&&(null==Qe?void 0:Qe.user)&&(x=Qe.user,q=!0)}if(!x)return p.directlySetCurrentUser(null);if(!x._redirectEventId){if(q)try{yield p.beforeStateQueue.runMiddleware(x)}catch(ce){x=T,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(ce))}return x?p.reloadAndSetCurrentUserOrClear(x):p.directlySetCurrentUser(null)}return B(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===x._redirectEventId?p.directlySetCurrentUser(x):p.reloadAndSetCurrentUserOrClear(x)})()}tryRedirectSignIn(h){var p=this;return(0,g.Z)(function*(){let v=null;try{v=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch(T){yield p._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,g.Z)(function*(){try{yield or(h)}catch(v){if("auth/network-request-failed"!==v.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function ze(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,g.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,g.Z)(function*(){const v=h?(0,P.m9)(h):null;return v&&B(v.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(v&&v._clone(p))})()}_updateCurrentUser(h,p=!1){var v=this;return(0,g.Z)(function*(){if(!v._deleted)return h&&B(v.tenantId===h.tenantId,v,"tenant-id-mismatch"),p||(yield v.beforeStateQueue.runMiddleware(h)),v.queue((0,g.Z)(function*(){yield v.directlySetCurrentUser(h),v.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,g.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var p=this;return this.queue((0,g.Z)(function*(){yield p.assertedPersistence.setPersistence(J(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new P.LL("auth","Firebase",h())}onAuthStateChanged(h,p,v){return this.registerStateListener(this.authStateSubscription,h,p,v)}beforeAuthStateChanged(h,p){return this.beforeStateQueue.pushCallback(h,p)}onIdTokenChanged(h,p,v){return this.registerStateListener(this.idTokenSubscription,h,p,v)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var v=this;return(0,g.Z)(function*(){const T=yield v.getOrInitRedirectPersistenceManager(p);return null===h?T.removeCurrentUser():T.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,g.Z)(function*(){if(!p.redirectPersistenceManager){const v=h&&J(h)||p._popupRedirectResolver;B(v,p,"argument-error"),p.redirectPersistenceManager=yield wr.create(p,[J(v._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,g.Z)(function*(){var v,T;return p._isInitialized&&(yield p.queue((0,g.Z)(function*(){}))),(null===(v=p._currentUser)||void 0===v?void 0:v._redirectEventId)===h?p._currentUser:(null===(T=p.redirectUser)||void 0===T?void 0:T._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,g.Z)(function*(){if(h===p.currentUser)return p.queue((0,g.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,v,T){if(this._deleted)return()=>{};const x="function"==typeof p?p:p.next.bind(p),q=this._isInitialized?Promise.resolve():this._initializationPromise;return B(q,this,"internal-error"),q.then(()=>x(this.currentUser)),"function"==typeof p?h.addObserver(p,v,T):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,g.Z)(function*(){p.currentUser&&p.currentUser!==h&&(p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh()),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return B(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Do(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,g.Z)(function*(){var p;const v={"X-Client-Version":h.clientVersion};h.app.options.appId&&(v["X-Firebase-gmpid"]=h.app.options.appId);const T=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return T&&(v["X-Firebase-Client"]=T),v})()}}function st(y){return(0,P.m9)(y)}class Wt{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,P.ne)(p=>this.observer=p)}get next(){return B(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function wi(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function Ii(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class ai{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return _e("not implemented")}_getIdTokenResponse(h){return _e("not implemented")}_linkToIdToken(h,p){return _e("not implemented")}_getReauthenticationResolver(h){return _e("not implemented")}}function gn(y,h){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,g.Z)(function*(y,h){return Mt(y,"POST","/v1/accounts:resetPassword",Bt(y,h))})).apply(this,arguments)}function ia(y,h){return ys.apply(this,arguments)}function ys(){return(ys=(0,g.Z)(function*(y,h){return Mt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Ka(y,h){return _s.apply(this,arguments)}function _s(){return(_s=(0,g.Z)(function*(y,h){return Mt(y,"POST","/v1/accounts:update",Bt(y,h))})).apply(this,arguments)}function Gs(){return(Gs=(0,g.Z)(function*(y,h){return Er(y,"POST","/v1/accounts:signInWithPassword",Bt(y,h))})).apply(this,arguments)}function vs(y,h){return ar.apply(this,arguments)}function ar(){return(ar=(0,g.Z)(function*(y,h){return Mt(y,"POST","/v1/accounts:sendOobCode",Bt(y,h))})).apply(this,arguments)}function Yt(y,h){return Za.apply(this,arguments)}function Za(){return(Za=(0,g.Z)(function*(y,h){return vs(y,h)})).apply(this,arguments)}function sa(y,h){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,g.Z)(function*(y,h){return vs(y,h)})).apply(this,arguments)}function Di(y,h){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,g.Z)(function*(y,h){return vs(y,h)})).apply(this,arguments)}function Sc(y,h){return bi.apply(this,arguments)}function bi(){return(bi=(0,g.Z)(function*(y,h){return vs(y,h)})).apply(this,arguments)}function Xu(){return(Xu=(0,g.Z)(function*(y,h){return Er(y,"POST","/v1/accounts:signInWithEmailLink",Bt(y,h))})).apply(this,arguments)}function Mc(){return(Mc=(0,g.Z)(function*(y,h){return Er(y,"POST","/v1/accounts:signInWithEmailLink",Bt(y,h))})).apply(this,arguments)}class ur extends ai{constructor(h,p,v,T=null){super("password",v),this._email=h,this._password=p,this._tenantId=T}static _fromEmailAndPassword(h,p){return new ur(h,p,"password")}static _fromEmailAndCode(h,p,v=null){return new ur(h,p,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if((null==p?void 0:p.email)&&(null==p?void 0:p.password)){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,g.Z)(function*(){switch(p.signInMethod){case"password":return function Vn(y,h){return Gs.apply(this,arguments)}(h,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function Ci(y,h){return Xu.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:Ce(h,"internal-error")}})()}_linkToIdToken(h,p){var v=this;return(0,g.Z)(function*(){switch(v.signInMethod){case"password":return ia(h,{idToken:p,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function Dp(y,h){return Mc.apply(this,arguments)}(h,{idToken:p,email:v._email,oobCode:v._password});default:Ce(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Es(y,h){return xc.apply(this,arguments)}function xc(){return(xc=(0,g.Z)(function*(y,h){return Er(y,"POST","/v1/accounts:signInWithIdp",Bt(y,h))})).apply(this,arguments)}class Gi extends ai{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new Gi(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):Ce("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:T}=p,x=(0,ne._T)(p,["providerId","signInMethod"]);if(!v||!T)return null;const q=new Gi(v,T);return q.idToken=x.idToken||void 0,q.accessToken=x.accessToken||void 0,q.secret=x.secret,q.nonce=x.nonce,q.pendingToken=x.pendingToken||null,q}_getIdTokenResponse(h){return Es(h,this.buildRequest())}_linkToIdToken(h,p){const v=this.buildRequest();return v.idToken=p,Es(h,v)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Es(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,P.xO)(p)}return h}}function Cp(y,h){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,g.Z)(function*(y,h){return Mt(y,"POST","/v1/accounts:sendVerificationCode",Bt(y,h))})).apply(this,arguments)}function ws(){return(ws=(0,g.Z)(function*(y,h){return Er(y,"POST","/v1/accounts:signInWithPhoneNumber",Bt(y,h))})).apply(this,arguments)}function Nc(){return(Nc=(0,g.Z)(function*(y,h){const p=yield Er(y,"POST","/v1/accounts:signInWithPhoneNumber",Bt(y,h));if(p.temporaryProof)throw Ei(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Ap={USER_NOT_FOUND:"user-not-found"};function Oc(){return(Oc=(0,g.Z)(function*(y,h){return Er(y,"POST","/v1/accounts:signInWithPhoneNumber",Bt(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Ap)})).apply(this,arguments)}class bo extends ai{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new bo({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new bo({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function el(y,h){return ws.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function Tp(y,h){return Nc.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function Sp(y,h){return Oc.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:v,verificationCode:T}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:v,code:T}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:v,phoneNumber:T,temporaryProof:x}=h;return v||p||T||x?new bo({verificationId:p,verificationCode:v,phoneNumber:T,temporaryProof:x}):null}}class Qa{constructor(h){var p,v,T,x,q,ce;const ke=(0,P.zd)((0,P.pd)(h)),Qe=null!==(p=ke.apiKey)&&void 0!==p?p:null,lt=null!==(v=ke.oobCode)&&void 0!==v?v:null,ut=function Eh(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=ke.mode)&&void 0!==T?T:null);B(Qe&&lt&&ut,"argument-error"),this.apiKey=Qe,this.operation=ut,this.code=lt,this.continueUrl=null!==(x=ke.continueUrl)&&void 0!==x?x:null,this.languageCode=null!==(q=ke.languageCode)&&void 0!==q?q:null,this.tenantId=null!==(ce=ke.tenantId)&&void 0!==ce?ce:null}static parseLink(h){const p=function oa(y){const h=(0,P.zd)((0,P.pd)(y)).link,p=h?(0,P.zd)((0,P.pd)(h)).deep_link_id:null,v=(0,P.zd)((0,P.pd)(y)).deep_link_id;return(v?(0,P.zd)((0,P.pd)(v)).link:null)||v||p||h||y}(h);try{return new Qa(p)}catch(v){return null}}}let kc=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,v){return ur._fromEmailAndPassword(p,v)}static credentialWithLink(p,v){const T=Qa.parseLink(v);return B(T,"argument-error"),ur._fromEmailAndCode(p,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class lr{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class qs extends lr{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Ti extends qs{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return B("providerId"in p&&"signInMethod"in p,"argument-error"),Gi._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return B(h.idToken||h.accessToken,"argument-error"),Gi._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Ti.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Ti.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:v,oauthTokenSecret:T,pendingToken:x,nonce:q,providerId:ce}=h;if(!v&&!T&&!p&&!x||!ce)return null;try{return new Ti(ce)._credential({idToken:p,accessToken:v,nonce:q,pendingToken:x})}catch(ke){return null}}}let Co=(()=>{class y extends qs{constructor(){super("facebook.com")}static credential(p){return Gi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch(v){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Fc=(()=>{class y extends qs{constructor(){super("google.com"),this.addScope("profile")}static credential(p,v){return Gi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:v,oauthAccessToken:T}=p;if(!v&&!T)return null;try{return y.credential(v,T)}catch(x){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),wh=(()=>{class y extends qs{constructor(){super("github.com")}static credential(p){return Gi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch(v){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class zs extends ai{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return Es(h,this.buildRequest())}_linkToIdToken(h,p){const v=this.buildRequest();return v.idToken=p,Es(h,v)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Es(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:T,pendingToken:x}=p;return v&&T&&x&&v===T?new zs(v,x):null}static _create(h,p){return new zs(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Dr extends lr{constructor(h){B(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Dr.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Dr.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=zs.fromJSON(h);return B(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:v}=h;if(!p||!v)return null;try{return zs._create(v,p)}catch(T){return null}}}let Vc=(()=>{class y extends qs{constructor(){super("twitter.com")}static credential(p,v){return Gi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:v,oauthTokenSecret:T}=p;if(!v||!T)return null;try{return y.credential(v,T)}catch(x){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function br(y,h){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,g.Z)(function*(y,h){return Er(y,"POST","/v1/accounts:signUp",Bt(y,h))})).apply(this,arguments)}class Qr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,v,T=!1){return(0,g.Z)(function*(){const x=yield vt._fromIdTokenResponse(h,v,T),q=tl(v);return new Qr({user:x,providerId:q,_tokenResponse:v,operationType:p})})()}static _forOperation(h,p,v){return(0,g.Z)(function*(){yield h._updateTokensIfNecessary(v,!0);const T=tl(v);return new Qr({user:h,providerId:T,_tokenResponse:v,operationType:p})})()}}function tl(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function nl(){return(nl=(0,g.Z)(function*(y){var h;const p=st(y);if(yield p._initializationPromise,null===(h=p.currentUser)||void 0===h?void 0:h.isAnonymous)return new Qr({user:p.currentUser,providerId:null,operationType:"signIn"});const v=yield br(p,{returnSecureToken:!0}),T=yield Qr._fromIdTokenResponse(p,"signIn",v,!0);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class So extends P.ZR{constructor(h,p,v,T){var x;super(p.code,p.message),this.operationType=v,this.user=T,Object.setPrototypeOf(this,So.prototype),this.customData={appName:h.name,tenantId:null!==(x=h.tenantId)&&void 0!==x?x:void 0,_serverResponse:p.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(h,p,v,T){return new So(h,p,v,T)}}function rl(y,h,p,v){return("reauthenticate"===h?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(x=>{throw"auth/multi-factor-auth-required"===x.code?So._fromErrorAndOperation(y,x,h,v):x})}function Ai(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function Qt(){return(Qt=(0,g.Z)(function*(y,h){const p=(0,P.m9)(y);yield Gt(!0,p,h);const{providerUserInfo:v}=yield ln(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),T=Ai(v||[]);return p.providerData=p.providerData.filter(x=>T.has(x.providerId)),T.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function aa(y,h){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,g.Z)(function*(y,h,p=!1){const v=yield ir(y,h._linkToIdToken(y.auth,yield y.getIdToken()),p);return Qr._forOperation(y,"link",v)})).apply(this,arguments)}function Gt(y,h,p){return ua.apply(this,arguments)}function ua(){return(ua=(0,g.Z)(function*(y,h,p){yield or(h);const T=!1===y?"provider-already-linked":"no-such-provider";B(Ai(h.providerData).has(p)===y,h.auth,T)})).apply(this,arguments)}function Ja(y,h){return Is.apply(this,arguments)}function Is(){return(Is=(0,g.Z)(function*(y,h,p=!1){const{auth:v}=y,T="reauthenticate";try{const x=yield ir(y,rl(v,T,h,y),p);B(x.idToken,v,"internal-error");const q=rt(x.idToken);B(q,v,"internal-error");const{sub:ce}=q;return B(y.uid===ce,v,"user-mismatch"),Qr._forOperation(y,T,x)}catch(x){throw"auth/user-not-found"===(null==x?void 0:x.code)&&Ce(v,"user-mismatch"),x}})).apply(this,arguments)}function zn(y,h){return il.apply(this,arguments)}function il(){return(il=(0,g.Z)(function*(y,h,p=!1){const v="signIn",T=yield rl(y,v,h),x=yield Qr._fromIdTokenResponse(y,v,T);return p||(yield y._updateCurrentUser(x.user)),x})).apply(this,arguments)}function on(y,h){return Si.apply(this,arguments)}function Si(){return(Si=(0,g.Z)(function*(y,h){return zn(st(y),h)})).apply(this,arguments)}function Wn(y,h){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,g.Z)(function*(y,h){const p=(0,P.m9)(y);return yield Gt(!1,p,h.providerId),aa(p,h)})).apply(this,arguments)}function qi(y,h){return la.apply(this,arguments)}function la(){return(la=(0,g.Z)(function*(y,h){return Ja((0,P.m9)(y),h)})).apply(this,arguments)}function ui(y,h){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,g.Z)(function*(y,h){return Er(y,"POST","/v1/accounts:signInWithCustomToken",Bt(y,h))})).apply(this,arguments)}function ft(){return(ft=(0,g.Z)(function*(y,h){const p=st(y),v=yield ui(p,{token:h,returnSecureToken:!0}),T=yield Qr._fromIdTokenResponse(p,"signIn",v);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class Ds{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?sl._fromServerResponse(h,p):Ce(h,"internal-error")}}class sl extends Ds{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new sl(p)}}function ca(y,h,p){var v;B((null===(v=p.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),B(void 0===p.dynamicLinkDomain||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(B(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(B(p.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function Xa(){return(Xa=(0,g.Z)(function*(y,h,p){const v=(0,P.m9)(y),T={requestType:"PASSWORD_RESET",email:h};p&&ca(v,T,p),yield sa(v,T)})).apply(this,arguments)}function al(){return(al=(0,g.Z)(function*(y,h,p){yield gn((0,P.m9)(y),{oobCode:h,newPassword:p})})).apply(this,arguments)}function Te(){return(Te=(0,g.Z)(function*(y,h){yield Ka((0,P.m9)(y),{oobCode:h})})).apply(this,arguments)}function xt(y,h){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,g.Z)(function*(y,h){const p=(0,P.m9)(y),v=yield gn(p,{oobCode:h}),T=v.requestType;switch(B(T,p,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":B(v.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":B(v.mfaInfo,p,"internal-error");default:B(v.email,p,"internal-error")}let x=null;return v.mfaInfo&&(x=Ds._fromServerResponse(st(p),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:x},operation:T}})).apply(this,arguments)}function tu(){return(tu=(0,g.Z)(function*(y,h){const{data:p}=yield xt((0,P.m9)(y),h);return p.email})).apply(this,arguments)}function Jr(){return(Jr=(0,g.Z)(function*(y,h,p){const v=st(y),T=yield br(v,{returnSecureToken:!0,email:h,password:p}),x=yield Qr._fromIdTokenResponse(v,"signIn",T);return yield v._updateCurrentUser(x.user),x})).apply(this,arguments)}function cl(){return(cl=(0,g.Z)(function*(y,h,p){const v=(0,P.m9)(y),T={requestType:"EMAIL_SIGNIN",email:h};B(p.handleCodeInApp,v,"argument-error"),p&&ca(v,T,p),yield Di(v,T)})).apply(this,arguments)}function zi(){return(zi=(0,g.Z)(function*(y,h,p){const v=(0,P.m9)(y),T=kc.credentialWithLink(h,p||Ne());return B(T._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),on(v,T)})).apply(this,arguments)}function cr(y,h){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,g.Z)(function*(y,h){return Mt(y,"POST","/v1/accounts:createAuthUri",Bt(y,h))})).apply(this,arguments)}function bs(){return(bs=(0,g.Z)(function*(y,h){const v={identifier:h,continueUri:ot()?Ne():"http://localhost"},{signinMethods:T}=yield cr((0,P.m9)(y),v);return T||[]})).apply(this,arguments)}function dl(){return(dl=(0,g.Z)(function*(y,h){const p=(0,P.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&ca(p.auth,T,h);const{email:x}=yield Yt(p.auth,T);x!==y.email&&(yield y.reload())})).apply(this,arguments)}function iu(){return(iu=(0,g.Z)(function*(y,h,p){const v=(0,P.m9)(y),x={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};p&&ca(v.auth,x,p);const{email:q}=yield Sc(v.auth,x);q!==y.email&&(yield y.reload())})).apply(this,arguments)}function hl(y,h){return da.apply(this,arguments)}function da(){return(da=(0,g.Z)(function*(y,h){return Mt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function ou(){return(ou=(0,g.Z)(function*(y,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const v=(0,P.m9)(y),x={idToken:yield v.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},q=yield ir(v,hl(v.auth,x));v.displayName=q.displayName||null,v.photoURL=q.photoUrl||null;const ce=v.providerData.find(({providerId:ke})=>"password"===ke);ce&&(ce.displayName=v.displayName,ce.photoURL=v.photoURL),yield v._updateTokensIfNecessary(q)})).apply(this,arguments)}function au(y,h,p){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,g.Z)(function*(y,h,p){const{auth:v}=y,x={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(x.email=h),p&&(x.password=p);const q=yield ir(y,ia(v,x));yield y._updateTokensIfNecessary(q,!0)})).apply(this,arguments)}class No{constructor(h,p,v={}){this.isNewUser=h,this.providerId=p,this.profile=v}}class Gc extends No{constructor(h,p,v,T){super(h,p,v),this.username=T}}class uu extends No{constructor(h,p){super(h,"facebook.com",p)}}class Vr extends Gc{constructor(h,p){super(h,"github.com",p,"string"==typeof(null==p?void 0:p.login)?null==p?void 0:p.login:null)}}class Dh extends No{constructor(h,p){super(h,"google.com",p)}}class fl extends Gc{constructor(h,p,v){super(h,"twitter.com",p,v)}}function Un(y){const{user:h,_tokenResponse:p}=y;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function Hc(y){var h,p;if(!y)return null;const{providerId:v}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},x=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&(null==y?void 0:y.idToken)){const q=null===(p=null===(h=rt(y.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(q)return new No(x,"anonymous"!==q&&"custom"!==q?q:null)}if(!v)return null;switch(v){case"facebook.com":return new uu(x,T);case"github.com":return new Vr(x,T);case"google.com":return new Dh(x,T);case"twitter.com":return new fl(x,T,y.screenName||null);case"custom":case"anonymous":return new No(x,null);default:return new No(x,v,T)}}(p)}class Wi{constructor(h,p){this.type=h,this.credential=p}static _fromIdtoken(h){return new Wi("enroll",h)}static _fromMfaPendingCredential(h){return new Wi("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,v;if(null==h?void 0:h.multiFactorSession){if(null===(p=h.multiFactorSession)||void 0===p?void 0:p.pendingCredential)return Wi._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(v=h.multiFactorSession)||void 0===v?void 0:v.idToken)return Wi._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Js{constructor(h,p,v){this.session=h,this.hints=p,this.signInResolver=v}static _fromError(h,p){const v=st(h),T=p.customData._serverResponse,x=(T.mfaInfo||[]).map(ce=>Ds._fromServerResponse(v,ce));B(T.mfaPendingCredential,v,"internal-error");const q=Wi._fromMfaPendingCredential(T.mfaPendingCredential);return new Js(q,x,function(){var ce=(0,g.Z)(function*(ke){const Qe=yield ke._process(v,q);delete T.mfaInfo,delete T.mfaPendingCredential;const lt=Object.assign(Object.assign({},T),{idToken:Qe.idToken,refreshToken:Qe.refreshToken});switch(p.operationType){case"signIn":const ut=yield Qr._fromIdTokenResponse(v,p.operationType,lt);return yield v._updateCurrentUser(ut.user),ut;case"reauthenticate":return B(p.user,v,"internal-error"),Qr._forOperation(p.user,p.operationType,lt);default:Ce(v,"internal-error")}});return function(ke){return ce.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,g.Z)(function*(){return p.signInResolver(h)})()}}function zc(y,h){return Mt(y,"POST","/v2/accounts/mfaEnrollment:start",Bt(y,h))}class Oo{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(v=>Ds._fromServerResponse(h.auth,v)))})}static _fromUser(h){return new Oo(h)}getSession(){var h=this;return(0,g.Z)(function*(){return Wi._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,p){var v=this;return(0,g.Z)(function*(){const T=h,x=yield v.getSession(),q=yield ir(v.user,T._process(v.user.auth,x,p));return yield v.user._updateTokensIfNecessary(q),v.user.reload()})()}unenroll(h){var p=this;return(0,g.Z)(function*(){const v="string"==typeof h?h:h.uid,T=yield p.user.getIdToken(),x=yield ir(p.user,function Xs(y,h){return Mt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Bt(y,h))}(p.user.auth,{idToken:T,mfaEnrollmentId:v}));p.enrolledFactors=p.enrolledFactors.filter(({uid:q})=>q!==v),yield p.user._updateTokensIfNecessary(x);try{yield p.user.reload()}catch(q){if("auth/user-token-expired"!==q.code)throw q}})()}}const lu=new WeakMap,Ki="__sak";class cu{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(Ki,"1"),this.storage.removeItem(Ki),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Cr=(()=>{class y extends cu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,v)=>this.onStorageEvent(p,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Op(){const y=(0,P.z$)();return Wa(y)||Pr(y)}()&&function qn(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=ms(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const v of Object.keys(this.listeners)){const T=this.storage.getItem(v),x=this.localCache[v];T!==x&&p(v,x,T)}}onStorageEvent(p,v=!1){if(!p.key)return void this.forAllChangedKeys((ce,ke,Qe)=>{this.notifyListeners(ce,Qe)});const T=p.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ce=this.storage.getItem(T);if(p.newValue!==ce)null!==p.newValue?this.storage.setItem(T,p.newValue):this.storage.removeItem(T);else if(this.localCache[T]===p.newValue&&!v)return}const x=()=>{const ce=this.storage.getItem(T);!v&&this.localCache[T]===ce||this.notifyListeners(T,ce)},q=this.storage.getItem(T);!function ra(){return(0,P.w1)()&&10===document.documentMode}()||q===p.newValue||p.newValue===p.oldValue?x():setTimeout(x,10)}notifyListeners(p,v){this.localCache[p]=v;const T=this.listeners[p];if(T)for(const x of Array.from(T))x(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,v,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:v,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,v){var T=()=>super._set,x=this;return(0,g.Z)(function*(){yield T().call(x,p,v),x.localCache[p]=JSON.stringify(v)})()}_get(p){var v=()=>super._get,T=this;return(0,g.Z)(function*(){const x=yield v().call(T,p);return T.localCache[p]=JSON.stringify(x),x})()}_remove(p){var v=()=>super._remove,T=this;return(0,g.Z)(function*(){yield v().call(T,p),delete T.localCache[p]})()}}return y.type="LOCAL",y})(),Mn=(()=>{class y extends cu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,v){}_removeListener(p,v){}}return y.type="SESSION",y})();let Wc=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const v=this.receivers.find(x=>x.isListeningto(p));if(v)return v;const T=new y(p);return this.receivers.push(T),T}isListeningto(p){return this.eventTarget===p}handleEvent(p){var v=this;return(0,g.Z)(function*(){const T=p,{eventId:x,eventType:q,data:ce}=T.data,ke=v.handlersMap[q];if(!(null==ke?void 0:ke.size))return;T.ports[0].postMessage({status:"ack",eventId:x,eventType:q});const Qe=Array.from(ke).map(function(){var ut=(0,g.Z)(function*(yn){return yn(T.origin,ce)});return function(yn){return ut.apply(this,arguments)}}()),lt=yield function pa(y){return Promise.all(y.map(function(){var h=(0,g.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(v){return{fulfilled:!1,reason:v}}});return function(p){return h.apply(this,arguments)}}()))}(Qe);T.ports[0].postMessage({status:"done",eventId:x,eventType:q,response:lt})})()}_subscribe(p,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(v)}_unsubscribe(p,v){this.handlersMap[p]&&v&&this.handlersMap[p].delete(v),(!v||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Po(y="",h=10){let p="";for(let v=0;v<h;v++)p+=Math.floor(10*Math.random());return y+p}class Cs{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,v=50){var T=this;return(0,g.Z)(function*(){const x="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!x)throw new Error("connection_unavailable");let q,ce;return new Promise((ke,Qe)=>{const lt=Po("",20);x.port1.start();const ut=setTimeout(()=>{Qe(new Error("unsupported_event"))},v);ce={messageChannel:x,onMessage(yn){const ti=yn;if(ti.data.eventId===lt)switch(ti.data.status){case"ack":clearTimeout(ut),q=setTimeout(()=>{Qe(new Error("timeout"))},3e3);break;case"done":clearTimeout(q),ke(ti.data.response);break;default:clearTimeout(ut),clearTimeout(q),Qe(new Error("invalid_response"))}}},T.handlers.add(ce),x.port1.addEventListener("message",ce.onMessage),T.target.postMessage({eventType:h,eventId:lt,data:p},[x.port2])}).finally(()=>{ce&&T.removeMessageHandler(ce)})})()}}function mn(){return window}function xi(){return void 0!==mn().WorkerGlobalScope&&"function"==typeof mn().importScripts}function Kc(){return(Kc=(0,g.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const gl="firebaseLocalStorageDb",As="firebaseLocalStorage",ko="fbase_key";class eo{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function Zn(y,h){return y.transaction([As],h?"readwrite":"readonly").objectStore(As)}function no(){const y=indexedDB.open(gl,1);return new Promise((h,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore(As,{keyPath:ko})}catch(T){p(T)}}),y.addEventListener("success",(0,g.Z)(function*(){const v=y.result;v.objectStoreNames.contains(As)?h(v):(v.close(),yield function to(){const y=indexedDB.deleteDatabase(gl);return new eo(y).toPromise()}(),h(yield no()))}))})}function Fo(y,h,p){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,g.Z)(function*(y,h,p){const v=Zn(y,!0).put({[ko]:h,value:p});return new eo(v).toPromise()})).apply(this,arguments)}function Ms(){return(Ms=(0,g.Z)(function*(y,h){const p=Zn(y,!1).get(h),v=yield new eo(p).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function Vo(y,h){const p=Zn(y,!0).delete(h);return new eo(p).toPromise()}const ro=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,g.Z)(function*(){return p.db||(p.db=yield no()),p.db})()}_withRetries(p){var v=this;return(0,g.Z)(function*(){let T=0;for(;;)try{const x=yield v._openDb();return yield p(x)}catch(x){if(T++>3)throw x;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,g.Z)(function*(){return xi()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,g.Z)(function*(){p.receiver=Wc._getInstance(function pl(){return xi()?self:null}()),p.receiver._subscribe("keyChanged",function(){var v=(0,g.Z)(function*(T,x){return{keyProcessed:(yield p._poll()).includes(x.key)}});return function(T,x){return v.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var v=(0,g.Z)(function*(T,x){return["keyChanged"]});return function(T,x){return v.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,g.Z)(function*(){var v,T;if(p.activeServiceWorker=yield function It(){return Kc.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Cs(p.activeServiceWorker);const x=yield p.sender._send("ping",{},800);!x||(null===(v=x[0])||void 0===v?void 0:v.fulfilled)&&(null===(T=x[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var v=this;return(0,g.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function Zc(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:p},v.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const p=yield no();return yield Fo(p,Ki,"1"),yield Vo(p,Ki),!0}catch(p){}return!1})()}_withPendingWrite(p){var v=this;return(0,g.Z)(function*(){v.pendingWrites++;try{yield p()}finally{v.pendingWrites--}})()}_set(p,v){var T=this;return(0,g.Z)(function*(){return T._withPendingWrite((0,g.Z)(function*(){return yield T._withRetries(x=>Fo(x,p,v)),T.localCache[p]=v,T.notifyServiceWorker(p)}))})()}_get(p){var v=this;return(0,g.Z)(function*(){const T=yield v._withRetries(x=>function Lo(y,h){return Ms.apply(this,arguments)}(x,p));return v.localCache[p]=T,T})()}_remove(p){var v=this;return(0,g.Z)(function*(){return v._withPendingWrite((0,g.Z)(function*(){return yield v._withRetries(T=>Vo(T,p)),delete v.localCache[p],v.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,g.Z)(function*(){const v=yield p._withRetries(q=>{const ce=Zn(q,!1).getAll();return new eo(ce).toPromise()});if(!v)return[];if(0!==p.pendingWrites)return[];const T=[],x=new Set;for(const{fbase_key:q,value:ce}of v)x.add(q),JSON.stringify(p.localCache[q])!==JSON.stringify(ce)&&(p.notifyListeners(q,ce),T.push(q));for(const q of Object.keys(p.localCache))p.localCache[q]&&!x.has(q)&&(p.notifyListeners(q,null),T.push(q));return T})()}notifyListeners(p,v){this.localCache[p]=v;const T=this.listeners[p];if(T)for(const x of Array.from(T))x(v)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Yn(y,h){return Mt(y,"POST","/v2/accounts/mfaSignIn:start",Bt(y,h))}function xn(){return(xn=(0,g.Z)(function*(y){return(yield Mt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function so(y){return new Promise((h,p)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=h,v.onerror=T=>{const x=ve("internal-error");x.customData=T,p(x)},v.type="text/javascript",v.charset="UTF-8",function io(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(v)})}function Yi(y){return`__${y}${Math.floor(1e6*Math.random())}`}const di=1e12;class Rn{constructor(h){this.auth=h,this.counter=di,this._widgets=new Map}render(h,p){const v=this.counter;return this._widgets.set(v,new Ni(h,this.auth.name,p||{})),this.counter++,v}reset(h){var p;const v=h||di;null===(p=this._widgets.get(v))||void 0===p||p.delete(),this._widgets.delete(v)}getResponse(h){var p;return(null===(p=this._widgets.get(h||di))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,g.Z)(function*(){var v;return null===(v=p._widgets.get(h||di))||void 0===v||v.execute(),""})()}}class Ni{constructor(h,p,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof h?document.getElementById(h):h;B(T,"argument-error",{appName:p}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function du(y){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<y;v++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const _l=Yi("rcb"),cn=new zt(3e4,6e4);class zm{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!mn().grecaptcha}load(h,p=""){return B(function Uo(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),h,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(mn().grecaptcha):new Promise((v,T)=>{const x=mn().setTimeout(()=>{T(ve(h,"network-request-failed"))},cn.get());mn()[_l]=()=>{mn().clearTimeout(x),delete mn()[_l];const ce=mn().grecaptcha;if(!ce)return void T(ve(h,"internal-error"));const ke=ce.render;ce.render=(Qe,lt)=>{const ut=ke(Qe,lt);return this.counter++,ut},this.hostLanguage=p,v(ce)},so(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:_l,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(x),T(ve(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){return!!mn().grecaptcha&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ur{load(h){return(0,g.Z)(function*(){return new Rn(h)})()}clearedOneInstance(){}}const Yc="recaptcha",Rs={theme:"light",type:"image"};class Qc{constructor(h,p=Object.assign({},Rs),v){this.parameters=p,this.type=Yc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=st(v),this.isInvisible="invisible"===this.parameters.size,B("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof h?document.getElementById(h):h;B(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ur:new zm,this.validateStartingState()}verify(){var h=this;return(0,g.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),v=h.getAssertedRecaptcha();return v.getResponse(p)||new Promise(x=>{const q=ce=>{!ce||(h.tokenChangeListeners.delete(q),x(ce))};h.tokenChangeListeners.add(q),h.isInvisible&&v.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){B(!this.parameters.sitekey,this.auth,"argument-error"),B(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),B("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(v=>v(p)),"function"==typeof h)h(p);else if("string"==typeof h){const v=mn()[h];"function"==typeof v&&v(p)}}}assertNotDestroyed(){B(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,g.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const v=document.createElement("div");p.appendChild(v),p=v}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,g.Z)(function*(){B(ot()&&!xi(),h.auth,"internal-error"),yield function Qi(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function xs(y){return xn.apply(this,arguments)}(h.auth);B(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return B(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class vl{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=bo._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function ma(){return(ma=(0,g.Z)(function*(y,h,p){const v=st(y),T=yield Ar(v,h,(0,P.m9)(p));return new vl(T,x=>on(v,x))})).apply(this,arguments)}function Jc(){return(Jc=(0,g.Z)(function*(y,h,p){const v=(0,P.m9)(y);yield Gt(!1,v,"phone");const T=yield Ar(v.auth,h,(0,P.m9)(p));return new vl(T,x=>Wn(v,x))})).apply(this,arguments)}function Tr(){return(Tr=(0,g.Z)(function*(y,h,p){const v=(0,P.m9)(y),T=yield Ar(v.auth,h,(0,P.m9)(p));return new vl(T,x=>qi(v,x))})).apply(this,arguments)}function Ar(y,h,p){return ya.apply(this,arguments)}function ya(){return(ya=(0,g.Z)(function*(y,h,p){var v;const T=yield p.verify();try{let x;if(B("string"==typeof T,y,"argument-error"),B(p.type===Yc,y,"argument-error"),x="string"==typeof h?{phoneNumber:h}:h,"session"in x){const q=x.session;if("phoneNumber"in x)return B("enroll"===q.type,y,"internal-error"),(yield zc(y,{idToken:q.credential,phoneEnrollmentInfo:{phoneNumber:x.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{B("signin"===q.type,y,"internal-error");const ce=(null===(v=x.multiFactorHint)||void 0===v?void 0:v.uid)||x.multiFactorUid;return B(ce,y,"missing-multi-factor-info"),(yield Yn(y,{mfaPendingCredential:q.credential,mfaEnrollmentId:ce,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:q}=yield Cp(y,{phoneNumber:x.phoneNumber,recaptchaToken:T});return q}}finally{p._reset()}})).apply(this,arguments)}function Ji(){return(Ji=(0,g.Z)(function*(y,h){yield aa((0,P.m9)(y),h)})).apply(this,arguments)}let Ns=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=st(p)}verifyPhoneNumber(p,v){return Ar(this.auth,p,(0,P.m9)(v))}static credential(p,v){return bo._fromVerification(p,v)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:v,temporaryProof:T}=p;return v&&T?bo._fromTokenResponse(v,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Xi(y,h){return h?J(h):(B(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class jo extends ai{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Es(h,this._buildIdpRequest())}_linkToIdToken(h,p){return Es(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return Es(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function Tt(y){return zn(y.auth,new jo(y),y.bypassAuthState)}function Xc(y){const{auth:h,user:p}=y;return B(p,h,"internal-error"),Ja(p,new jo(y),y.bypassAuthState)}function $o(y){return dr.apply(this,arguments)}function dr(){return(dr=(0,g.Z)(function*(y){const{auth:h,user:p}=y;return B(p,h,"internal-error"),aa(p,new jo(y),y.bypassAuthState)})).apply(this,arguments)}class _a{constructor(h,p,v,T,x=!1){this.auth=h,this.resolver=v,this.user=T,this.bypassAuthState=x,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,g.Z)(function*(v,T){h.pendingPromise={resolve:v,reject:T};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(x){h.reject(x)}});return function(v,T){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,g.Z)(function*(){const{urlResponse:v,sessionId:T,postBody:x,tenantId:q,error:ce,type:ke}=h;if(ce)return void p.reject(ce);const Qe={auth:p.auth,requestUri:v,sessionId:T,tenantId:q||void 0,postBody:x||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(ke)(Qe))}catch(lt){p.reject(lt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Tt;case"linkViaPopup":case"linkViaRedirect":return $o;case"reauthViaPopup":case"reauthViaRedirect":return Xc;default:Ce(this.auth,"internal-error")}}resolve(h){W(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){W(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ho=new zt(2e3,1e4);function es(){return(es=(0,g.Z)(function*(y,h,p){const v=st(y);Be(y,h,lr);const T=Xi(v,p);return new td(v,"signInViaPopup",h,T).executeNotNull()})).apply(this,arguments)}function fu(){return(fu=(0,g.Z)(function*(y,h,p){const v=(0,P.m9)(y);Be(v.auth,h,lr);const T=Xi(v.auth,p);return new td(v.auth,"reauthViaPopup",h,T,v).executeNotNull()})).apply(this,arguments)}function Oi(){return(Oi=(0,g.Z)(function*(y,h,p){const v=(0,P.m9)(y);Be(v.auth,h,lr);const T=Xi(v.auth,p);return new td(v.auth,"linkViaPopup",h,T,v).executeNotNull()})).apply(this,arguments)}let td=(()=>{class y extends _a{constructor(p,v,T,x,q){super(p,v,x,q),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,g.Z)(function*(){const v=yield p.execute();return B(v,p.auth,"internal-error"),v})()}onExecution(){var p=this;return(0,g.Z)(function*(){W(1===p.filter.length,"Popup operations only handle one event");const v=Po();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],v),p.authWindow.associatedEvent=v,p.resolver._originValidation(p.auth).catch(T=>{p.reject(T)}),p.resolver._isIframeWebStorageSupported(p.auth,T=>{T||p.reject(ve(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var v,T;this.pollId=(null===(T=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(ve(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,Ho.get())};p()}}return y.currentPopupAction=null,y})();const hr=new Map;class El extends _a{constructor(h,p,v=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,v),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,g.Z)(function*(){let v=hr.get(p.auth._key());if(!v){try{const x=(yield function Ah(y,h){return Os.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;v=()=>Promise.resolve(x)}catch(T){v=()=>Promise.reject(T)}hr.set(p.auth._key(),v)}return p.bypassAuthState||hr.set(p.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,v=this;return(0,g.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(v,h);if("unknown"!==h.type){if(h.eventId){const T=yield v.auth._redirectUserForId(h.eventId);if(T)return v.user=T,p().call(v,h);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function Os(){return(Os=(0,g.Z)(function*(y,h){const p=F(h),v=M(y);if(!(yield v._isAvailable()))return!1;const T="true"===(yield v._get(p));return yield v._remove(p),T})).apply(this,arguments)}function Go(y,h){return va.apply(this,arguments)}function va(){return(va=(0,g.Z)(function*(y,h){return M(y)._set(F(h),"true")})).apply(this,arguments)}function b(y,h){hr.set(y._key(),h)}function M(y){return J(y._redirectPersistence)}function F(y){return Cn("pendingRedirect",y.config.apiKey,y.name)}function fe(){return(fe=(0,g.Z)(function*(y,h,p){const v=st(y);Be(y,h,lr);const T=Xi(v,p);return yield Go(T,v),T._openRedirect(v,h,"signInViaRedirect")})).apply(this,arguments)}function at(){return(at=(0,g.Z)(function*(y,h,p){const v=(0,P.m9)(y);Be(v.auth,h,lr);const T=Xi(v.auth,p);yield Go(T,v.auth);const x=yield fr(v);return T._openRedirect(v.auth,h,"reauthViaRedirect",x)})).apply(this,arguments)}function In(){return(In=(0,g.Z)(function*(y,h,p){const v=(0,P.m9)(y);Be(v.auth,h,lr);const T=Xi(v.auth,p);yield Gt(!1,v,h.providerId),yield Go(T,v.auth);const x=yield fr(v);return T._openRedirect(v.auth,h,"linkViaRedirect",x)})).apply(this,arguments)}function ts(){return(ts=(0,g.Z)(function*(y,h){return yield st(y)._initializationPromise,Pi(y,h,!1)})).apply(this,arguments)}function Pi(y,h){return fi.apply(this,arguments)}function fi(){return(fi=(0,g.Z)(function*(y,h,p=!1){const v=st(y),T=Xi(v,h),q=yield new El(v,T,p).execute();return q&&!p&&(delete q.user._redirectEventId,yield v._persistUserIfCurrent(q.user),yield v._setRedirectUser(null,h)),q})).apply(this,arguments)}function fr(y){return ns.apply(this,arguments)}function ns(){return(ns=(0,g.Z)(function*(y){const h=Po(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class wl{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(h,v)&&(p=!0,this.sendToConsumer(h,v),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function rd(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Il(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var v;if(h.error&&!Il(h)){const T=(null===(v=h.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";p.onError(ve(this.auth,T))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const v=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&v}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(nd(h))}saveEventToCache(h){this.cachedEventUids.add(nd(h)),this.lastProcessedEventTime=Date.now()}}function nd(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function Il({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===(null==h?void 0:h.code)}function Sh(y){return Mh.apply(this,arguments)}function Mh(){return(Mh=(0,g.Z)(function*(y,h={}){return Mt(y,"GET","/v1/projects",h)})).apply(this,arguments)}const id=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pu=/^https?/;function xh(){return(xh=(0,g.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield Sh(y);for(const p of h)try{if(h0(p))return}catch(v){}Ce(y,"unauthorized-domain")})).apply(this,arguments)}function h0(y){const h=Ne(),{protocol:p,hostname:v}=new URL(h);if(y.startsWith("chrome-extension://")){const q=new URL(y);return""===q.hostname&&""===v?"chrome-extension:"===p&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&q.hostname===v}if(!pu.test(p))return!1;if(id.test(y))return v===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(v)}const kp=new zt(3e4,6e4);function Rh(){const y=mn().___jsl;if(null==y?void 0:y.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let gu=null;function oo(y){return gu=gu||function Fp(y){return new Promise((h,p)=>{var v,T,x;function q(){Rh(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Rh(),p(ve(y,"network-request-failed"))},timeout:kp.get()})}if(null===(T=null===(v=mn().gapi)||void 0===v?void 0:v.iframes)||void 0===T?void 0:T.Iframe)h(gapi.iframes.getContext());else{if(!(null===(x=mn().gapi)||void 0===x?void 0:x.load)){const ce=Yi("iframefcb");return mn()[ce]=()=>{gapi.load?q():p(ve(y,"network-request-failed"))},so(`https://apis.google.com/js/api.js?onload=${ce}`).catch(ke=>p(ke))}q()}}).catch(h=>{throw gu=null,h})}(y),gu}const mu=new zt(5e3,15e3),yu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ea=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Lp(y){const h=y.config;B(h.authDomain,y,"auth-domain-config-required");const p=h.emulator?fn(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,v={apiKey:h.apiKey,appName:y.name,v:oe.SDK_VERSION},T=Ea.get(y.config.apiHost);T&&(v.eid=T);const x=y._getFrameworks();return x.length&&(v.fw=x.join(",")),`${p}?${(0,P.xO)(v).slice(1)}`}function ao(){return ao=(0,g.Z)(function*(y){const h=yield oo(y),p=mn().gapi;return B(p,y,"internal-error"),h.open({where:document.body,url:Lp(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yu,dontclear:!0},v=>new Promise(function(){var T=(0,g.Z)(function*(x,q){yield v.restyle({setHideOnLeave:!1});const ce=ve(y,"network-request-failed"),ke=mn().setTimeout(()=>{q(ce)},mu.get());function Qe(){mn().clearTimeout(ke),x(v)}v.ping(Qe).then(Qe,()=>{q(ce)})});return function(x,q){return T.apply(this,arguments)}}()))}),ao.apply(this,arguments)}const od={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Vp{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function pi(y,h,p,v,T,x){B(y.config.authDomain,y,"auth-domain-config-required"),B(y.config.apiKey,y,"invalid-api-key");const q={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:v,v:oe.SDK_VERSION,eventId:T};if(h instanceof lr){h.setDefaultLanguage(y.languageCode),q.providerId=h.providerId||"",(0,P.xb)(h.getCustomParameters())||(q.customParameters=JSON.stringify(h.getCustomParameters()));for(const[ke,Qe]of Object.entries(x||{}))q[ke]=Qe}if(h instanceof qs){const ke=h.getScopes().filter(Qe=>""!==Qe);ke.length>0&&(q.scopes=ke.join(","))}y.tenantId&&(q.tid=y.tenantId);const ce=q;for(const ke of Object.keys(ce))void 0===ce[ke]&&delete ce[ke];return`${function uo({config:y}){return y.emulator?fn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,P.xO)(ce).slice(1)}`}const Tl="webStorageSupport";class cd extends class p0{constructor(h){this.factorId=h}_process(h,p,v){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,v);case"signin":return this._finalizeSignIn(h,p.credential);default:return _e("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new cd(h)}_finalizeEnroll(h,p,v){return function Rp(y,h){return Mt(y,"POST","/v2/accounts/mfaEnrollment:finalize",Bt(y,h))}(h,{idToken:p,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function yl(y,h){return Mt(y,"POST","/v2/accounts/mfaSignIn:finalize",Bt(y,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let g0=(()=>{class y{constructor(){}static assertion(p){return cd._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var Oh="@firebase/auth";class jp{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,g.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(v=>{var T;h((null===(T=v)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);!p||(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){B(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function wa(){return window}function ki(){return(ki=(0,g.Z)(function*(y,h,p){var v;const{BuildInfo:T}=wa();W(h.sessionId,"AuthEvent did not contain a session ID");const x=yield m0(h.sessionId),q={};return Pr()?q.ibi=T.packageName:Ir()?q.apn=T.packageName:Ce(y,"operation-not-supported-in-this-environment"),T.displayName&&(q.appDisplayName=T.displayName),q.sessionId=x,pi(y,p,h.type,void 0,null!==(v=h.eventId)&&void 0!==v?v:void 0,q)})).apply(this,arguments)}function hd(){return(hd=(0,g.Z)(function*(y){const{BuildInfo:h}=wa(),p={};Pr()?p.iosBundleId=h.packageName:Ir()?p.androidPackageName=h.packageName:Ce(y,"operation-not-supported-in-this-environment"),yield Sh(y,p)})).apply(this,arguments)}function $p(){return($p=(0,g.Z)(function*(y,h,p){const{cordova:v}=wa();let T=()=>{};try{yield new Promise((x,q)=>{let ce=null;function ke(){var ut;x();const yn=null===(ut=v.plugins.browsertab)||void 0===ut?void 0:ut.close;"function"==typeof yn&&yn(),"function"==typeof(null==p?void 0:p.close)&&p.close()}function Qe(){ce||(ce=window.setTimeout(()=>{q(ve(y,"redirect-cancelled-by-user"))},2e3))}function lt(){"visible"===(null==document?void 0:document.visibilityState)&&Qe()}h.addPassiveListener(ke),document.addEventListener("resume",Qe,!1),Ir()&&document.addEventListener("visibilitychange",lt,!1),T=()=>{h.removePassiveListener(ke),document.removeEventListener("resume",Qe,!1),document.removeEventListener("visibilitychange",lt,!1),ce&&window.clearTimeout(ce)}})}finally{T()}})).apply(this,arguments)}function m0(y){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,g.Z)(function*(y){const h=kh(y),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function kh(y){if(W(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),p=new Uint8Array(h);for(let v=0;v<y.length;v++)p[v]=y.charCodeAt(v);return p}!function Qm(y){(0,oe._registerComponent)(new ae.wA("auth",(h,{options:p})=>{const v=h.getProvider("app").getImmediate(),T=h.getProvider("heartbeat"),{apiKey:x,authDomain:q}=v.options;return((ce,ke)=>{B(x&&!x.includes(":"),"invalid-api-key",{appName:ce.name}),B(!(null==q?void 0:q.includes(":")),"argument-error",{appName:ce.name});const Qe={apiKey:x,authDomain:q,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Do(y)},lt=new qe(ce,ke,Qe);return function se(y,h){const p=(null==h?void 0:h.persistence)||[],v=(Array.isArray(p)?p:[p]).map(J);(null==h?void 0:h.errorMap)&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(v,null==h?void 0:h.popupRedirectResolver)}(lt,p),lt})(v,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,v)=>{h.getProvider("auth-internal").initialize()})),(0,oe._registerComponent)(new ae.wA("auth-internal",h=>{const p=st(h.getProvider("auth").getImmediate());return new jp(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,oe.registerVersion)(Oh,"0.20.1",function dd(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,oe.registerVersion)(Oh,"0.20.1","esm2017")}("Browser");class pd extends wl{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,g.Z)(function*(){yield h.initPromise})()}}function vu(y){return xl.apply(this,arguments)}function xl(){return(xl=(0,g.Z)(function*(y){const h=yield Rl()._get(Eu(y));return h&&(yield Rl()._remove(Eu(y))),h})).apply(this,arguments)}function Gp(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const v=Math.floor(Math.random()*h.length);y.push(h.charAt(v))}return y.join("")}function Rl(){return J(Cr)}function Eu(y){return Cn("authEvent",y.config.apiKey,y.name)}function Br(y){if(!(null==y?void 0:y.includes("?")))return{};const[h,...p]=y.split("?");return(0,P.zd)(p.join("?"))}function Ia(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ve("no-auth-event")}}function Da(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function Kp(y=(0,P.z$)()){return!("file:"!==Da()&&"ionic:"!==Da()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Vh(){try{const y=self.localStorage,h=Po();if(y)return y.setItem(h,"1"),y.removeItem(h),!function yd(y=(0,P.z$)()){return function wu(){return(0,P.w1)()&&11===(null==document?void 0:document.documentMode)}()||function jn(y=(0,P.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,P.hl)()}catch(y){return _d()&&(0,P.hl)()}return!1}function _d(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Jn(){return(function Wp(){return"http:"===Da()||"https:"===Da()}()||(0,P.ru)()||Kp())&&!function Lh(){return(0,P.b$)()||(0,P.UG)()}()&&Vh()&&!_d()}function Iu(){return Kp()&&"undefined"!=typeof document}function Ol(){return(Ol=(0,g.Z)(function*(){return!!Iu()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const jr={LOCAL:"local",NONE:"none",SESSION:"session"},qo=B,Bh="persistence";function ba(y){return jh.apply(this,arguments)}function jh(){return(jh=(0,g.Z)(function*(y){yield y._initializationPromise;const h=vd(),p=Cn(Bh,y.config.apiKey,y.name);h&&h.setItem(p,y._getPersistence())})).apply(this,arguments)}function vd(){var y;try{return(null===(y=function iy(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(h){return null}}const oy=B;class Fi{constructor(){this.browserResolver=J(class Ym{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Mn,this._completeRedirectFn=Pi,this._overrideRedirectResult=b}_openPopup(h,p,v,T){var x=this;return(0,g.Z)(function*(){var q;W(null===(q=x.eventManagers[h._key()])||void 0===q?void 0:q.manager,"_initialize() not called before _openPopup()");const ce=pi(h,p,v,Ne(),T);return function Cl(y,h,p,v=500,T=600){const x=Math.max((window.screen.availHeight-T)/2,0).toString(),q=Math.max((window.screen.availWidth-v)/2,0).toString();let ce="";const ke=Object.assign(Object.assign({},od),{width:v.toString(),height:T.toString(),top:x,left:q}),Qe=(0,P.z$)().toLowerCase();p&&(ce=na(Qe)?"_blank":p),ta(Qe)&&(h=h||"http://localhost",ke.scrollbars="yes");const lt=Object.entries(ke).reduce((yn,[ti,Du])=>`${yn}${ti}=${Du},`,"");if(function Hs(y=(0,P.z$)()){var h;return Pr(y)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(Qe)&&"_self"!==ce)return function Wm(y,h){const p=document.createElement("a");p.href=y,p.target=h;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(v)}(h||"",ce),new Vp(null);const ut=window.open(h||"",ce,lt);B(ut,y,"popup-blocked");try{ut.focus()}catch(yn){}return new Vp(ut)}(h,ce,Po())})()}_openRedirect(h,p,v,T){var x=this;return(0,g.Z)(function*(){return yield x._originValidation(h),function Ts(y){mn().location.href=y}(pi(h,p,v,Ne(),T)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:T,promise:x}=this.eventManagers[p];return T?Promise.resolve(T):(W(x,"If manager is not set, promise should be"),x)}const v=this.initAndGetManager(h);return this.eventManagers[p]={promise:v},v.catch(()=>{delete this.eventManagers[p]}),v}initAndGetManager(h){var p=this;return(0,g.Z)(function*(){const v=yield function f0(y){return ao.apply(this,arguments)}(h),T=new wl(h);return v.register("authEvent",x=>(B(null==x?void 0:x.authEvent,h,"invalid-auth-event"),{status:T.onEvent(x.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:T},p.iframes[h._key()]=v,T})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(Tl,{type:Tl},T=>{var x;const q=null===(x=null==T?void 0:T[0])||void 0===x?void 0:x[Tl];void 0!==q&&p(!!q),Ce(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Dl(y){return xh.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return ms()||Wa()||Pr()}}),this.cordovaResolver=J(class qp{constructor(){this._redirectPersistence=Mn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Pi,this._overrideRedirectResult=b}_initialize(h){var p=this;return(0,g.Z)(function*(){const v=h._key();let T=p.eventManagers.get(v);return T||(T=new pd(h),p.eventManagers.set(v,T),p.attachCallbackListeners(h,T)),T})()}_openPopup(h){Ce(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,v,T){var x=this;return(0,g.Z)(function*(){!function _u(y){var h,p,v,T,x,q,ce,ke,Qe,lt;const ut=wa();B("function"==typeof(null===(h=null==ut?void 0:ut.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),B(void 0!==(null===(p=null==ut?void 0:ut.BuildInfo)||void 0===p?void 0:p.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),B("function"==typeof(null===(x=null===(T=null===(v=null==ut?void 0:ut.cordova)||void 0===v?void 0:v.plugins)||void 0===T?void 0:T.browsertab)||void 0===x?void 0:x.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),B("function"==typeof(null===(ke=null===(ce=null===(q=null==ut?void 0:ut.cordova)||void 0===q?void 0:q.plugins)||void 0===ce?void 0:ce.browsertab)||void 0===ke?void 0:ke.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),B("function"==typeof(null===(lt=null===(Qe=null==ut?void 0:ut.cordova)||void 0===Qe?void 0:Qe.InAppBrowser)||void 0===lt?void 0:lt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const q=yield x._initialize(h);yield q.initialized(),q.resetRedirect(),function D(){hr.clear()}(),yield x._originValidation(h);const ce=function gd(y,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:Gp(),postBody:null,tenantId:y.tenantId,error:ve(y,"no-auth-event")}}(h,v,T);yield function Hp(y,h){return Rl()._set(Eu(y),h)}(h,ce);const ke=yield function Ph(y,h,p){return ki.apply(this,arguments)}(h,ce,p),Qe=yield function fd(y){const{cordova:h}=wa();return new Promise(p=>{h.plugins.browsertab.isAvailable(v=>{let T=null;v?h.plugins.browsertab.openUrl(y):T=h.InAppBrowser.open(y,function Ac(y=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(T)})})}(ke);return function lo(y,h,p){return $p.apply(this,arguments)}(h,q,Qe)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Sl(y){return hd.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:v,handleOpenURL:T,BuildInfo:x}=wa(),q=setTimeout((0,g.Z)(function*(){yield vu(h),p.onEvent(Ia())}),500),ce=function(){var lt=(0,g.Z)(function*(ut){clearTimeout(q);const yn=yield vu(h);let ti=null;yn&&(null==ut?void 0:ut.url)&&(ti=function Xm(y,h){var p,v;const T=function Nl(y){const h=Br(y),p=h.link?decodeURIComponent(h.link):void 0,v=Br(p).link,T=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Br(T).link||T||v||p||y}(h);if(T.includes("/__/auth/callback")){const x=Br(T),q=x.firebaseError?function ey(y){try{return JSON.parse(y)}catch(h){return null}}(decodeURIComponent(x.firebaseError)):null,ce=null===(v=null===(p=null==q?void 0:q.code)||void 0===p?void 0:p.split("auth/"))||void 0===v?void 0:v[1],ke=ce?ve(ce):null;return ke?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:ke,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(yn,ut.url)),p.onEvent(ti||Ia())});return function(yn){return lt.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,ce);const ke=T,Qe=`${x.packageName.toLowerCase()}://`;wa().handleOpenURL=function(){var lt=(0,g.Z)(function*(ut){if(ut.toLowerCase().startsWith(Qe)&&ce({url:ut}),"function"==typeof ke)try{ke(ut)}catch(yn){console.error(yn)}});return function(ut){return lt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Mn,this._completeRedirectFn=Pi,this._overrideRedirectResult=b}_initialize(h){var p=this;return(0,g.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,v,T){var x=this;return(0,g.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openPopup(h,p,v,T)})()}_openRedirect(h,p,v,T){var x=this;return(0,g.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openRedirect(h,p,v,T)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Iu()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return oy(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,g.Z)(function*(){if(h.underlyingResolver)return;const p=yield function Uh(){return Ol.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function Ed(y){return y.unwrap()}function uy(y){return Zp(y)}function Zp(y){const{_tokenResponse:h}=y instanceof P.ZR?y.customData:y;if(!h)return null;if(!(y instanceof P.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Ns.credentialFromResult(y);const p=h.providerId;if(!p||"password"===p)return null;let v;switch(p){case"google.com":v=Fc;break;case"facebook.com":v=Co;break;case"github.com":v=wh;break;case"twitter.com":v=Vc;break;default:const{oauthIdToken:T,oauthAccessToken:x,oauthTokenSecret:q,pendingToken:ce,nonce:ke}=h;return x||q||T||ce?ce?p.startsWith("saml.")?zs._create(p,ce):Gi._fromParams({providerId:p,signInMethod:p,pendingToken:ce,idToken:T,accessToken:x}):new Ti(p).credential({idToken:T,accessToken:x,rawNonce:ke}):null}return y instanceof P.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function ei(y,h){return h.catch(p=>{throw p instanceof P.ZR&&function wd(y,h){var p;const v=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===h.code)h.resolver=new ly(y,function Sn(y,h){var p;const v=(0,P.m9)(y),T=h;return B(h.customData.operationType,v,"argument-error"),B(null===(p=T.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,v,"argument-error"),Js._fromError(v,T)}(y,h));else if(v){const T=Zp(h),x=h;T&&(x.credential=T,x.tenantId=v.tenantId||void 0,x.email=v.email||void 0,x.phoneNumber=v.phoneNumber||void 0)}}(y,p),p}).then(p=>{const T=p.user;return{operationType:p.operationType,credential:uy(p),additionalUserInfo:Un(p),user:rs.getOrCreate(T)}})}function $h(y,h){return Hh.apply(this,arguments)}function Hh(){return(Hh=(0,g.Z)(function*(y,h){const p=yield h;return{verificationId:p.verificationId,confirm:v=>ei(y,p.confirm(v))}})).apply(this,arguments)}class ly{constructor(h,p){this.resolver=p,this.auth=function ay(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return ei(Ed(this.auth),this.resolver.resolveSignIn(h))}}class rs{constructor(h){this._delegate=h,this.multiFactor=function Np(y){const h=(0,P.m9)(y);return lu.has(h)||lu.set(h,Oo._fromUser(h)),lu.get(h)}(h)}static getOrCreate(h){return rs.USER_MAP.has(h)||rs.USER_MAP.set(h,new rs(h)),rs.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,g.Z)(function*(){return ei(p.auth,Wn(p._delegate,h))})()}linkWithPhoneNumber(h,p){var v=this;return(0,g.Z)(function*(){return $h(v.auth,function hu(y,h,p){return Jc.apply(this,arguments)}(v._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,g.Z)(function*(){return ei(p.auth,function ed(y,h,p){return Oi.apply(this,arguments)}(p._delegate,h,Fi))})()}linkWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield ba(st(p.auth)),function Ft(y,h,p){return function Et(y,h,p){return In.apply(this,arguments)}(y,h,p)}(p._delegate,h,Fi)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,g.Z)(function*(){return ei(p.auth,qi(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return $h(this.auth,function Th(y,h,p){return Tr.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return ei(this.auth,function hi(y,h,p){return fu.apply(this,arguments)}(this._delegate,h,Fi))}reauthenticateWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield ba(st(p.auth)),function Ze(y,h,p){return function tt(y,h,p){return at.apply(this,arguments)}(y,h,p)}(p._delegate,h,Fi)})()}sendEmailVerification(h){return function li(y,h){return dl.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,g.Z)(function*(){return yield function Ih(y,h){return Qt.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function jc(y,h){return au((0,P.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function $c(y,h){return au((0,P.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function Bo(y,h){return Ji.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function su(y,h){return ou.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function ru(y,h,p){return iu.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}rs.USER_MAP=new WeakMap;const kl=B;let Yp=(()=>{class y{constructor(p,v){if(this.app=p,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=p.options;kl(T,"invalid-api-key",{appName:p.name}),kl(T,"invalid-api-key",{appName:p.name});const x="undefined"!=typeof window?Fi:void 0;this._delegate=v.initialize({options:{persistence:cy(T,p.name),popupRedirectResolver:x}}),this._delegate._updateErrorMap(Re),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?rs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,v){!function Fr(y,h,p){const v=st(y);B(v._canInitEmulator,v,"emulator-config-failed"),B(/^https?:\/\//.test(h),v,"invalid-emulator-scheme");const T=!!(null==p?void 0:p.disableWarnings),x=wi(h),{host:q,port:ce}=function vn(y){const h=wi(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!p)return{host:"",port:null};const v=p[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(v);if(T){const x=T[1];return{host:x,port:Ii(v.substr(x.length+1))}}{const[x,q]=v.split(":");return{host:x,port:Ii(q)}}}(h);v.config.emulator={url:`${x}//${q}${null===ce?"":`:${ce}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:q,port:ce,protocol:x.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function tn(){function y(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,v)}applyActionCode(p){return function xo(y,h){return Te.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return xt(this._delegate,p)}confirmPasswordReset(p,v){return function eu(y,h,p){return al.apply(this,arguments)}(this._delegate,p,v)}createUserWithEmailAndPassword(p,v){var T=this;return(0,g.Z)(function*(){return ei(T._delegate,function Zs(y,h,p){return Jr.apply(this,arguments)}(T._delegate,p,v))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function nu(y,h){return bs.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function Bc(y,h){const p=Qa.parseLink(h);return"EMAIL_SIGNIN"===(null==p?void 0:p.operation)}(0,p)}getRedirectResult(){var p=this;return(0,g.Z)(function*(){kl(Jn(),p._delegate,"operation-not-supported-in-this-environment");const v=yield function Bn(y,h){return ts.apply(this,arguments)}(p._delegate,Fi);return v?ei(p._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function zp(y,h){st(y)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,v,T){const{next:x,error:q,complete:ce}=Qp(p,v,T);return this._delegate.onAuthStateChanged(x,q,ce)}onIdTokenChanged(p,v,T){const{next:x,error:q,complete:ce}=Qp(p,v,T);return this._delegate.onIdTokenChanged(x,q,ce)}sendSignInLinkToEmail(p,v){return function ll(y,h,p){return cl.apply(this,arguments)}(this._delegate,p,v)}sendPasswordResetEmail(p,v){return function ol(y,h,p){return Xa.apply(this,arguments)}(this._delegate,p,v||void 0)}setPersistence(p){var v=this;return(0,g.Z)(function*(){let T;switch(function sy(y,h){qo(Object.values(jr).includes(h),y,"invalid-persistence-type"),(0,P.b$)()?qo(h!==jr.SESSION,y,"unsupported-persistence-type"):(0,P.UG)()?qo(h===jr.NONE,y,"unsupported-persistence-type"):_d()?qo(h===jr.NONE||h===jr.LOCAL&&(0,P.hl)(),y,"unsupported-persistence-type"):qo(h===jr.NONE||Vh(),y,"unsupported-persistence-type")}(v._delegate,p),p){case jr.SESSION:T=Mn;break;case jr.LOCAL:T=(yield J(ro)._isAvailable())?ro:Cr;break;case jr.NONE:T=yt;break;default:return Ce("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return ei(this._delegate,function Uc(y){return nl.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return ei(this._delegate,on(this._delegate,p))}signInWithCustomToken(p){return ei(this._delegate,function Mo(y,h){return ft.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,v){return ei(this._delegate,function ul(y,h,p){return on((0,P.m9)(y),kc.credential(h,p))}(this._delegate,p,v))}signInWithEmailLink(p,v){return ei(this._delegate,function Mp(y,h,p){return zi.apply(this,arguments)}(this._delegate,p,v))}signInWithPhoneNumber(p,v){return $h(this._delegate,function wn(y,h,p){return ma.apply(this,arguments)}(this._delegate,p,v))}signInWithPopup(p){var v=this;return(0,g.Z)(function*(){return kl(Jn(),v._delegate,"operation-not-supported-in-this-environment"),ei(v._delegate,function Pp(y,h,p){return es.apply(this,arguments)}(v._delegate,p,Fi))})()}signInWithRedirect(p){var v=this;return(0,g.Z)(function*(){return kl(Jn(),v._delegate,"operation-not-supported-in-this-environment"),yield ba(v._delegate),function K(y,h,p){return function te(y,h,p){return fe.apply(this,arguments)}(y,h,p)}(v._delegate,p,Fi)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function rn(y,h){return tu.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=jr,y})();function Qp(y,h,p){let v=y;"function"!=typeof y&&({next:v,error:h,complete:p}=y);const T=v;return{next:q=>T(q&&rs.getOrCreate(q)),error:h,complete:p}}function cy(y,h){const p=function Pl(y,h){const p=vd();if(!p)return[];const v=Cn(Bh,y,h);switch(p.getItem(v)){case jr.NONE:return[yt];case jr.LOCAL:return[ro,Mn];case jr.SESSION:return[Mn];default:return[]}}(y,h);if("undefined"!=typeof self&&!p.includes(ro)&&p.push(ro),"undefined"!=typeof window)for(const v of[Cr,Mn])p.includes(v)||p.push(v);return p.includes(yt)||p.push(yt),p}class Gh{constructor(){this.providerId="phone",this._delegate=new Ns(Ed(Q.Z.auth()))}static credential(h,p){return Ns.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}Gh.PHONE_SIGN_IN_METHOD=Ns.PHONE_SIGN_IN_METHOD,Gh.PROVIDER_ID=Ns.PROVIDER_ID;const Jp=B;class y0{constructor(h,p,v=Q.Z.app()){var T;Jp(null===(T=v.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new Qc(h,p,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ca(y){y.INTERNAL.registerComponent(new ae.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),v=h.getProvider("auth");return new Yp(p,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:kc,FacebookAuthProvider:Co,GithubAuthProvider:wh,GoogleAuthProvider:Fc,OAuthProvider:Ti,SAMLAuthProvider:Dr,PhoneAuthProvider:Gh,PhoneMultiFactorGenerator:g0,RecaptchaVerifier:y0,TwitterAuthProvider:Vc,Auth:Yp,AuthCredential:ai,Error:P.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.14")}(Q.Z)},8306:(Je,Ee,O)=>{O.d(Ee,{y:()=>j});var g=O(2961),Q=O(727),P=O(8822),oe=O(4671);var ae=O(2416),ie=O(576),ue=O(2806);let j=(()=>{class Ae{constructor(Ve){Ve&&(this._subscribe=Ve)}lift(Ve){const he=new Ae;return he.source=this,he.operator=Ve,he}subscribe(Ve,he,De){const Ge=function He(Ae){return Ae&&Ae instanceof g.Lv||function X(Ae){return Ae&&(0,ie.m)(Ae.next)&&(0,ie.m)(Ae.error)&&(0,ie.m)(Ae.complete)}(Ae)&&(0,Q.Nn)(Ae)}(Ve)?Ve:new g.Hp(Ve,he,De);return(0,ue.x)(()=>{const{operator:Ke,source:Ce}=this;Ge.add(Ke?Ke.call(Ge,Ce):Ce?this._subscribe(Ge):this._trySubscribe(Ge))}),Ge}_trySubscribe(Ve){try{return this._subscribe(Ve)}catch(he){Ve.error(he)}}forEach(Ve,he){return new(he=U(he))((De,Ge)=>{const Ke=new g.Hp({next:Ce=>{try{Ve(Ce)}catch(ve){Ge(ve),Ke.unsubscribe()}},error:Ge,complete:De});this.subscribe(Ke)})}_subscribe(Ve){var he;return null===(he=this.source)||void 0===he?void 0:he.subscribe(Ve)}[P.L](){return this}pipe(...Ve){return function pe(Ae){return 0===Ae.length?oe.y:1===Ae.length?Ae[0]:function(Ve){return Ae.reduce((he,De)=>De(he),Ve)}}(Ve)(this)}toPromise(Ve){return new(Ve=U(Ve))((he,De)=>{let Ge;this.subscribe(Ke=>Ge=Ke,Ke=>De(Ke),()=>he(Ge))})}}return Ae.create=Re=>new Ae(Re),Ae})();function U(Ae){var Re;return null!==(Re=null!=Ae?Ae:ae.v.Promise)&&void 0!==Re?Re:Promise}},7579:(Je,Ee,O)=>{O.d(Ee,{x:()=>ae});var g=O(8306),Q=O(727);const oe=(0,O(3888).d)(ue=>function(){ue(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ne=O(8737),pe=O(2806);let ae=(()=>{class ue extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(U){const X=new ie(this,this);return X.operator=U,X}_throwIfClosed(){if(this.closed)throw new oe}next(U){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const X of this.currentObservers)X.next(U)}})}error(U){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=U;const{observers:X}=this;for(;X.length;)X.shift().error(U)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:U}=this;for(;U.length;)U.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var U;return(null===(U=this.observers)||void 0===U?void 0:U.length)>0}_trySubscribe(U){return this._throwIfClosed(),super._trySubscribe(U)}_subscribe(U){return this._throwIfClosed(),this._checkFinalizedStatuses(U),this._innerSubscribe(U)}_innerSubscribe(U){const{hasError:X,isStopped:He,observers:Ae}=this;return X||He?Q.Lc:(this.currentObservers=null,Ae.push(U),new Q.w0(()=>{this.currentObservers=null,(0,ne.P)(Ae,U)}))}_checkFinalizedStatuses(U){const{hasError:X,thrownError:He,isStopped:Ae}=this;X?U.error(He):Ae&&U.complete()}asObservable(){const U=new g.y;return U.source=this,U}}return ue.create=(j,U)=>new ie(j,U),ue})();class ie extends ae{constructor(j,U){super(),this.destination=j,this.source=U}next(j){var U,X;null===(X=null===(U=this.destination)||void 0===U?void 0:U.next)||void 0===X||X.call(U,j)}error(j){var U,X;null===(X=null===(U=this.destination)||void 0===U?void 0:U.error)||void 0===X||X.call(U,j)}complete(){var j,U;null===(U=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===U||U.call(j)}_subscribe(j){var U,X;return null!==(X=null===(U=this.source)||void 0===U?void 0:U.subscribe(j))&&void 0!==X?X:Q.Lc}}},2961:(Je,Ee,O)=>{O.d(Ee,{Hp:()=>Ve,Lv:()=>X});var g=O(576),Q=O(727),P=O(2416),oe=O(7849);function ne(){}const pe=ue("C",void 0,void 0);function ue(Ce,ve,we){return{kind:Ce,value:ve,error:we}}var j=O(3410),U=O(2806);class X extends Q.w0{constructor(ve){super(),this.isStopped=!1,ve?(this.destination=ve,(0,Q.Nn)(ve)&&ve.add(this)):this.destination=Ke}static create(ve,we,Be){return new Ve(ve,we,Be)}next(ve){this.isStopped?Ge(function ie(Ce){return ue("N",Ce,void 0)}(ve),this):this._next(ve)}error(ve){this.isStopped?Ge(function ae(Ce){return ue("E",void 0,Ce)}(ve),this):(this.isStopped=!0,this._error(ve))}complete(){this.isStopped?Ge(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ve){this.destination.next(ve)}_error(ve){try{this.destination.error(ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function Ae(Ce,ve){return He.call(Ce,ve)}class Re{constructor(ve){this.partialObserver=ve}next(ve){const{partialObserver:we}=this;if(we.next)try{we.next(ve)}catch(Be){he(Be)}}error(ve){const{partialObserver:we}=this;if(we.error)try{we.error(ve)}catch(Be){he(Be)}else he(ve)}complete(){const{partialObserver:ve}=this;if(ve.complete)try{ve.complete()}catch(we){he(we)}}}class Ve extends X{constructor(ve,we,Be){let Ue;if(super(),(0,g.m)(ve)||!ve)Ue={next:null!=ve?ve:void 0,error:null!=we?we:void 0,complete:null!=Be?Be:void 0};else{let B;this&&P.v.useDeprecatedNextContext?(B=Object.create(ve),B.unsubscribe=()=>this.unsubscribe(),Ue={next:ve.next&&Ae(ve.next,B),error:ve.error&&Ae(ve.error,B),complete:ve.complete&&Ae(ve.complete,B)}):Ue=ve}this.destination=new Re(Ue)}}function he(Ce){P.v.useDeprecatedSynchronousErrorHandling?(0,U.O)(Ce):(0,oe.h)(Ce)}function Ge(Ce,ve){const{onStoppedNotification:we}=P.v;we&&j.z.setTimeout(()=>we(Ce,ve))}const Ke={closed:!0,next:ne,error:function De(Ce){throw Ce},complete:ne}},727:(Je,Ee,O)=>{O.d(Ee,{Lc:()=>pe,w0:()=>ne,Nn:()=>ae});var g=O(576);const P=(0,O(3888).d)(ue=>function(U){ue(this),this.message=U?`${U.length} errors occurred during unsubscription:\n${U.map((X,He)=>`${He+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=U});var oe=O(8737);class ne{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:U}=this;if(U)if(this._parentage=null,Array.isArray(U))for(const Ae of U)Ae.remove(this);else U.remove(this);const{initialTeardown:X}=this;if((0,g.m)(X))try{X()}catch(Ae){j=Ae instanceof P?Ae.errors:[Ae]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const Ae of He)try{ie(Ae)}catch(Re){j=null!=j?j:[],Re instanceof P?j=[...j,...Re.errors]:j.push(Re)}}if(j)throw new P(j)}}add(j){var U;if(j&&j!==this)if(this.closed)ie(j);else{if(j instanceof ne){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._finalizers=null!==(U=this._finalizers)&&void 0!==U?U:[]).push(j)}}_hasParent(j){const{_parentage:U}=this;return U===j||Array.isArray(U)&&U.includes(j)}_addParent(j){const{_parentage:U}=this;this._parentage=Array.isArray(U)?(U.push(j),U):U?[U,j]:j}_removeParent(j){const{_parentage:U}=this;U===j?this._parentage=null:Array.isArray(U)&&(0,oe.P)(U,j)}remove(j){const{_finalizers:U}=this;U&&(0,oe.P)(U,j),j instanceof ne&&j._removeParent(this)}}ne.EMPTY=(()=>{const ue=new ne;return ue.closed=!0,ue})();const pe=ne.EMPTY;function ae(ue){return ue instanceof ne||ue&&"closed"in ue&&(0,g.m)(ue.remove)&&(0,g.m)(ue.add)&&(0,g.m)(ue.unsubscribe)}function ie(ue){(0,g.m)(ue)?ue():ue.unsubscribe()}},2416:(Je,Ee,O)=>{O.d(Ee,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Je,Ee,O)=>{O.d(Ee,{E:()=>Q});const Q=new(O(8306).y)(ne=>ne.complete())},8996:(Je,Ee,O)=>{O.d(Ee,{D:()=>ve});var g=O(8421),Q=O(5363),P=O(9468),pe=O(8306),ie=O(2202),ue=O(576),j=O(9672);function X(we,Be){if(!we)throw new Error("Iterable cannot be null");return new pe.y(Ue=>{(0,j.f)(Ue,Be,()=>{const B=we[Symbol.asyncIterator]();(0,j.f)(Ue,Be,()=>{B.next().then(_e=>{_e.done?Ue.complete():Ue.next(_e.value)})},0,!0)})})}var He=O(3670),Ae=O(8239),Re=O(1144),Ve=O(6495),he=O(2206),De=O(4532),Ge=O(3260);function ve(we,Be){return Be?function Ce(we,Be){if(null!=we){if((0,He.c)(we))return function oe(we,Be){return(0,g.Xf)(we).pipe((0,P.R)(Be),(0,Q.Q)(Be))}(we,Be);if((0,Re.z)(we))return function ae(we,Be){return new pe.y(Ue=>{let B=0;return Be.schedule(function(){B===we.length?Ue.complete():(Ue.next(we[B++]),Ue.closed||this.schedule())})})}(we,Be);if((0,Ae.t)(we))return function ne(we,Be){return(0,g.Xf)(we).pipe((0,P.R)(Be),(0,Q.Q)(Be))}(we,Be);if((0,he.D)(we))return X(we,Be);if((0,Ve.T)(we))return function U(we,Be){return new pe.y(Ue=>{let B;return(0,j.f)(Ue,Be,()=>{B=we[ie.h](),(0,j.f)(Ue,Be,()=>{let _e,W;try{({value:_e,done:W}=B.next())}catch(re){return void Ue.error(re)}W?Ue.complete():Ue.next(_e)},0,!0)}),()=>(0,ue.m)(null==B?void 0:B.return)&&B.return()})}(we,Be);if((0,Ge.L)(we))return function Ke(we,Be){return X((0,Ge.Q)(we),Be)}(we,Be)}throw(0,De.z)(we)}(we,Be):(0,g.Xf)(we)}},8421:(Je,Ee,O)=>{O.d(Ee,{Xf:()=>He});var g=O(655),Q=O(1144),P=O(8239),oe=O(8306),ne=O(3670),pe=O(2206),ae=O(4532),ie=O(6495),ue=O(3260),j=O(576),U=O(7849),X=O(8822);function He(Ce){if(Ce instanceof oe.y)return Ce;if(null!=Ce){if((0,ne.c)(Ce))return function Ae(Ce){return new oe.y(ve=>{const we=Ce[X.L]();if((0,j.m)(we.subscribe))return we.subscribe(ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ce);if((0,Q.z)(Ce))return function Re(Ce){return new oe.y(ve=>{for(let we=0;we<Ce.length&&!ve.closed;we++)ve.next(Ce[we]);ve.complete()})}(Ce);if((0,P.t)(Ce))return function Ve(Ce){return new oe.y(ve=>{Ce.then(we=>{ve.closed||(ve.next(we),ve.complete())},we=>ve.error(we)).then(null,U.h)})}(Ce);if((0,pe.D)(Ce))return De(Ce);if((0,ie.T)(Ce))return function he(Ce){return new oe.y(ve=>{for(const we of Ce)if(ve.next(we),ve.closed)return;ve.complete()})}(Ce);if((0,ue.L)(Ce))return function Ge(Ce){return De((0,ue.Q)(Ce))}(Ce)}throw(0,ae.z)(Ce)}function De(Ce){return new oe.y(ve=>{(function Ke(Ce,ve){var we,Be,Ue,B;return(0,g.mG)(this,void 0,void 0,function*(){try{for(we=(0,g.KL)(Ce);!(Be=yield we.next()).done;)if(ve.next(Be.value),ve.closed)return}catch(_e){Ue={error:_e}}finally{try{Be&&!Be.done&&(B=we.return)&&(yield B.call(we))}finally{if(Ue)throw Ue.error}}ve.complete()})})(Ce,ve).catch(we=>ve.error(we))})}},6451:(Je,Ee,O)=>{O.d(Ee,{T:()=>pe});var g=O(8189),Q=O(8421),P=O(515),oe=O(7669),ne=O(8996);function pe(...ae){const ie=(0,oe.yG)(ae),ue=(0,oe._6)(ae,1/0),j=ae;return j.length?1===j.length?(0,Q.Xf)(j[0]):(0,g.J)(ue)((0,ne.D)(j,ie)):P.E}},5403:(Je,Ee,O)=>{O.d(Ee,{x:()=>Q});var g=O(2961);function Q(oe,ne,pe,ae,ie){return new P(oe,ne,pe,ae,ie)}class P extends g.Lv{constructor(ne,pe,ae,ie,ue,j){super(ne),this.onFinalize=ue,this.shouldUnsubscribe=j,this._next=pe?function(U){try{pe(U)}catch(X){ne.error(X)}}:super._next,this._error=ie?function(U){try{ie(U)}catch(X){ne.error(X)}finally{this.unsubscribe()}}:super._error,this._complete=ae?function(){try{ae()}catch(U){ne.error(U)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ne;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(ne=this.onFinalize)||void 0===ne||ne.call(this))}}}},4004:(Je,Ee,O)=>{O.d(Ee,{U:()=>P});var g=O(4482),Q=O(5403);function P(oe,ne){return(0,g.e)((pe,ae)=>{let ie=0;pe.subscribe((0,Q.x)(ae,ue=>{ae.next(oe.call(ne,ue,ie++))}))})}},8189:(Je,Ee,O)=>{O.d(Ee,{J:()=>P});var g=O(5577),Q=O(4671);function P(oe=1/0){return(0,g.z)(Q.y,oe)}},5577:(Je,Ee,O)=>{O.d(Ee,{z:()=>ie});var g=O(4004),Q=O(8421),P=O(4482),oe=O(9672),ne=O(5403),ae=O(576);function ie(ue,j,U=1/0){return(0,ae.m)(j)?ie((X,He)=>(0,g.U)((Ae,Re)=>j(X,Ae,He,Re))((0,Q.Xf)(ue(X,He))),U):("number"==typeof j&&(U=j),(0,P.e)((X,He)=>function pe(ue,j,U,X,He,Ae,Re,Ve){const he=[];let De=0,Ge=0,Ke=!1;const Ce=()=>{Ke&&!he.length&&!De&&j.complete()},ve=Be=>De<X?we(Be):he.push(Be),we=Be=>{Ae&&j.next(Be),De++;let Ue=!1;(0,Q.Xf)(U(Be,Ge++)).subscribe((0,ne.x)(j,B=>{null==He||He(B),Ae?ve(B):j.next(B)},()=>{Ue=!0},void 0,()=>{if(Ue)try{for(De--;he.length&&De<X;){const B=he.shift();Re?(0,oe.f)(j,Re,()=>we(B)):we(B)}Ce()}catch(B){j.error(B)}}))};return ue.subscribe((0,ne.x)(j,ve,()=>{Ke=!0,Ce()})),()=>{null==Ve||Ve()}}(X,He,ue,U)))}},5363:(Je,Ee,O)=>{O.d(Ee,{Q:()=>oe});var g=O(9672),Q=O(4482),P=O(5403);function oe(ne,pe=0){return(0,Q.e)((ae,ie)=>{ae.subscribe((0,P.x)(ie,ue=>(0,g.f)(ie,ne,()=>ie.next(ue),pe),()=>(0,g.f)(ie,ne,()=>ie.complete(),pe),ue=>(0,g.f)(ie,ne,()=>ie.error(ue),pe)))})}},3099:(Je,Ee,O)=>{O.d(Ee,{B:()=>pe});var g=O(8996),Q=O(5698),P=O(7579),oe=O(2961),ne=O(4482);function pe(ie={}){const{connector:ue=(()=>new P.x),resetOnError:j=!0,resetOnComplete:U=!0,resetOnRefCountZero:X=!0}=ie;return He=>{let Ae=null,Re=null,Ve=null,he=0,De=!1,Ge=!1;const Ke=()=>{null==Re||Re.unsubscribe(),Re=null},Ce=()=>{Ke(),Ae=Ve=null,De=Ge=!1},ve=()=>{const we=Ae;Ce(),null==we||we.unsubscribe()};return(0,ne.e)((we,Be)=>{he++,!Ge&&!De&&Ke();const Ue=Ve=null!=Ve?Ve:ue();Be.add(()=>{he--,0===he&&!Ge&&!De&&(Re=ae(ve,X))}),Ue.subscribe(Be),Ae||(Ae=new oe.Hp({next:B=>Ue.next(B),error:B=>{Ge=!0,Ke(),Re=ae(Ce,j,B),Ue.error(B)},complete:()=>{De=!0,Ke(),Re=ae(Ce,U),Ue.complete()}}),(0,g.D)(we).subscribe(Ae))})(He)}}function ae(ie,ue,...j){return!0===ue?(ie(),null):!1===ue?null:ue(...j).pipe((0,Q.q)(1)).subscribe(()=>ie())}},9468:(Je,Ee,O)=>{O.d(Ee,{R:()=>Q});var g=O(4482);function Q(P,oe=0){return(0,g.e)((ne,pe)=>{pe.add(P.schedule(()=>ne.subscribe(pe),oe))})}},5698:(Je,Ee,O)=>{O.d(Ee,{q:()=>oe});var g=O(515),Q=O(4482),P=O(5403);function oe(ne){return ne<=0?()=>g.E:(0,Q.e)((pe,ae)=>{let ie=0;pe.subscribe((0,P.x)(ae,ue=>{++ie<=ne&&(ae.next(ue),ne<=ie&&ae.complete())}))})}},8505:(Je,Ee,O)=>{O.d(Ee,{b:()=>ne});var g=O(576),Q=O(4482),P=O(5403),oe=O(4671);function ne(pe,ae,ie){const ue=(0,g.m)(pe)||ae||ie?{next:pe,error:ae,complete:ie}:pe;return ue?(0,Q.e)((j,U)=>{var X;null===(X=ue.subscribe)||void 0===X||X.call(ue);let He=!0;j.subscribe((0,P.x)(U,Ae=>{var Re;null===(Re=ue.next)||void 0===Re||Re.call(ue,Ae),U.next(Ae)},()=>{var Ae;He=!1,null===(Ae=ue.complete)||void 0===Ae||Ae.call(ue),U.complete()},Ae=>{var Re;He=!1,null===(Re=ue.error)||void 0===Re||Re.call(ue,Ae),U.error(Ae)},()=>{var Ae,Re;He&&(null===(Ae=ue.unsubscribe)||void 0===Ae||Ae.call(ue)),null===(Re=ue.finalize)||void 0===Re||Re.call(ue)}))}):oe.y}},4408:(Je,Ee,O)=>{O.d(Ee,{o:()=>ne});var g=O(727);class Q extends g.w0{constructor(ae,ie){super()}schedule(ae,ie=0){return this}}const P={setInterval(pe,ae,...ie){const{delegate:ue}=P;return(null==ue?void 0:ue.setInterval)?ue.setInterval(pe,ae,...ie):setInterval(pe,ae,...ie)},clearInterval(pe){const{delegate:ae}=P;return((null==ae?void 0:ae.clearInterval)||clearInterval)(pe)},delegate:void 0};var oe=O(8737);class ne extends Q{constructor(ae,ie){super(ae,ie),this.scheduler=ae,this.work=ie,this.pending=!1}schedule(ae,ie=0){if(this.closed)return this;this.state=ae;const ue=this.id,j=this.scheduler;return null!=ue&&(this.id=this.recycleAsyncId(j,ue,ie)),this.pending=!0,this.delay=ie,this.id=this.id||this.requestAsyncId(j,this.id,ie),this}requestAsyncId(ae,ie,ue=0){return P.setInterval(ae.flush.bind(ae,this),ue)}recycleAsyncId(ae,ie,ue=0){if(null!=ue&&this.delay===ue&&!1===this.pending)return ie;P.clearInterval(ie)}execute(ae,ie){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ue=this._execute(ae,ie);if(ue)return ue;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ae,ie){let j,ue=!1;try{this.work(ae)}catch(U){ue=!0,j=U||new Error("Scheduled action threw falsy error")}if(ue)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:ae,scheduler:ie}=this,{actions:ue}=ie;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(ue,this),null!=ae&&(this.id=this.recycleAsyncId(ie,ae,null)),this.delay=null,super.unsubscribe()}}}},7565:(Je,Ee,O)=>{O.d(Ee,{v:()=>P});var g=O(6063);class Q{constructor(ne,pe=Q.now){this.schedulerActionCtor=ne,this.now=pe}schedule(ne,pe=0,ae){return new this.schedulerActionCtor(this,ne).schedule(ae,pe)}}Q.now=g.l.now;class P extends Q{constructor(ne,pe=Q.now){super(ne,pe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ne){const{actions:pe}=this;if(this._active)return void pe.push(ne);let ae;this._active=!0;do{if(ae=ne.execute(ne.state,ne.delay))break}while(ne=pe.shift());if(this._active=!1,ae){for(;ne=pe.shift();)ne.unsubscribe();throw ae}}}},4986:(Je,Ee,O)=>{O.d(Ee,{z:()=>P});var g=O(4408);const P=new(O(7565).v)(g.o)},6063:(Je,Ee,O)=>{O.d(Ee,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(Je,Ee,O)=>{O.d(Ee,{z:()=>g});const g={setTimeout(Q,P,...oe){const{delegate:ne}=g;return(null==ne?void 0:ne.setTimeout)?ne.setTimeout(Q,P,...oe):setTimeout(Q,P,...oe)},clearTimeout(Q){const{delegate:P}=g;return((null==P?void 0:P.clearTimeout)||clearTimeout)(Q)},delegate:void 0}},2202:(Je,Ee,O)=>{O.d(Ee,{h:()=>Q});const Q=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Je,Ee,O)=>{O.d(Ee,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Je,Ee,O)=>{O.d(Ee,{_6:()=>pe,jO:()=>oe,yG:()=>ne});var g=O(576);function P(ae){return ae[ae.length-1]}function oe(ae){return(0,g.m)(P(ae))?ae.pop():void 0}function ne(ae){return function Q(ae){return ae&&(0,g.m)(ae.schedule)}(P(ae))?ae.pop():void 0}function pe(ae,ie){return"number"==typeof P(ae)?ae.pop():ie}},8737:(Je,Ee,O)=>{function g(Q,P){if(Q){const oe=Q.indexOf(P);0<=oe&&Q.splice(oe,1)}}O.d(Ee,{P:()=>g})},3888:(Je,Ee,O)=>{function g(Q){const oe=Q(ne=>{Error.call(ne),ne.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}O.d(Ee,{d:()=>g})},2806:(Je,Ee,O)=>{O.d(Ee,{O:()=>oe,x:()=>P});var g=O(2416);let Q=null;function P(ne){if(g.v.useDeprecatedSynchronousErrorHandling){const pe=!Q;if(pe&&(Q={errorThrown:!1,error:null}),ne(),pe){const{errorThrown:ae,error:ie}=Q;if(Q=null,ae)throw ie}}else ne()}function oe(ne){g.v.useDeprecatedSynchronousErrorHandling&&Q&&(Q.errorThrown=!0,Q.error=ne)}},9672:(Je,Ee,O)=>{function g(Q,P,oe,ne=0,pe=!1){const ae=P.schedule(function(){oe(),pe?Q.add(this.schedule(null,ne)):this.unsubscribe()},ne);if(Q.add(ae),!pe)return ae}O.d(Ee,{f:()=>g})},4671:(Je,Ee,O)=>{function g(Q){return Q}O.d(Ee,{y:()=>g})},1144:(Je,Ee,O)=>{O.d(Ee,{z:()=>g});const g=Q=>Q&&"number"==typeof Q.length&&"function"!=typeof Q},2206:(Je,Ee,O)=>{O.d(Ee,{D:()=>Q});var g=O(576);function Q(P){return Symbol.asyncIterator&&(0,g.m)(null==P?void 0:P[Symbol.asyncIterator])}},576:(Je,Ee,O)=>{function g(Q){return"function"==typeof Q}O.d(Ee,{m:()=>g})},3670:(Je,Ee,O)=>{O.d(Ee,{c:()=>P});var g=O(8822),Q=O(576);function P(oe){return(0,Q.m)(oe[g.L])}},6495:(Je,Ee,O)=>{O.d(Ee,{T:()=>P});var g=O(2202),Q=O(576);function P(oe){return(0,Q.m)(null==oe?void 0:oe[g.h])}},8239:(Je,Ee,O)=>{O.d(Ee,{t:()=>Q});var g=O(576);function Q(P){return(0,g.m)(null==P?void 0:P.then)}},3260:(Je,Ee,O)=>{O.d(Ee,{L:()=>oe,Q:()=>P});var g=O(655),Q=O(576);function P(ne){return(0,g.FC)(this,arguments,function*(){const ae=ne.getReader();try{for(;;){const{value:ie,done:ue}=yield(0,g.qq)(ae.read());if(ue)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(ie)}}finally{ae.releaseLock()}})}function oe(ne){return(0,Q.m)(null==ne?void 0:ne.getReader)}},4482:(Je,Ee,O)=>{O.d(Ee,{A:()=>Q,e:()=>P});var g=O(576);function Q(oe){return(0,g.m)(null==oe?void 0:oe.lift)}function P(oe){return ne=>{if(Q(ne))return ne.lift(function(pe){try{return oe(pe,this)}catch(ae){this.error(ae)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(Je,Ee,O)=>{O.d(Ee,{h:()=>P});var g=O(2416),Q=O(3410);function P(oe){Q.z.setTimeout(()=>{const{onUnhandledError:ne}=g.v;if(!ne)throw oe;ne(oe)})}},4532:(Je,Ee,O)=>{function g(Q){return new TypeError(`You provided ${null!==Q&&"object"==typeof Q?"an invalid object":`'${Q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(Ee,{z:()=>g})},655:(Je,Ee,O)=>{function oe(W,re){var J={};for(var me in W)Object.prototype.hasOwnProperty.call(W,me)&&re.indexOf(me)<0&&(J[me]=W[me]);if(null!=W&&"function"==typeof Object.getOwnPropertySymbols){var se=0;for(me=Object.getOwnPropertySymbols(W);se<me.length;se++)re.indexOf(me[se])<0&&Object.prototype.propertyIsEnumerable.call(W,me[se])&&(J[me[se]]=W[me[se]])}return J}function ie(W,re,J,me){return new(J||(J=Promise))(function(Ne,ot){function Pt(zt){try{ze(me.next(zt))}catch(fn){ot(fn)}}function Rt(zt){try{ze(me.throw(zt))}catch(fn){ot(fn)}}function ze(zt){zt.done?Ne(zt.value):function se(Ne){return Ne instanceof J?Ne:new J(function(ot){ot(Ne)})}(zt.value).then(Pt,Rt)}ze((me=me.apply(W,re||[])).next())})}function he(W){return this instanceof he?(this.v=W,this):new he(W)}function De(W,re,J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var se,me=J.apply(W,re||[]),Ne=[];return se={},ot("next"),ot("throw"),ot("return"),se[Symbol.asyncIterator]=function(){return this},se;function ot(Zt){me[Zt]&&(se[Zt]=function(Ht){return new Promise(function(vr,Bt){Ne.push([Zt,Ht,vr,Bt])>1||Pt(Zt,Ht)})})}function Pt(Zt,Ht){try{!function Rt(Zt){Zt.value instanceof he?Promise.resolve(Zt.value.v).then(ze,zt):fn(Ne[0][2],Zt)}(me[Zt](Ht))}catch(vr){fn(Ne[0][3],vr)}}function ze(Zt){Pt("next",Zt)}function zt(Zt){Pt("throw",Zt)}function fn(Zt,Ht){Zt(Ht),Ne.shift(),Ne.length&&Pt(Ne[0][0],Ne[0][1])}}function Ke(W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var J,re=W[Symbol.asyncIterator];return re?re.call(W):(W=function X(W){var re="function"==typeof Symbol&&Symbol.iterator,J=re&&W[re],me=0;if(J)return J.call(W);if(W&&"number"==typeof W.length)return{next:function(){return W&&me>=W.length&&(W=void 0),{value:W&&W[me++],done:!W}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(W),J={},me("next"),me("throw"),me("return"),J[Symbol.asyncIterator]=function(){return this},J);function me(Ne){J[Ne]=W[Ne]&&function(ot){return new Promise(function(Pt,Rt){!function se(Ne,ot,Pt,Rt){Promise.resolve(Rt).then(function(ze){Ne({value:ze,done:Pt})},ot)}(Pt,Rt,(ot=W[Ne](ot)).done,ot.value)})}}}O.d(Ee,{FC:()=>De,KL:()=>Ke,_T:()=>oe,mG:()=>ie,qq:()=>he})},5e3:(Je,Ee,O)=>{O.d(Ee,{$8M:()=>so,$Z:()=>tr,AFp:()=>Im,AaK:()=>ie,CHM:()=>Ro,CRH:()=>Zw,CZH:()=>wm,CqO:()=>wf,EJc:()=>tC,EpF:()=>u_,F4k:()=>ka,FYo:()=>L_,FiY:()=>fr,G48:()=>cC,GfV:()=>U_,Gpc:()=>U,JOm:()=>x,LFG:()=>tt,LSH:()=>Ia,Lbi:()=>pv,MGl:()=>bf,NdJ:()=>Fa,OlP:()=>cn,Oqu:()=>Sf,PXZ:()=>bv,Q6J:()=>a_,QGY:()=>je,Qsj:()=>V_,R0b:()=>wo,RDi:()=>rl,Rgc:()=>_c,SBq:()=>rh,Sil:()=>nC,Suo:()=>Kw,TTD:()=>Ti,TgZ:()=>Ko,VLi:()=>sC,X6Q:()=>Mv,XFs:()=>ht,Xpm:()=>ct,Y36:()=>Ef,YKP:()=>Zf,YNc:()=>wE,Yjl:()=>na,Yz7:()=>Ht,ZZ4:()=>Vm,_Bn:()=>Mw,_UZ:()=>$g,_Vd:()=>qf,_c5:()=>vC,_uU:()=>Kg,aQg:()=>hp,c2e:()=>hI,cJS:()=>Bt,cg1:()=>Of,dDg:()=>Cm,deG:()=>Ch,dqk:()=>Nt,eFA:()=>Am,ekj:()=>tc,g9A:()=>$a,h0i:()=>Ba,hGG:()=>PI,iGM:()=>Ww,ifc:()=>kt,ip1:()=>Em,kL8:()=>Gn,lG2:()=>Wa,n5z:()=>xn,oAB:()=>wr,oxw:()=>Gg,q4F:()=>Rw,qLn:()=>wd,qOj:()=>kg,qZA:()=>jd,sBO:()=>xv,sIi:()=>Fd,s_b:()=>sh,soG:()=>gv,tBr:()=>fi,tb:()=>wc,tp0:()=>Ps,uIk:()=>Vg,vHH:()=>Re,vpe:()=>ls,wAp:()=>gt,xp6:()=>Mr,z2F:()=>up,zSh:()=>po,zs3:()=>go});var g=O(7579),Q=O(727),P=O(8306),oe=O(6451),ne=O(3099);function pe(i){for(let s in i)if(i[s]===pe)return s;throw Error("Could not find renamed property on target object.")}function ae(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function ie(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ie).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function ue(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const j=pe({__forward_ref__:pe});function U(i){return i.__forward_ref__=U,i.toString=function(){return ie(this())},i}function X(i){return He(i)?i():i}function He(i){return"function"==typeof i&&i.hasOwnProperty(j)&&i.__forward_ref__===U}class Re extends Error{constructor(s,a){super(function Ve(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function he(i){return"string"==typeof i?i:null==i?"":String(i)}function De(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():he(i)}function ve(i,s){const a=s?` in ${s}`:"";throw new Re(-201,`No provider for ${De(i)} found${a}`)}function Rt(i,s){null==i&&function ze(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function Ht(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Bt(i){return{providers:i.providers||[],imports:i.imports||[]}}function Mt(i){return $i(i,vi)||$i(i,Wr)}function $i(i,s){return i.hasOwnProperty(s)?i[s]:null}function Er(i){return i&&(i.hasOwnProperty(gs)||i.hasOwnProperty(Ei))?i[gs]:null}const vi=pe({\u0275prov:pe}),gs=pe({\u0275inj:pe}),Wr=pe({ngInjectableDef:pe}),Ei=pe({ngInjectorDef:pe});var ht=(()=>((ht=ht||{})[ht.Default=0]="Default",ht[ht.Host=1]="Host",ht[ht.Self=2]="Self",ht[ht.SkipSelf=4]="SkipSelf",ht[ht.Optional=8]="Optional",ht))();let Kr;function pn(i){const s=Kr;return Kr=i,s}function js(i,s,a){const l=Mt(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&ht.Optional?null:void 0!==s?s:void ve(ie(i),"Injector")}function Ln(i){return{toString:i}.toString()}var _n=(()=>((_n=_n||{})[_n.OnPush=0]="OnPush",_n[_n.Default=1]="Default",_n))(),kt=(()=>{return(i=kt||(kt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",kt;var i})();const rt="undefined"!=typeof globalThis&&globalThis,mt="undefined"!=typeof window&&window,ir="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Nt=rt||"undefined"!=typeof global&&global||mt||ir,or={},L=[],H=pe({\u0275cmp:pe}),G=pe({\u0275dir:pe}),be=pe({\u0275pipe:pe}),$=pe({\u0275mod:pe}),Y=pe({\u0275fac:pe}),Me=pe({__NG_ELEMENT_ID__:pe});let Ye=0;function ct(i){return Ln(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===_n.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||L,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||kt.Emulated,id:"c",styles:i.styles||L,_:null,setInput:null,schemas:i.schemas||null,tView:null},c=i.directives,f=i.features,_=i.pipes;return l.id+=Ye++,l.inputs=ta(i.inputs,a),l.outputs=ta(i.outputs),f&&f.forEach(E=>E(l)),l.directiveDefs=c?()=>("function"==typeof c?c():c).map(en):null,l.pipeDefs=_?()=>("function"==typeof _?_():_).map(yt):null,l})}function en(i){return Tn(i)||function Ir(i){return i[G]||null}(i)}function yt(i){return function Hi(i){return i[be]||null}(i)}const Cn={};function wr(i){return Ln(()=>{const s={type:i.type,bootstrap:i.bootstrap||L,declarations:i.declarations||L,imports:i.imports||L,exports:i.exports||L,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(Cn[i.id]=i.type),s})}function ta(i,s){if(null==i)return or;const a={};for(const l in i)if(i.hasOwnProperty(l)){let c=i[l],f=c;Array.isArray(c)&&(f=c[1],c=c[0]),a[c]=l,s&&(s[c]=f)}return a}const Wa=ct;function na(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Tn(i){return i[H]||null}function An(i,s){const a=i[$]||null;if(!a&&!0===s)throw new Error(`Type ${ie(i)} does not have '\u0275mod' property.`);return a}function Lr(i){return Array.isArray(i)&&"object"==typeof i[1]}function Di(i){return Array.isArray(i)&&!0===i[1]}function Ya(i){return 0!=(8&i.flags)}function Sc(i){return 2==(2&i.flags)}function bi(i){return 1==(1&i.flags)}function Ci(i){return null!==i.template}function Xu(i){return 0!=(512&i[2])}function lr(i,s){return i.hasOwnProperty(Y)?i[Y]:null}class qs{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Ti(){return Co}function Co(i){return i.type.prototype.ngOnChanges&&(i.setInput=wh),Fc}function Fc(){const i=zs(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===or)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function wh(i,s,a,l){const c=zs(i)||function To(i,s){return i[Lc]=s}(i,{previous:or,current:null}),f=c.current||(c.current={}),_=c.previous,E=this.declaredInputs[a],I=_[E];f[E]=new qs(I&&I.currentValue,s,_===or),i[l]=s}Ti.ngInherit=!0;const Lc="__ngSimpleChanges__";function zs(i){return i[Lc]||null}let So;function rl(i){So=i}function Qt(i){return!!i.listen}const aa={createRenderer:(i,s)=>function Ai(){return void 0!==So?So:"undefined"!=typeof document?document:void 0}()};function Gt(i){for(;Array.isArray(i);)i=i[0];return i}function Is(i,s){return Gt(s[i])}function zn(i,s){return Gt(s[i.index])}function on(i,s){return i.data[s]}function Wn(i,s){const a=s[i];return Lr(a)?a:a[0]}function Ks(i){return 4==(4&i[2])}function qi(i){return 128==(128&i[2])}function ui(i,s){return null==s?null:i[s]}function Mi(i){i[18]=0}function Mo(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const ft={lFrame:No(null),bindingsEnabled:!0};function eu(){return ft.bindingsEnabled}function Te(){return ft.lFrame.lView}function xt(){return ft.lFrame.tView}function Ro(i){return ft.lFrame.contextLView=i,i[8]}function rn(){let i=tu();for(;null!==i&&64===i.type;)i=i.parent;return i}function tu(){return ft.lFrame.currentTNode}function Jr(i,s){const a=ft.lFrame;a.currentTNode=i,a.isParent=s}function ul(){return ft.lFrame.isParent}function bs(){return ft.lFrame.bindingIndex++}function iu(i,s){const a=ft.lFrame;a.bindingIndex=a.bindingRootIndex=i,da(s)}function da(i){ft.lFrame.currentDirectiveIndex=i}function ou(){return ft.lFrame.currentQueryIndex}function jc(i){ft.lFrame.currentQueryIndex=i}function $c(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function au(i,s,a){if(a&ht.SkipSelf){let c=s,f=i;for(;!(c=c.parent,null!==c||a&ht.Host||(c=$c(f),null===c||(f=f[15],10&c.type))););if(null===c)return!1;s=c,i=f}const l=ft.lFrame=Hc();return l.currentTNode=s,l.lView=i,!0}function Ys(i){const s=Hc(),a=i[1];ft.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Hc(){const i=ft.lFrame,s=null===i?null:i.child;return null===s?No(i):s}function No(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Gc(){const i=ft.lFrame;return ft.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const uu=Gc;function Vr(){const i=Gc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Un(){return ft.lFrame.selectedIndex}function Qs(i){ft.lFrame.selectedIndex=i}function En(){const i=ft.lFrame;return on(i.tView,i.selectedIndex)}function ha(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:A,ngOnDestroy:S}=f;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),A&&((i.viewHooks||(i.viewHooks=[])).push(a,A),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,A)),null!=S&&(i.destroyHooks||(i.destroyHooks=[])).push(a,S)}}function Wi(i,s,a){zc(i,s,3,a)}function Js(i,s,a,l){(3&i[2])===a&&zc(i,s,a,l)}function Sn(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function zc(i,s,a,l){const f=null!=l?l:-1,_=s.length-1;let E=0;for(let I=void 0!==l?65535&i[18]:0;I<_;I++)if("number"==typeof s[I+1]){if(E=s[I],null!=l&&E>=l)break}else s[I]<0&&(i[18]+=65536),(E<f||-1==f)&&(Rp(i,a,s,I),i[18]=(4294901760&i[18])+I+2),I++}function Rp(i,s,a,l){const c=a[l]<0,f=a[l+1],E=i[c?-a[l]:a[l]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(E)}finally{}}}else try{f.call(E)}finally{}}class Oo{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function Cr(i,s,a){const l=Qt(i);let c=0;for(;c<a.length;){const f=a[c];if("number"==typeof f){if(0!==f)break;c++;const _=a[c++],E=a[c++],I=a[c++];l?i.setAttribute(s,E,I,_):s.setAttributeNS(_,E,I)}else{const _=f,E=a[++c];Mn(_)?l&&i.setProperty(s,_,E):l?i.setAttribute(s,_,E):s.setAttribute(_,E),c++}}return c}function ci(i){return 3===i||4===i||6===i}function Mn(i){return 64===i.charCodeAt(0)}function pa(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const c=s[l];"number"==typeof c?a=c:0===a||Wc(i,a,c,null,-1===a||2===a?s[++l]:null)}}return i}function Wc(i,s,a,l,c){let f=0,_=i.length;if(-1===s)_=-1;else for(;f<i.length;){const E=i[f++];if("number"==typeof E){if(E===s){_=-1;break}if(E>s){_=f-1;break}}}for(;f<i.length;){const E=i[f];if("number"==typeof E)break;if(E===a){if(null===l)return void(null!==c&&(i[f+1]=c));if(l===i[f+1])return void(i[f+2]=c)}f++,null!==l&&f++,null!==c&&f++}-1!==_&&(i.splice(_,0,s),f=_+1),i.splice(f++,0,a),null!==l&&i.splice(f++,0,l),null!==c&&i.splice(f++,0,c)}function Po(i){return-1!==i}function Cs(i){return 32767&i}function Ts(i,s){let a=function mn(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let xi=!0;function It(i){const s=xi;return xi=i,s}let gl=0;function As(i,s){const a=eo(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,ko(l.data,i),ko(s,null),ko(l.blueprint,null));const c=Zn(i,s),f=i.injectorIndex;if(Po(c)){const _=Cs(c),E=Ts(c,s),I=E[1].data;for(let A=0;A<8;A++)s[f+A]=E[_+A]|I[_+A]}return s[f+8]=c,f}function ko(i,s){i.push(0,0,0,0,0,0,0,0,s)}function eo(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Zn(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,c=s;for(;null!==c;){const f=c[1],_=f.type;if(l=2===_?f.declTNode:1===_?c[6]:null,null===l)return-1;if(a++,c=c[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function to(i,s,a){!function Kn(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(Me)&&(l=a[Me]),null==l&&(l=a[Me]=gl++);const c=255&l;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function Fo(i,s,a){if(a&ht.Optional)return i;ve(s,"NodeInjector")}function Ss(i,s,a,l){if(a&ht.Optional&&void 0===l&&(l=null),0==(a&(ht.Self|ht.Host))){const c=i[9],f=pn(void 0);try{return c?c.get(s,l,a&ht.Optional):js(s,l,a&ht.Optional)}finally{pn(f)}}return Fo(l,s,a)}function Lo(i,s,a,l=ht.Default,c){if(null!==i){const f=function ro(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(Me)?i[Me]:void 0;return"number"==typeof s?s>=0?255&s:Vo:s}(a);if("function"==typeof f){if(!au(s,i,l))return l&ht.Host?Fo(c,a,l):Ss(s,a,l,c);try{const _=f(l);if(null!=_||l&ht.Optional)return _;ve(a)}finally{uu()}}else if("number"==typeof f){let _=null,E=eo(i,s),I=-1,A=l&ht.Host?s[16][6]:null;for((-1===E||l&ht.SkipSelf)&&(I=-1===E?Zn(i,s):s[E+8],-1!==I&&yl(l,!1)?(_=s[1],E=Cs(I),s=Ts(I,s)):E=-1);-1!==E;){const S=s[1];if(Yn(f,E,S.data)){const k=ml(E,s,a,_,l,A);if(k!==Ms)return k}I=s[E+8],-1!==I&&yl(l,s[1].data[E+8]===A)&&Yn(f,E,s)?(_=S,E=Cs(I),s=Ts(I,s)):E=-1}}}return Ss(s,a,l,c)}const Ms={};function Vo(){return new xs(rn(),Te())}function ml(i,s,a,l,c,f){const _=s[1],E=_.data[i+8],S=ga(E,_,a,null==l?Sc(E)&&xi:l!=_&&0!=(3&E.type),c&ht.Host&&f===E);return null!==S?Zi(s,_,S,E):Ms}function ga(i,s,a,l,c){const f=i.providerIndexes,_=s.data,E=1048575&f,I=i.directiveStart,S=f>>20,V=c?E+S:i.directiveEnd;for(let Z=l?E:E+S;Z<V;Z++){const ye=_[Z];if(Z<I&&a===ye||Z>=I&&ye.type===a)return Z}if(c){const Z=_[I];if(Z&&Ci(Z)&&Z.type===a)return I}return null}function Zi(i,s,a,l){let c=i[a];const f=s.data;if(function lu(i){return i instanceof Oo}(c)){const _=c;_.resolving&&function Ge(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Re(-200,`Circular dependency in DI detected for ${i}${a}`)}(De(f[a]));const E=It(_.canSeeViewProviders);_.resolving=!0;const I=_.injectImpl?pn(_.injectImpl):null;au(i,l,ht.Default);try{c=i[a]=_.factory(void 0,f,i,l),s.firstCreatePass&&a>=l.directiveStart&&function qm(i,s,a){const{ngOnChanges:l,ngOnInit:c,ngDoCheck:f}=s.type.prototype;if(l){const _=Co(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==I&&pn(I),It(E),_.resolving=!1,uu()}}return c}function Yn(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function yl(i,s){return!(i&ht.Self||i&ht.Host&&s)}class xs{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return Lo(this._tNode,this._lView,s,l,a)}}function xn(i){return Ln(()=>{const s=i.prototype.constructor,a=s[Y]||io(s),l=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==l;){const f=c[Y]||io(c);if(f&&f!==a)return f;c=Object.getPrototypeOf(c)}return f=>new f})}function io(i){return He(i)?()=>{const s=io(X(i));return s&&s()}:lr(i)}function so(i){return function no(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let c=0;for(;c<l;){const f=a[c];if(ci(f))break;if(0===f)c+=2;else if("number"==typeof f)for(c++;c<l&&"string"==typeof a[c];)c++;else{if(f===s)return a[c+1];c+=2}}}return null}(rn(),i)}const Ri="__parameters__";function Ni(i,s,a){return Ln(()=>{const l=function Rn(i){return function(...a){if(i){const l=i(...a);for(const c in l)this[c]=l[c]}}}(s);function c(...f){if(this instanceof c)return l.apply(this,f),this;const _=new c(...f);return E.annotation=_,E;function E(I,A,S){const k=I.hasOwnProperty(Ri)?I[Ri]:Object.defineProperty(I,Ri,{value:[]})[Ri];for(;k.length<=S;)k.push(null);return(k[S]=k[S]||[]).push(_),I}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class cn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Ht({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ch=new cn("AnalyzeForEntryComponents");function Tr(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),Tr(l,s)):s!==i&&s.push(l)}return s}function Ar(i,s){i.forEach(a=>Array.isArray(a)?Ar(a,s):s(a))}function ya(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Bo(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function dr(i,s,a){let l=Ho(i,s);return l>=0?i[1|l]=a:(l=~l,function jo(i,s,a,l){let c=i.length;if(c==s)i.push(a,l);else if(1===c)i.push(l,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function _a(i,s){const a=Ho(i,s);if(a>=0)return i[1|a]}function Ho(i,s){return function es(i,s,a){let l=0,c=i.length>>a;for(;c!==l;){const f=l+(c-l>>1),_=i[f<<a];if(s===_)return f<<a;_>s?c=f:l=f+1}return~(c<<a)}(i,s,1)}const Os={},Go="__NG_DI_FLAG__",va="ngTempTokenPath",b=/\n/gm,F="__source",K=pe({provide:String,useValue:pe});let te;function fe(i){const s=te;return te=i,s}function Ze(i,s=ht.Default){if(void 0===te)throw new Re(203,"");return null===te?js(i,void 0,s):te.get(i,s&ht.Optional?null:void 0,s)}function tt(i,s=ht.Default){return(function ln(){return Kr}()||Ze)(X(i),s)}const Ft=tt;function Et(i){const s=[];for(let a=0;a<i.length;a++){const l=X(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Re(900,"");let c,f=ht.Default;for(let _=0;_<l.length;_++){const E=l[_],I=Bn(E);"number"==typeof I?-1===I?c=E.token:f|=I:c=E}s.push(tt(c,f))}else s.push(tt(l))}return s}function In(i,s){return i[Go]=s,i.prototype[Go]=s,i}function Bn(i){return i[Go]}const fi=In(Ni("Inject",i=>({token:i})),-1),fr=In(Ni("Optional"),8),Ps=In(Ni("SkipSelf"),4);class ld{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function pi(i){return i instanceof ld?i.changingThisBreaksApplicationSecurity:i}const Qm=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,wa=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Dn=(()=>((Dn=Dn||{})[Dn.NONE=0]="NONE",Dn[Dn.HTML=1]="HTML",Dn[Dn.STYLE=2]="STYLE",Dn[Dn.SCRIPT=3]="SCRIPT",Dn[Dn.URL=4]="URL",Dn[Dn.RESOURCE_URL=5]="RESOURCE_URL",Dn))();function Ia(i){const s=function wu(){const i=Te();return i&&i[12]}();return s?s.sanitize(Dn.URL,i)||"":function uo(i,s){const a=function Tl(i){return i instanceof ld&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?pi(i):function Al(i){return(i=String(i)).match(Qm)||i.match(wa)?i:"unsafe:"+i}(he(i))}const _d="__ngContext__";function Jn(i,s){i[_d]=s}function Uh(i){const s=function Iu(i){return i[_d]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function Ed(i){return i.ngOriginalError}function uy(i,...s){i.error(...s)}class wd{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=function ay(i){return i&&i.ngErrorLogger||uy}(s);l(this._console,"ERROR",s),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Ed(s);for(;a&&Ed(a);)a=Ed(a);return a||null}}const Gh=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Nt))();function y(i){return i instanceof Function?i():i}var x=(()=>((x=x||{})[x.Important=1]="Important",x[x.DashCase=2]="DashCase",x))();function ce(i,s){return undefined(i,s)}function lt(i){const s=i[3];return Di(s)?s[3]:s}function ti(i){return qh(i[13])}function Du(i){return qh(i[4])}function qh(i){for(;null!==i&&!Di(i);)i=i[4];return i}function Ta(i,s,a,l,c){if(null!=l){let f,_=!1;Di(l)?f=l:Lr(l)&&(_=!0,l=l[0]);const E=Gt(l);0===i&&null!==a?null==c?w0(s,a,E):Au(s,a,E,c||null,!0):1===i&&null!==a?Au(s,a,E,c||null,!0):2===i?function S0(i,s,a){const l=ig(i,s);l&&function D0(i,s,a,l){Qt(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,E,_):3===i&&s.destroyNode(E),null!=f&&function gD(i,s,a,l,c){const f=a[7];f!==Gt(a)&&Ta(s,i,l,f,c);for(let E=10;E<a.length;E++){const I=a[E];Kh(I[1],I,i,s,l,f)}}(s,i,f,a,c)}}function Xn(i,s,a){if(Qt(i))return i.createElement(s,a);{const l=null!==a?function nl(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(s):i.createElementNS(l,s)}}function _0(i,s){const a=i[9],l=a.indexOf(s),c=s[3];1024&s[2]&&(s[2]&=-1025,Mo(c,-1)),a.splice(l,1)}function ng(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const c=l[17];null!==c&&c!==i&&_0(c,l),s>0&&(i[a-1][4]=l[4]);const f=Bo(i,10+s);!function zh(i,s){Kh(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const _=f[19];null!==_&&_.detachView(f[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function v0(i,s){if(!(256&s[2])){const a=s[11];Qt(a)&&a.destroyNode&&Kh(i,s,a,3,null,null),function bu(i){let s=i[13];if(!s)return rg(i[1],i);for(;s;){let a=null;if(Lr(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)Lr(s)&&rg(s[1],s),s=s[3];null===s&&(s=i),Lr(s)&&rg(s[1],s),a=s&&s[4]}s=a}}(s)}}function rg(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function dy(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const c=s[a[l]];if(!(c instanceof Oo)){const f=a[l+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const E=c[f[_]],I=f[_+1];try{I.call(E)}finally{}}else try{f.call(c)}finally{}}}}(i,s),function E0(i,s){const a=i.cleanup,l=s[7];let c=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const _=a[f+1],E="function"==typeof _?_(s):Gt(s[_]),I=l[c=a[f+2]],A=a[f+3];"boolean"==typeof A?E.removeEventListener(a[f],I,A):A>=0?l[c=A]():l[c=-A].unsubscribe(),f+=2}else{const _=l[c=a[f+1]];a[f].call(_)}if(null!==l){for(let f=c+1;f<l.length;f++)l[f]();s[7]=null}}(i,s),1===s[1].type&&Qt(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&Di(s[3])){a!==s[3]&&_0(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function fD(i,s,a){return function Tu(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const c=i.data[l.directiveStart].encapsulation;if(c===kt.None||c===kt.Emulated)return null}return zn(l,a)}(i,s.parent,a)}function Au(i,s,a,l,c){Qt(i)?i.insertBefore(s,a,l,c):s.insertBefore(a,l,c)}function w0(i,s,a){Qt(i)?i.appendChild(s,a):s.appendChild(a)}function I0(i,s,a,l,c){null!==l?Au(i,s,a,l,c):w0(i,s,a)}function ig(i,s){return Qt(i)?i.parentNode(s):s.parentNode}let C0=function hy(i,s,a){return 40&i.type?zn(i,a):null};function bd(i,s,a,l){const c=fD(i,l,s),f=s[11],E=function b0(i,s,a){return C0(i,s,a)}(l.parent||s[6],l,s);if(null!=c)if(Array.isArray(a))for(let I=0;I<a.length;I++)I0(f,c,a[I],E,!1);else I0(f,c,a,E,!1)}function sg(i,s){if(null!==s){const a=s.type;if(3&a)return zn(s,i);if(4&a)return og(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return sg(i,l);{const c=i[s.index];return Di(c)?og(-1,c):Gt(c)}}if(32&a)return ce(s,i)()||Gt(i[s.index]);{const l=A0(i,s);return null!==l?Array.isArray(l)?l[0]:sg(lt(i[16]),l):sg(i,s.next)}}return null}function A0(i,s){return null!==s?i[16][6].projection[s.projection]:null}function og(i,s){const a=10+i+1;if(a<s.length){const l=s[a],c=l[1].firstChild;if(null!==c)return sg(l,c)}return s[7]}function M0(i,s,a,l,c,f,_){for(;null!=a;){const E=l[a.index],I=a.type;if(_&&0===s&&(E&&Jn(Gt(E),l),a.flags|=4),64!=(64&a.flags))if(8&I)M0(i,s,a.child,l,c,f,!1),Ta(s,i,c,E,f);else if(32&I){const A=ce(a,l);let S;for(;S=A();)Ta(s,i,c,S,f);Ta(s,i,c,E,f)}else 16&I?ag(i,s,l,a,c,f):Ta(s,i,c,E,f);a=_?a.projectionNext:a.next}}function Kh(i,s,a,l,c,f){M0(a,l,i.firstChild,s,c,f,!1)}function ag(i,s,a,l,c,f){const _=a[16],I=_[6].projection[l.projection];if(Array.isArray(I))for(let A=0;A<I.length;A++)Ta(s,i,c,I[A],f);else M0(i,s,I,_[3],c,f,!0)}function ks(i,s,a){Qt(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function x0(i,s,a){Qt(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function R0(i,s,a){let l=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const f=s.length;if(c+f===l||i.charCodeAt(c+f)<=32)return c}a=c+1}}const Su="ng-template";function ug(i,s,a){let l=0;for(;l<i.length;){let c=i[l++];if(a&&"class"===c){if(c=i[l],-1!==R0(c.toLowerCase(),s,0))return!0}else if(1===c){for(;l<i.length&&"string"==typeof(c=i[l++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function Aa(i){return 4===i.type&&i.value!==Su}function Ot(i,s,a){return s===(4!==i.type||a?i.value:Su)}function yD(i,s,a){let l=4;const c=i.attrs||[],f=function cg(i){for(let s=0;s<i.length;s++)if(ci(i[s]))return s;return i.length}(c);let _=!1;for(let E=0;E<s.length;E++){const I=s[E];if("number"!=typeof I){if(!_)if(4&l){if(l=2|1&l,""!==I&&!Ot(i,I,a)||""===I&&1===s.length){if(pr(l))return!1;_=!0}}else{const A=8&l?I:s[++E];if(8&l&&null!==i.attrs){if(!ug(i.attrs,A,a)){if(pr(l))return!1;_=!0}continue}const k=Xe(8&l?"class":I,c,Aa(i),a);if(-1===k){if(pr(l))return!1;_=!0;continue}if(""!==A){let V;V=k>f?"":c[k+1].toLowerCase();const Z=8&l?V:null;if(Z&&-1!==R0(Z,A,0)||2&l&&A!==V){if(pr(l))return!1;_=!0}}}}else{if(!_&&!pr(l)&&!pr(I))return!1;if(_&&pr(I))continue;_=!1,l=I|1&l}}return pr(l)||_}function pr(i){return 0==(1&i)}function Xe(i,s,a,l){if(null===s)return-1;let c=0;if(l||!a){let f=!1;for(;c<s.length;){const _=s[c];if(_===i)return c;if(3===_||6===_)f=!0;else{if(1===_||2===_){let E=s[++c];for(;"string"==typeof E;)E=s[++c];continue}if(4===_)break;if(0===_){c+=4;continue}}c+=f?1:2}return-1}return function py(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function lg(i,s,a=!1){for(let l=0;l<s.length;l++)if(yD(i,s[l],a))return!0;return!1}function N0(i,s){return i?":not("+s.trim()+")":s}function gy(i){let s=i[0],a=1,l=2,c="",f=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const E=i[++a];c+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?c+="."+_:4&l&&(c+=" "+_);else""!==c&&!pr(_)&&(s+=N0(f,c),c=""),l=_,f=f||!pr(l);a++}return""!==c&&(s+=N0(f,c)),s}const Ct={};function Mr(i){Yh(xt(),Te(),Un()+i,!1)}function Yh(i,s,a,l){if(!l)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&Wi(s,f,a)}else{const f=i.preOrderHooks;null!==f&&Js(s,f,0,a)}Qs(a)}function co(i,s){return i<<17|s<<2}function ho(i){return i>>17&32767}function dg(i){return 2|i}function Sa(i){return(131068&i)>>2}function hg(i,s){return-131069&i|s<<2}function Cd(i){return 1|i}function Ey(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const c=a[l],f=a[l+1];if(-1!==f){const _=i.data[f];jc(c),_.contentQueries(2,s[f],f)}}}function Ad(i,s,a,l,c,f,_,E,I,A){const S=s.blueprint.slice();return S[0]=c,S[2]=140|l,Mi(S),S[3]=S[15]=i,S[8]=a,S[10]=_||i&&i[10],S[11]=E||i&&i[11],S[12]=I||i&&i[12]||null,S[9]=A||i&&i[9]||null,S[6]=f,S[16]=2==s.type?i[16]:S,S}function Sd(i,s,a,l,c){let f=i.data[s];if(null===f)f=function nf(i,s,a,l,c){const f=tu(),_=ul(),I=i.data[s]=function z0(i,s,a,l,c,f){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,a,s,l,c);return null===i.firstChild&&(i.firstChild=I),null!==f&&(_?null==f.child&&null!==I.parent&&(f.child=I):null===f.next&&(f.next=I)),I}(i,s,a,l,c),function dl(){return ft.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=l,f.attrs=c;const _=function Zs(){const i=ft.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return Jr(f,!0),f}function xu(i,s,a,l){if(0===a)return-1;const c=s.length;for(let f=0;f<a;f++)s.push(l),i.blueprint.push(l),i.data.push(null);return c}function Ul(i,s,a){Ys(s);try{const l=i.viewQuery;null!==l&&Fy(1,l,a);const c=i.template;null!==c&&rf(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Ey(i,s),i.staticViewQueries&&Fy(2,i.viewQuery,a);const f=i.components;null!==f&&function wy(i,s){for(let a=0;a<s.length;a++)Ag(i,s[a])}(s,f)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,Vr()}}function bn(i,s,a,l){const c=s[2];if(256!=(256&c)){Ys(s);try{Mi(s),function nu(i){return ft.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&rf(i,s,a,2,l);const _=3==(3&c);if(_){const A=i.preOrderCheckHooks;null!==A&&Wi(s,A,null)}else{const A=i.preOrderHooks;null!==A&&Js(s,A,0,null),Sn(s,0)}if(function Ry(i){for(let s=ti(i);null!==s;s=Du(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const c=a[l],f=c[3];0==(1024&c[2])&&Mo(f,1),c[2]|=1024}}}(s),function af(i){for(let s=ti(i);null!==s;s=Du(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1];qi(l)&&bn(c,l,c.template,l[8])}}(s),null!==i.contentQueries&&Ey(i,s),_){const A=i.contentCheckHooks;null!==A&&Wi(s,A)}else{const A=i.contentHooks;null!==A&&Js(s,A,1),Sn(s,1)}!function SD(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const c=a[l];if(c<0)Qs(~c);else{const f=c,_=a[++l],E=a[++l];iu(_,f),E(2,s[f])}}}finally{Qs(-1)}}(i,s);const E=i.components;null!==E&&function H0(i,s){for(let a=0;a<s.length;a++)Ny(i,s[a])}(s,E);const I=i.viewQuery;if(null!==I&&Fy(2,I,l),_){const A=i.viewCheckHooks;null!==A&&Wi(s,A)}else{const A=i.viewHooks;null!==A&&Js(s,A,2),Sn(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-73,1024&s[2]&&(s[2]&=-1025,Mo(s[3],-1))}finally{Vr()}}}function $r(i,s,a,l){const c=s[10],_=Ks(s);try{!_&&c.begin&&c.begin(),_&&Ul(i,s,l),bn(i,s,a,l)}finally{!_&&c.end&&c.end()}}function rf(i,s,a,l,c){const f=Un(),_=2&l;try{Qs(-1),_&&s.length>20&&Yh(i,s,20,!1),a(l,c)}finally{Qs(f)}}function Iy(i,s,a){!eu()||(function OD(i,s,a,l){const c=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||As(a,s),Jn(l,s);const _=a.initialInputs;for(let E=c;E<f;E++){const I=i.data[E],A=Ci(I);A&&J0(s,a,I);const S=Zi(s,i,E,a);Jn(S,s),null!==_&&X0(0,E-c,S,I,0,_),A&&(Wn(a.index,s)[8]=S)}}(i,s,a,zn(a,s)),128==(128&a.flags)&&function PD(i,s,a){const l=a.directiveStart,c=a.directiveEnd,_=a.index,E=function hl(){return ft.lFrame.currentDirectiveIndex}();try{Qs(_);for(let I=l;I<c;I++){const A=i.data[I],S=s[I];da(I),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&Ru(A,S)}}finally{Qs(-1),da(E)}}(i,s,a))}function Dy(i,s,a=zn){const l=s.localNames;if(null!==l){let c=s.index+1;for(let f=0;f<l.length;f+=2){const _=l[f+1],E=-1===_?a(s,i):i[_];i[c++]=E}}}function by(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=wg(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function wg(i,s,a,l,c,f,_,E,I,A){const S=20+l,k=S+c,V=function MD(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:Ct);return a}(S,k),Z="function"==typeof A?A():A;return V[1]={type:i,blueprint:V,template:a,queries:null,viewQuery:E,declTNode:s,data:V.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:I,consts:Z,incompleteFirstPass:!1}}function Dg(i,s,a,l){const c=hf(s);null===a?c.push(l):(c.push(a),i.firstCreatePass&&Nd(i).push(l,c.length-1))}function W0(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const c=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,c):a[l]=[s,c]}return a}function mi(i,s,a,l,c,f,_,E){const I=zn(s,a);let S,A=s.inputs;!E&&null!=A&&(S=A[l])?(tE(i,a,S,l,c),Sc(s)&&function K0(i,s){const a=Wn(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function Cy(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),c=null!=_?_(c,s.value||"",l):c,Qt(f)?f.setProperty(I,l,c):Mn(l)||(I.setProperty?I.setProperty(l,c):I[l]=c))}function Ay(i,s,a,l){let c=!1;if(eu()){const f=function Y0(i,s,a){const l=i.directiveRegistry;let c=null;if(l)for(let f=0;f<l.length;f++){const _=l[f];lg(a,_.selectors,!1)&&(c||(c=[]),to(As(a,s),i,_.type),Ci(_)?(sf(i,a),c.unshift(_)):c.push(_))}return c}(i,s,a),_=null===l?null:{"":-1};if(null!==f){c=!0,Sy(a,i.data.length,f.length);for(let S=0;S<f.length;S++){const k=f[S];k.providersResolver&&k.providersResolver(k)}let E=!1,I=!1,A=xu(i,s,f.length,null);for(let S=0;S<f.length;S++){const k=f[S];a.mergedAttrs=pa(a.mergedAttrs,k.hostAttrs),ri(i,a,s,A,k),of(A,k,_),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const V=k.type.prototype;!E&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!I&&(V.ngOnChanges||V.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),A++}!function bg(i,s){const l=s.directiveEnd,c=i.data,f=s.attrs,_=[];let E=null,I=null;for(let A=s.directiveStart;A<l;A++){const S=c[A],k=S.inputs,V=null===f||Aa(s)?null:My(k,f);_.push(V),E=W0(k,A,E),I=W0(S.outputs,A,I)}null!==E&&(E.hasOwnProperty("class")&&(s.flags|=16),E.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=E,s.outputs=I}(i,a)}_&&function Q0(i,s,a){if(s){const l=i.localNames=[];for(let c=0;c<s.length;c+=2){const f=a[s[c+1]];if(null==f)throw new Re(-301,!1);l.push(s[c],f)}}}(a,l,_)}return a.mergedAttrs=pa(a.mergedAttrs,a.attrs),c}function Z0(i,s,a,l,c,f){const _=f.hostBindings;if(_){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const I=~s.index;(function Md(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(E)!=I&&E.push(I),E.push(l,c,_)}}function Ru(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function sf(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function of(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;Ci(s)&&(a[""]=i)}}function Sy(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function ri(i,s,a,l,c){i.data[l]=c;const f=c.factory||(c.factory=lr(c.type)),_=new Oo(f,Ci(c),null);i.blueprint[l]=_,a[l]=_,Z0(i,s,0,l,xu(i,a,c.hostVars,Ct),c)}function J0(i,s,a){const l=zn(s,i),c=by(a),f=i[10],_=cf(i,Ad(i,c,null,a.onPush?64:16,l,s,f,f.createRenderer(l,a),null,null));i[s.index]=_}function Li(i,s,a,l,c,f){const _=zn(i,s);!function xd(i,s,a,l,c,f,_){if(null==f)Qt(i)?i.removeAttribute(s,c,a):s.removeAttribute(c);else{const E=null==_?he(f):_(f,l||"",c);Qt(i)?i.setAttribute(s,c,E,a):a?s.setAttributeNS(a,c,E):s.setAttribute(c,E)}}(s[11],_,f,i.value,a,l,c)}function X0(i,s,a,l,c,f){const _=f[s];if(null!==_){const E=l.setInput;for(let I=0;I<_.length;){const A=_[I++],S=_[I++],k=_[I++];null!==E?l.setInput(a,k,A,S):a[S]=k}}}function My(i,s){let a=null,l=0;for(;l<s.length;){const c=s[l];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[l+1])),l+=2}else l+=2;else l+=4}return a}function xy(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function Ny(i,s){const a=Wn(s,i);if(qi(a)){const l=a[1];80&a[2]?bn(l,a,l.template,a[8]):a[5]>0&&uf(a)}}function uf(i){for(let l=ti(i);null!==l;l=Du(l))for(let c=10;c<l.length;c++){const f=l[c];if(1024&f[2]){const _=f[1];bn(_,f,_.template,f[8])}else f[5]>0&&uf(f)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const c=Wn(a[l],i);qi(c)&&c[5]>0&&uf(c)}}function Ag(i,s){const a=Wn(s,i),l=a[1];(function lf(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),Ul(l,a,a[8])}function cf(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function Oy(i){for(;i;){i[2]|=64;const s=lt(i);if(Xu(i)&&!s)return i;i=s}return null}function ky(i){!function Rd(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=Uh(a),c=l[1];$r(c,l,c.template,a)}}(i[8])}function Fy(i,s,a){jc(0),s(i,a)}const eE=(()=>Promise.resolve(null))();function hf(i){return i[7]||(i[7]=[])}function Nd(i){return i.cleanup||(i.cleanup=[])}function Mg(i,s){const a=i[9],l=a?a.get(wd,null):null;l&&l.handleError(s)}function tE(i,s,a,l,c){for(let f=0;f<a.length;){const _=a[f++],E=a[f++],I=s[_],A=i.data[_];null!==A.setInput?A.setInput(I,c,l,E):I[E]=c}}function fo(i,s,a){const l=Is(s,i);!function Id(i,s,a){Qt(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function Ma(i,s,a){let l=a?i.styles:null,c=a?i.classes:null,f=0;if(null!==s)for(let _=0;_<s.length;_++){const E=s[_];"number"==typeof E?f=E:1==f?c=ue(c,E):2==f&&(l=ue(l,E+": "+s[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=c:i.classesWithoutHost=c}const Vy=new cn("INJECTOR",-1);class Ou{get(s,a=Os){if(a===Os){const l=new Error(`NullInjectorError: No provider for ${ie(s)}!`);throw l.name="NullInjectorError",l}return a}}const po=new cn("Set Injector scope."),Pu={},xg={};let Od;function Uy(){return void 0===Od&&(Od=new Ou),Od}function dn(i,s=null,a=null,l){const c=ff(i,s,a,l);return c._resolveInjectorDefTypes(),c}function ff(i,s=null,a=null,l){return new UD(i,a,s||Uy(),l)}class UD{constructor(s,a,l,c=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];a&&Ar(a,E=>this.processProvider(E,s,a)),Ar([s],E=>this.processInjectorType(E,[],f)),this.records.set(Vy,jl(void 0,this));const _=this.records.get(po);this.scope=null!=_?_.value:null,this.source=c||("object"==typeof s?null:ie(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=Os,l=ht.Default){this.assertNotDestroyed();const c=fe(this),f=pn(void 0);try{if(!(l&ht.SkipSelf)){let E=this.records.get(s);if(void 0===E){const I=function sE(i){return"function"==typeof i||"object"==typeof i&&i instanceof cn}(s)&&Mt(s);E=I&&this.injectableDefInScope(I)?jl(By(s),Pu):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(l&ht.Self?Uy():this.parent).get(s,a=l&ht.Optional&&a===Os?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[va]=_[va]||[]).unshift(ie(s)),c)throw _;return function ts(i,s,a,l){const c=i[va];throw s[F]&&c.unshift(s[F]),i.message=function Pi(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let c=ie(s);if(Array.isArray(s))c=s.map(ie).join(" -> ");else if("object"==typeof s){let f=[];for(let _ in s)if(s.hasOwnProperty(_)){let E=s[_];f.push(_+":"+("string"==typeof E?JSON.stringify(E):ie(E)))}c=`{${f.join(", ")}}`}return`${a}${l?"("+l+")":""}[${c}]: ${i.replace(b,"\n  ")}`}("\n"+i.message,c,a,l),i.ngTokenPath=c,i[va]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{pn(f),fe(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,c)=>s.push(ie(c))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Re(205,!1)}processInjectorType(s,a,l){if(!(s=X(s)))return!1;let c=Er(s);const f=null==c&&s.ngModule||void 0,_=void 0===f?s:f,E=-1!==l.indexOf(_);if(void 0!==f&&(c=Er(f)),null==c)return!1;if(null!=c.imports&&!E){let S;l.push(_);try{Ar(c.imports,k=>{this.processInjectorType(k,a,l)&&(void 0===S&&(S=[]),S.push(k))})}finally{}if(void 0!==S)for(let k=0;k<S.length;k++){const{ngModule:V,providers:Z}=S[k];Ar(Z,ye=>this.processProvider(ye,V,Z||L))}}this.injectorDefTypes.add(_);const I=lr(_)||(()=>new _);this.records.set(_,jl(I,Pu));const A=c.providers;if(null!=A&&!E){const S=s;Ar(A,k=>this.processProvider(k,S,A))}return void 0!==f&&void 0!==s.providers}processProvider(s,a,l){let c=Pd(s=X(s))?s:X(s&&s.provide);const f=function gf(i,s,a){return rE(i)?jl(void 0,i.useValue):jl(nE(i),Pu)}(s);if(Pd(s)||!0!==s.multi)this.records.get(c);else{let _=this.records.get(c);_||(_=jl(void 0,Pu,!0),_.factory=()=>Et(_.multi),this.records.set(c,_)),c=s,_.multi.push(s)}this.records.set(c,f)}hydrate(s,a){return a.value===Pu&&(a.value=xg,a.value=a.factory()),"object"==typeof a.value&&a.value&&function iE(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=X(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function By(i){const s=Mt(i),a=null!==s?s.factory:lr(i);if(null!==a)return a;if(i instanceof cn)throw new Re(204,!1);if(i instanceof Function)return function pf(i){const s=i.length;if(s>0)throw function Ji(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?"),new Re(204,!1);const a=function zr(i){const s=i&&(i[vi]||i[Wr]);if(s){const a=function rr(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Re(204,!1)}function nE(i,s,a){let l;if(Pd(i)){const c=X(i);return lr(c)||By(c)}if(rE(i))l=()=>X(i.useValue);else if(function jD(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...Et(i.deps||[]));else if(function BD(i){return!(!i||!i.useExisting)}(i))l=()=>tt(X(i.useExisting));else{const c=X(i&&(i.useClass||i.provide));if(!function ku(i){return!!i.deps}(i))return lr(c)||By(c);l=()=>new c(...Et(i.deps))}return l}function jl(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function rE(i){return null!==i&&"object"==typeof i&&K in i}function Pd(i){return"function"==typeof i}let go=(()=>{class i{static create(a,l){var c;if(Array.isArray(a))return dn({name:""},l,a,"");{const f=null!==(c=a.name)&&void 0!==c?c:"";return dn({name:f},a.parent,a.providers,f)}}}return i.THROW_IF_NOT_FOUND=Os,i.NULL=new Ou,i.\u0275prov=Ht({token:i,providedIn:"any",factory:()=>tt(Vy)}),i.__NG_ELEMENT_ID__=-1,i})();function qD(i,s){ha(Uh(i)[1],rn())}function kg(i){let s=function Ky(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let c;if(Ci(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Re(903,"");c=s.\u0275dir}if(c){if(a){l.push(c);const _=i;_.inputs=kd(i.inputs),_.declaredInputs=kd(i.declaredInputs),_.outputs=kd(i.outputs);const E=c.hostBindings;E&&gE(i,E);const I=c.viewQuery,A=c.contentQueries;if(I&&pE(i,I),A&&xa(i,A),ae(i.inputs,c.inputs),ae(i.declaredInputs,c.declaredInputs),ae(i.outputs,c.outputs),Ci(c)&&c.data.animation){const S=i.data;S.animation=(S.animation||[]).concat(c.data.animation)}}const f=c.features;if(f)for(let _=0;_<f.length;_++){const E=f[_];E&&E.ngInherit&&E(i),E===kg&&(a=!1)}}s=Object.getPrototypeOf(s)}!function fE(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const c=i[l];c.hostVars=s+=c.hostVars,c.hostAttrs=pa(c.hostAttrs,a=pa(a,c.hostAttrs))}}(l)}function kd(i){return i===or?{}:i===L?[]:i}function pE(i,s){const a=i.viewQuery;i.viewQuery=a?(l,c)=>{s(l,c),a(l,c)}:s}function xa(i,s){const a=i.contentQueries;i.contentQueries=a?(l,c,f)=>{s(l,c,f),a(l,c,f)}:s}function gE(i,s){const a=i.hostBindings;i.hostBindings=a?(l,c)=>{s(l,c),a(l,c)}:s}let _f=null;function Lu(){if(!_f){const i=Nt.Symbol;if(i&&i.iterator)_f=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(_f=l)}}}return _f}function Fd(i){return!!Qy(i)&&(Array.isArray(i)||!(i instanceof Map)&&Lu()in i)}function Qy(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Hr(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Vg(i,s,a,l){const c=Te();return Hr(c,bs(),s)&&(xt(),Li(En(),c,i,s,a,l)),Vg}function Hl(i,s,a,l){return Hr(i,bs(),a)?s+he(a)+l:Ct}function wE(i,s,a,l,c,f,_,E){const I=Te(),A=xt(),S=i+20,k=A.firstCreatePass?function EE(i,s,a,l,c,f,_,E,I){const A=s.consts,S=Sd(s,i,4,_||null,ui(A,E));Ay(s,a,S,ui(A,I)),ha(s,S);const k=S.tViews=wg(2,S,l,c,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,A);return null!==s.queries&&(s.queries.template(s,S),k.queries=s.queries.embeddedTView(S)),S}(S,A,I,s,a,l,c,f,_):A.data[S];Jr(k,!1);const V=I[11].createComment("");bd(A,I,V,k),Jn(V,I),cf(I,I[S]=xy(V,I,V,k)),bi(k)&&Iy(A,I,k),null!=_&&Dy(I,k,E)}function Ef(i,s=ht.Default){const a=Te();return null===a?tt(i,s):Lo(rn(),a,X(i),s)}function tr(){throw new Error("invalid")}function a_(i,s,a){const l=Te();return Hr(l,bs(),s)&&mi(xt(),En(),l,i,s,l[11],a,!1),a_}function Wo(i,s,a,l,c){const _=c?"class":"style";tE(i,a,s.inputs[_],_,l)}function Ko(i,s,a,l){const c=Te(),f=xt(),_=20+i,E=c[11],I=c[_]=Xn(E,s,function xp(){return ft.lFrame.currentNamespace}()),A=f.firstCreatePass?function Nn(i,s,a,l,c,f,_){const E=s.consts,A=Sd(s,i,2,c,ui(E,f));return Ay(s,a,A,ui(E,_)),null!==A.attrs&&Ma(A,A.attrs,!1),null!==A.mergedAttrs&&Ma(A,A.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,A),A}(_,f,c,0,s,a,l):f.data[_];Jr(A,!0);const S=A.mergedAttrs;null!==S&&Cr(E,I,S);const k=A.classes;null!==k&&x0(E,I,k);const V=A.styles;return null!==V&&ks(E,I,V),64!=(64&A.flags)&&bd(f,c,I,A),0===function ca(){return ft.lFrame.elementDepthCount}()&&Jn(I,c),function ol(){ft.lFrame.elementDepthCount++}(),bi(A)&&(Iy(f,c,A),function Eg(i,s,a){if(Ya(s)){const c=s.directiveEnd;for(let f=s.directiveStart;f<c;f++){const _=i.data[f];_.contentQueries&&_.contentQueries(1,a[f],f)}}}(f,A,c)),null!==l&&Dy(c,A),Ko}function jd(){let i=rn();ul()?function ll(){ft.lFrame.isParent=!1}():(i=i.parent,Jr(i,!1));const s=i;!function Xa(){ft.lFrame.elementDepthCount--}();const a=xt();return a.firstCreatePass&&(ha(a,i),Ya(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Op(i){return 0!=(16&i.flags)}(s)&&Wo(a,s,Te(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function an(i){return 0!=(32&i.flags)}(s)&&Wo(a,s,Te(),s.stylesWithoutHost,!1),jd}function $g(i,s,a,l){return Ko(i,s,a,l),jd(),$g}function u_(){return Te()}function je(i){return!!i&&"function"==typeof i.then}function ka(i){return!!i&&"function"==typeof i.subscribe}const wf=ka;function Fa(i,s,a,l){const c=Te(),f=xt(),_=rn();return function La(i,s,a,l,c,f,_,E){const I=bi(l),S=i.firstCreatePass&&Nd(i),k=s[8],V=hf(s);let Z=!0;if(3&l.type||E){const $e=zn(l,s),Fe=E?E($e):$e,Se=V.length,pt=E?dt=>E(Gt(dt[l.index])):l.index;if(Qt(a)){let dt=null;if(!E&&I&&(dt=function If(i,s,a,l){const c=i.cleanup;if(null!=c)for(let f=0;f<c.length-1;f+=2){const _=c[f];if(_===a&&c[f+1]===l){const E=s[7],I=c[f+2];return E.length>I?E[I]:null}"string"==typeof _&&(f+=2)}return null}(i,s,c,l.index)),null!==dt)(dt.__ngLastListenerFn__||dt).__ngNextListenerFn__=f,dt.__ngLastListenerFn__=f,Z=!1;else{f=Bu(l,s,k,f,!1);const Kt=a.listen(Fe,c,f);V.push(f,Kt),S&&S.push(c,pt,Se,Se+1)}}else f=Bu(l,s,k,f,!0),Fe.addEventListener(c,f,_),V.push(f),S&&S.push(c,pt,Se,_)}else f=Bu(l,s,k,f,!1);const ye=l.outputs;let Pe;if(Z&&null!==ye&&(Pe=ye[c])){const $e=Pe.length;if($e)for(let Fe=0;Fe<$e;Fe+=2){const cs=s[Pe[Fe]][Pe[Fe+1]].subscribe(f),bc=V.length;V.push(f,cs),S&&S.push(c,l.index,bc,-(bc+1))}}}(f,c,c[11],_,i,s,!!a,l),Fa}function l_(i,s,a,l){try{return!1!==a(l)}catch(c){return Mg(i,c),!1}}function Bu(i,s,a,l,c){return function f(_){if(_===Function)return l;const E=2&i.flags?Wn(i.index,s):s;0==(32&s[2])&&Oy(E);let I=l_(s,0,l,_),A=f.__ngNextListenerFn__;for(;A;)I=l_(s,0,A,_)&&I,A=A.__ngNextListenerFn__;return c&&!1===I&&(_.preventDefault(),_.returnValue=!1),I}}function Gg(i=1){return function Dh(i){return(ft.lFrame.contextLView=function fl(i,s){for(;i>0;)s=s[15],i--;return s}(i,ft.lFrame.contextLView))[8]}(i)}function bf(i,s,a,l,c){const f=Te(),_=Hl(f,s,a,l);return _!==Ct&&mi(xt(),En(),f,i,_,f[11],c,!1),bf}function zg(i,s,a,l,c){const f=i[a+1],_=null===s;let E=l?ho(f):Sa(f),I=!1;for(;0!==E&&(!1===I||_);){const S=i[E+1];Xl(i[E],s)&&(I=!0,i[E+1]=l?Cd(S):dg(S)),E=l?ho(S):Sa(S)}I&&(i[a+1]=l?dg(f):Cd(f))}function Xl(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Ho(i,s)>=0}function tc(i,s){return function sn(i,s,a,l){const c=Te(),f=xt(),_=function li(i){const s=ft.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);f.firstUpdatePass&&function VE(i,s,a,l){const c=i.data;if(null===c[a+1]){const f=c[Un()],_=function LE(i,s){return s>=i.expandoStartIndex}(i,a);(function $E(i,s){return 0!=(i.flags&(s?16:32))})(f,l)&&null===s&&!_&&(s=!1),s=function UE(i,s,a,l){const c=function su(i){const s=ft.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=l?s.residualClasses:s.residualStyles;if(null===c)0===(l?s.classBindings:s.styleBindings)&&(a=Vs(a=m_(null,i,s,a,l),s.attrs,l),f=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==c)if(a=m_(c,i,s,a,l),null===f){let I=function tb(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==Sa(l))return i[ho(l)]}(i,s,l);void 0!==I&&Array.isArray(I)&&(I=m_(null,i,s,I[1],l),I=Vs(I,s.attrs,l),function nb(i,s,a,l){i[ho(a?s.classBindings:s.styleBindings)]=l}(i,s,l,I))}else f=function rb(i,s,a){let l;const c=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<c;f++)l=Vs(l,i[f].hostAttrs,a);return Vs(l,s.attrs,a)}(i,s,l)}return void 0!==f&&(l?s.residualClasses=f:s.residualStyles=f),a}(c,f,s,l),function hn(i,s,a,l,c,f){let _=f?s.classBindings:s.styleBindings,E=ho(_),I=Sa(_);i[l]=a;let S,A=!1;if(Array.isArray(a)){const k=a;S=k[1],(null===S||Ho(k,S)>0)&&(A=!0)}else S=a;if(c)if(0!==I){const V=ho(i[E+1]);i[l+1]=co(V,E),0!==V&&(i[V+1]=hg(i[V+1],l)),i[E+1]=function P0(i,s){return 131071&i|s<<17}(i[E+1],l)}else i[l+1]=co(E,0),0!==E&&(i[E+1]=hg(i[E+1],l)),E=l;else i[l+1]=co(I,0),0===E?E=l:i[I+1]=hg(i[I+1],l),I=l;A&&(i[l+1]=dg(i[l+1])),zg(i,S,l,!0),zg(i,S,l,!1),function qg(i,s,a,l,c){const f=c?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&Ho(f,s)>=0&&(a[l+1]=Cd(a[l+1]))}(s,S,i,l,f),_=co(E,I),f?s.classBindings=_:s.styleBindings=_}(c,f,s,a,_,l)}}(f,i,_,l),s!==Ct&&Hr(c,_,s)&&function y_(i,s,a,l,c,f,_,E){if(!(3&s.type))return;const I=i.data,A=I[E+1];Af(function fg(i){return 1==(1&i)}(A)?Zo(I,s,a,c,Sa(A),_):void 0)||(Af(f)||function O0(i){return 2==(2&i)}(A)&&(f=Zo(I,null,a,c,E,_)),function mD(i,s,a,l,c){const f=Qt(i);if(s)c?f?i.addClass(a,l):a.classList.add(l):f?i.removeClass(a,l):a.classList.remove(l);else{let _=-1===l.indexOf("-")?void 0:x.DashCase;if(null==c)f?i.removeStyle(a,l,_):a.style.removeProperty(l);else{const E="string"==typeof c&&c.endsWith("!important");E&&(c=c.slice(0,-10),_|=x.Important),f?i.setStyle(a,l,c,_):a.style.setProperty(l,c,E?"important":"")}}}(l,_,Is(Un(),a),c,f))}(f,f.data[Un()],c,c[11],i,c[_+1]=function Wd(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=ie(pi(i)))),i}(s,a),l,_)}(i,s,null,!0),tc}function m_(i,s,a,l,c){let f=null;const _=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<_&&(f=s[E],l=Vs(l,f.hostAttrs,c),f!==i);)E++;return null!==i&&(a.directiveStylingLast=E),l}function Vs(i,s,a){const l=a?1:2;let c=-1;if(null!==s)for(let f=0;f<s.length;f++){const _=s[f];"number"==typeof _?c=_:c===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),dr(i,_,!!a||s[++f]))}return void 0===i?null:i}function Zo(i,s,a,l,c,f){const _=null===s;let E;for(;c>0;){const I=i[c],A=Array.isArray(I),S=A?I[1]:I,k=null===S;let V=a[c+1];V===Ct&&(V=k?L:void 0);let Z=k?_a(V,l):S===l?V:void 0;if(A&&!Af(Z)&&(Z=_a(I,l)),Af(Z)&&(E=Z,_))return E;const ye=i[c+1];c=_?ho(ye):Sa(ye)}if(null!==s){let I=f?s.residualClasses:s.residualStyles;null!=I&&(E=_a(I,l))}return E}function Af(i){return void 0!==i}function Kg(i,s=""){const a=Te(),l=xt(),c=i+20,f=l.firstCreatePass?Sd(l,c,1,s,null):l.data[c],_=a[c]=function Fl(i,s){return Qt(i)?i.createText(s):i.createTextNode(s)}(a[11],s);bd(l,a,_,f),Jr(f,!1)}function Sf(i){return Mf("",i,""),Sf}function Mf(i,s,a){const l=Te(),c=Hl(l,i,s,a);return c!==Ct&&fo(l,Un(),c),Mf}const as=void 0;var rw=["en",[["a","p"],["AM","PM"],as],[["AM","PM"],as,as],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],as,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],as,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",as,"{1} 'at' {0}",as],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function nw(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let sc={};function Of(i){const s=function ju(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=jt(s);if(a)return a;const l=s.split("-")[0];if(a=jt(l),a)return a;if("en"===l)return rw;throw new Error(`Missing locale data for the locale "${i}".`)}function Gn(i){return Of(i)[gt.PluralCase]}function jt(i){return i in sc||(sc[i]=Nt.ng&&Nt.ng.common&&Nt.ng.common.locales&&Nt.ng.common.locales[i]),sc[i]}var gt=(()=>((gt=gt||{})[gt.LocaleId=0]="LocaleId",gt[gt.DayPeriodsFormat=1]="DayPeriodsFormat",gt[gt.DayPeriodsStandalone=2]="DayPeriodsStandalone",gt[gt.DaysFormat=3]="DaysFormat",gt[gt.DaysStandalone=4]="DaysStandalone",gt[gt.MonthsFormat=5]="MonthsFormat",gt[gt.MonthsStandalone=6]="MonthsStandalone",gt[gt.Eras=7]="Eras",gt[gt.FirstDayOfWeek=8]="FirstDayOfWeek",gt[gt.WeekendRange=9]="WeekendRange",gt[gt.DateFormat=10]="DateFormat",gt[gt.TimeFormat=11]="TimeFormat",gt[gt.DateTimeFormat=12]="DateTimeFormat",gt[gt.NumberSymbols=13]="NumberSymbols",gt[gt.NumberFormats=14]="NumberFormats",gt[gt.CurrencyCode=15]="CurrencyCode",gt[gt.CurrencySymbol=16]="CurrencySymbol",gt[gt.CurrencyName=17]="CurrencyName",gt[gt.Currencies=18]="Currencies",gt[gt.Directionality=19]="Directionality",gt[gt.PluralCase=20]="PluralCase",gt[gt.ExtraData=21]="ExtraData",gt))();const em="en-US";let iw=em;function Bf(i,s,a,l,c){if(i=X(i),Array.isArray(i))for(let f=0;f<i.length;f++)Bf(i[f],s,a,l,c);else{const f=xt(),_=Te();let E=Pd(i)?i:X(i.provide),I=nE(i);const A=rn(),S=1048575&A.providerIndexes,k=A.directiveStart,V=A.providerIndexes>>20;if(Pd(i)||!i.multi){const Z=new Oo(I,c,Ef),ye=jf(E,s,c?S:S+V,k);-1===ye?(to(As(A,_),f,E),im(f,i,s.length),s.push(E),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),a.push(Z),_.push(Z)):(a[ye]=Z,_[ye]=Z)}else{const Z=jf(E,s,S+V,k),ye=jf(E,s,S,S+V),Pe=Z>=0&&a[Z],$e=ye>=0&&a[ye];if(c&&!$e||!c&&!Pe){to(As(A,_),f,E);const Fe=function Sw(i,s,a,l,c){const f=new Oo(i,a,Ef);return f.multi=[],f.index=s,f.componentProviders=0,_r(f,c,l&&!a),f}(c?k_:P_,a.length,c,l,I);!c&&$e&&(a[ye].providerFactory=Fe),im(f,i,s.length,0),s.push(E),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),a.push(Fe),_.push(Fe)}else im(f,i,Z>-1?Z:ye,_r(a[c?ye:Z],I,!c&&l));!c&&l&&$e&&a[ye].componentProviders++}}}function im(i,s,a,l){const c=Pd(s),f=function mf(i){return!!i.useClass}(s);if(c||f){const I=(f?X(s.useClass):s).prototype.ngOnDestroy;if(I){const A=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const S=A.indexOf(a);-1===S?A.push(a,[l,I]):A[S+1].push(l,I)}else A.push(a,I)}}}function _r(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function jf(i,s,a,l){for(let c=a;c<l;c++)if(s[c]===i)return c;return-1}function P_(i,s,a,l){return Jo(this.multi,[])}function k_(i,s,a,l){const c=this.multi;let f;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=Zi(a,a[1],this.providerFactory.index,l);f=E.slice(0,_),Jo(c,f);for(let I=_;I<E.length;I++)f.push(E[I])}else f=[],Jo(c,f);return f}function Jo(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function Mw(i,s=[]){return a=>{a.providersResolver=(l,c)=>function Aw(i,s,a){const l=xt();if(l.firstCreatePass){const c=Ci(i);Bf(a,l.data,l.blueprint,c,!0),Bf(s,l.data,l.blueprint,c,!1)}}(l,c?c(i):i,s)}}class $f{}class Gf{resolveComponentFactory(s){throw function ac(i){const s=Error(`No component factory found for ${ie(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let qf=(()=>{class i{}return i.NULL=new Gf,i})();function F_(){return zu(rn(),Te())}function zu(i,s){return new rh(zn(i,s))}let rh=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=F_,i})();function Ob(i){return i instanceof rh?i.nativeElement:i}class L_{}let V_=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function uc(){const i=Te(),a=Wn(rn().index,i);return function zf(i){return i[11]}(Lr(a)?a:i)}(),i})(),kb=(()=>{class i{}return i.\u0275prov=Ht({token:i,providedIn:"root",factory:()=>null}),i})();class U_{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Rw=new U_("13.3.9"),B_={};function sm(i,s,a,l,c=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&l.push(Gt(f)),Di(f))for(let E=10;E<f.length;E++){const I=f[E],A=I[1].firstChild;null!==A&&sm(I[1],I,A,l)}const _=a.type;if(8&_)sm(i,s,a.child,l);else if(32&_){const E=ce(a,s);let I;for(;I=E();)l.push(I)}else if(16&_){const E=A0(s,a);if(Array.isArray(E))l.push(...E);else{const I=lt(s[16]);sm(I[1],I,E,l,!0)}}a=c?a.projectionNext:a.next}return l}class Ua{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return sm(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Di(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(ng(s,l),Bo(a,l))}this._attachedToViewContainer=!1}v0(this._lView[1],this._lView)}onDestroy(s){Dg(this._lView[1],this._lView,null,s)}markForCheck(){Oy(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function df(i,s,a){const l=s[10];l.begin&&l.begin();try{bn(i,s,i.template,a)}catch(c){throw Mg(s,c),c}finally{l.end&&l.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Re(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Dd(i,s){Kh(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Re(902,"");this._appRef=s}}class lc extends Ua{constructor(s){super(s),this._view=s}detectChanges(){ky(this._view)}checkNoChanges(){}get context(){return null}}class Wu extends qf{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Tn(s);return new Wf(a,this.ngModule)}}function j_(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class Wf extends $f{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function _D(i){return i.map(gy).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return j_(this.componentDef.inputs)}get outputs(){return j_(this.componentDef.outputs)}create(s,a,l,c){const f=(c=c||this.ngModule)?function Lb(i,s){return{get:(a,l,c)=>{const f=i.get(a,B_,c);return f!==B_||l===B_?f:s.get(a,l,c)}}}(s,c.injector):s,_=f.get(L_,aa),E=f.get(kb,null),I=_.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",S=l?function q0(i,s,a){if(Qt(i))return i.selectRootElement(s,a===kt.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(I,l,this.componentDef.encapsulation):Xn(_.createRenderer(null,this.componentDef),A,function Fb(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(A)),k=this.componentDef.onPush?576:528,V=function hE(i,s){return{components:[],scheduler:i||Gh,clean:eE,playerHandler:s||null,flags:0}}(),Z=wg(0,null,null,1,0,null,null,null,null,null),ye=Ad(null,Z,V,k,null,null,_,I,E,f);let Pe,$e;Ys(ye);try{const Fe=function Wy(i,s,a,l,c,f){const _=a[1];a[20]=i;const I=Sd(_,20,2,"#host",null),A=I.mergedAttrs=s.hostAttrs;null!==A&&(Ma(I,A,!0),null!==i&&(Cr(c,i,A),null!==I.classes&&x0(c,i,I.classes),null!==I.styles&&ks(c,i,I.styles)));const S=l.createRenderer(i,s),k=Ad(a,by(s),null,s.onPush?64:16,a[20],I,l,S,f||null,null);return _.firstCreatePass&&(to(As(I,a),_,s.type),sf(_,I),Sy(I,a.length,1)),cf(a,k),a[20]=k}(S,this.componentDef,ye,_,I);if(S)if(l)Cr(I,S,["ng-version",Rw.full]);else{const{attrs:Se,classes:pt}=function vD(i){const s=[],a=[];let l=1,c=2;for(;l<i.length;){let f=i[l];if("string"==typeof f)2===c?""!==f&&s.push(f,i[++l]):8===c&&a.push(f);else{if(!pr(c))break;c=f}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Se&&Cr(I,S,Se),pt&&pt.length>0&&x0(I,S,pt.join(" "))}if($e=on(Z,20),void 0!==a){const Se=$e.projection=[];for(let pt=0;pt<this.ngContentSelectors.length;pt++){const dt=a[pt];Se.push(null!=dt?Array.from(dt):null)}}Pe=function dE(i,s,a,l,c){const f=a[1],_=function Tg(i,s,a){const l=rn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),ri(i,l,s,xu(i,s,1,null),a));const c=Zi(s,i,l.directiveStart,l);Jn(c,s);const f=zn(l,s);return f&&Jn(f,s),c}(f,a,s);if(l.components.push(_),i[8]=_,c&&c.forEach(I=>I(_,s)),s.contentQueries){const I=rn();s.contentQueries(1,_,I.directiveStart)}const E=rn();return!f.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Qs(E.index),Z0(a[1],E,0,E.directiveStart,E.directiveEnd,s),Ru(s,_)),_}(Fe,this.componentDef,ye,V,[qD]),Ul(Z,ye,null)}finally{Vr()}return new Nw(this.componentType,Pe,zu($e,ye),ye,$e)}}class Nw extends class xw{}{constructor(s,a,l,c,f){super(),this.location=l,this._rootLView=c,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new lc(c),this.componentType=s}get injector(){return new xs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class Ba{}class Zf{}const cc=new Map;class hc extends Ba{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Wu(this);const l=An(s);this._bootstrapComponents=y(l.bootstrap),this._r3Injector=ff(s,a,[{provide:Ba,useValue:this},{provide:qf,useValue:this.componentFactoryResolver}],ie(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=go.THROW_IF_NOT_FOUND,l=ht.Default){return s===go||s===Ba||s===Vy?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class um extends Zf{constructor(s){super(),this.moduleType=s,null!==An(s)&&function am(i){const s=new Set;!function a(l){const c=An(l,!0),f=c.id;null!==f&&(function $_(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${ie(s)} vs ${ie(s.name)}`)}(f,cc.get(f),l),cc.set(f,l));const _=y(c.imports);for(const E of _)s.has(E)||(s.add(E),a(E))}(i)}(s)}create(s){return new hc(this.moduleType,s)}}function yc(i){return s=>{setTimeout(i,void 0,s)}}const ls=class z_ extends g.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var c,f,_;let E=s,I=a||(()=>null),A=l;if(s&&"object"==typeof s){const k=s;E=null===(c=k.next)||void 0===c?void 0:c.bind(k),I=null===(f=k.error)||void 0===f?void 0:f.bind(k),A=null===(_=k.complete)||void 0===_?void 0:_.bind(k)}this.__isAsync&&(I=yc(I),E&&(E=yc(E)),A&&(A=yc(A)));const S=super.subscribe({next:E,error:I,complete:A});return s instanceof Q.w0&&s.add(S),S}};function W_(){return this._results[Lu()]()}class K_{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Lu(),l=K_.prototype;l[a]||(l[a]=W_)}get changes(){return this._changes||(this._changes=new ls)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const c=Tr(s);(this._changesDetected=!function Th(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let c=i[l],f=s[l];if(a&&(c=a(c),f=a(f)),f!==c)return!1}return!0}(l._results,c,a))&&(l._results=c,l.length=c.length,l.last=c[this.length-1],l.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let _c=(()=>{class i{}return i.__NG_ELEMENT_ID__=Gw,i})();const Hw=_c,$b=class extends Hw{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=Ad(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(l[19]=f.createEmbeddedView(a)),Ul(a,l,s),new Ua(l)}};function Gw(){return Xf(rn(),Te())}function Xf(i,s){return 4&i.type?new $b(s,i,zu(i,s)):null}let sh=(()=>{class i{}return i.__NG_ELEMENT_ID__=Hb,i})();function Hb(){return vc(rn(),Te())}const qw=sh,zw=class extends qw{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return zu(this._hostTNode,this._hostLView)}get injector(){return new xs(this._hostTNode,this._hostLView)}get parentInjector(){const s=Zn(this._hostTNode,this._hostLView);if(Po(s)){const a=Ts(s,this._hostLView),l=Cs(s);return new xs(a[1].data[l+8],a)}return new xs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=Z_(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const c=s.createEmbeddedView(a||{});return this.insert(c,l),c}createComponent(s,a,l,c,f){const _=s&&!function hu(i){return"function"==typeof i}(s);let E;if(_)E=a;else{const k=a||{};E=k.index,l=k.injector,c=k.projectableNodes,f=k.ngModuleRef}const I=_?s:new Wf(Tn(s)),A=l||this.parentInjector;if(!f&&null==I.ngModule){const V=(_?A:this.parentInjector).get(Ba,null);V&&(f=V)}const S=I.create(A,c,void 0,f);return this.insert(S.hostView,E),S}insert(s,a){const l=s._lView,c=l[1];if(function la(i){return Di(i[3])}(l)){const S=this.indexOf(s);if(-1!==S)this.detach(S);else{const k=l[3],V=new zw(k,k[6],k[3]);V.detach(V.indexOf(s))}}const f=this._adjustIndex(a),_=this._lContainer;!function Cu(i,s,a,l){const c=10+l,f=a.length;l>0&&(a[c-1][4]=s),l<f-10?(s[4]=a[c],ya(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function hD(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const E=s[19];null!==E&&E.insertView(i),s[2]|=128}(c,l,_,f);const E=og(f,_),I=l[11],A=ig(I,_[7]);return null!==A&&function Wh(i,s,a,l,c,f){l[0]=c,l[6]=s,Kh(i,l,a,1,c,f)}(c,_[6],I,l,A,E),s.attachToViewContainerRef(),ya(Y_(_),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=Z_(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=ng(this._lContainer,a);l&&(Bo(Y_(this._lContainer),a),v0(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=ng(this._lContainer,a);return l&&null!=Bo(Y_(this._lContainer),a)?new Ua(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function Z_(i){return i[8]}function Y_(i){return i[8]||(i[8]=[])}function vc(i,s){let a;const l=s[i.index];if(Di(l))a=l;else{let c;if(8&i.type)c=Gt(l);else{const f=s[11];c=f.createComment("");const _=zn(i,s);Au(f,ig(f,_),c,function pD(i,s){return Qt(i)?i.nextSibling(s):s.nextSibling}(f,_),!1)}s[i.index]=a=xy(l,s,c,i),cf(s,a)}return new zw(a,i,s)}class lm{constructor(s){this.queryList=s,this.matches=null}clone(){return new lm(this.queryList)}setDirty(){this.queryList.setDirty()}}class cm{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let f=0;f<l;f++){const _=a.getByIndex(f);c.push(this.queries[_.indexInDeclarationView].clone())}return new cm(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==nv(s,a).matches&&this.queries[a].setDirty()}}class X_{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class ev{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const c=null!==a?a.length:0,f=this.getByIndex(l).embeddedTView(s,c);f&&(f.indexInDeclarationView=l,null!==a?a.push(f):a=[f])}return null!==a?new ev(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class ep{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new ep(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let c=0;c<l.length;c++){const f=l[c];this.matchTNodeWithReadOption(s,a,Gb(a,f)),this.matchTNodeWithReadOption(s,a,ga(a,s,f,!1,!1))}else l===_c?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,ga(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const c=this.metadata.read;if(null!==c)if(c===rh||c===sh||c===_c&&4&a.type)this.addMatch(a.index,-2);else{const f=ga(a,s,c,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function Gb(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function qb(i,s,a,l){return-1===a?function tv(i,s){return 11&i.type?zu(i,s):4&i.type?Xf(i,s):null}(s,i):-2===a?function zb(i,s,a){return a===rh?zu(s,i):a===_c?Xf(s,i):a===sh?vc(s,i):void 0}(i,s,l):Zi(i,i[1],a,s)}function dm(i,s,a,l){const c=s[19].queries[l];if(null===c.matches){const f=i.data,_=a.matches,E=[];for(let I=0;I<_.length;I+=2){const A=_[I];E.push(A<0?null:qb(s,f[A],_[I+1],a.metadata.read))}c.matches=E}return c.matches}function nr(i,s,a,l){const c=i.queries.getByIndex(a),f=c.matches;if(null!==f){const _=dm(i,s,c,a);for(let E=0;E<f.length;E+=2){const I=f[E];if(I>0)l.push(_[E/2]);else{const A=f[E+1],S=s[-I];for(let k=10;k<S.length;k++){const V=S[k];V[17]===V[3]&&nr(V[1],V,A,l)}if(null!==S[9]){const k=S[9];for(let V=0;V<k.length;V++){const Z=k[V];nr(Z[1],Z,A,l)}}}}}return l}function Ww(i){const s=Te(),a=xt(),l=ou();jc(l+1);const c=nv(a,l);if(i.dirty&&Ks(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const f=c.crossesNgTemplate?nr(a,s,l,[]):dm(a,s,c,l);i.reset(f,Ob),i.notifyOnChanges()}return!0}return!1}function Kw(i,s,a,l){const c=xt();if(c.firstCreatePass){const f=rn();(function hm(i,s,a){null===i.queries&&(i.queries=new ev),i.queries.track(new ep(s,a))})(c,new X_(s,a,l),f.index),function Qw(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}!function Yw(i,s,a){const l=new K_(4==(4&a));Dg(i,s,l,l.destroy),null===s[19]&&(s[19]=new cm),s[19].queries.push(new lm(l))}(c,Te(),a)}function Zw(){return function Kb(i,s){return i[19].queries[s].queryList}(Te(),ou())}function nv(i,s){return i.queries.getByIndex(s)}function dh(...i){}const Em=new cn("Application Initializer");let wm=(()=>{class i{constructor(a){this.appInits=a,this.resolve=dh,this.reject=dh,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,c)=>{this.resolve=l,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const f=this.appInits[c]();if(je(f))a.push(f);else if(wf(f)){const _=new Promise((E,I)=>{f.subscribe({complete:E,error:I})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(c=>{this.reject(c)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(tt(Em,8))},i.\u0275prov=Ht({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Im=new cn("AppId",{providedIn:"root",factory:function Dm(){return`${Yu()}${Yu()}${Yu()}`}});function Yu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const $a=new cn("Platform Initializer"),pv=new cn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),wc=new cn("appBootstrapListener");let hI=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Ht({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const gv=new cn("LocaleId",{providedIn:"root",factory:()=>Ft(gv,ht.Optional|ht.SkipSelf)||function hh(){return"undefined"!=typeof $localize&&$localize.locale||em}()}),tC=new cn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class mv{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let nC=(()=>{class i{compileModuleSync(a){return new um(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),f=y(An(a).declarations).reduce((_,E)=>{const I=Tn(E);return I&&_.push(new Wf(I)),_},[]);return new mv(l,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Ht({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const yv=(()=>Promise.resolve(0))();function _v(i){"undefined"==typeof Zone?yv.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class wo{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ls(!1),this.onMicrotaskEmpty=new ls(!1),this.onStable=new ls(!1),this.onError=new ls(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!l&&a,c.shouldCoalesceRunChangeDetection=l,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function yI(){let i=Nt.requestAnimationFrame,s=Nt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function EI(i){const s=()=>{!function vI(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Nt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,vv(i),i.isCheckStableRunning=!0,bm(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),vv(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,c,f,_,E)=>{try{return wI(i),a.invokeTask(c,f,_,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),II(i)}},onInvoke:(a,l,c,f,_,E,I)=>{try{return wI(i),a.invoke(c,f,_,E,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),II(i)}},onHasTask:(a,l,c,f)=>{a.hasTask(c,f),l===c&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,vv(i),bm(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,l,c,f)=>(a.handleError(c,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(c)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!wo.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(wo.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,c){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+c,s,_I,dh,dh);try{return f.runTask(_,a,l)}finally{f.cancelTask(_)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const _I={};function bm(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function vv(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function wI(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function II(i){i._nesting--,bm(i)}class iC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ls,this.onMicrotaskEmpty=new ls,this.onStable=new ls,this.onError=new ls}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,c){return s.apply(a,l)}}let Cm=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{wo.assertNotInAngularZone(),_v(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())_v(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,c){let f=-1;l&&l>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:c})}whenStable(a,l,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(tt(wo))},i.\u0275prov=Ht({token:i,factory:i.\u0275fac}),i})(),Ev=(()=>{class i{constructor(){this._applications=new Map,op.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return op.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Ht({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();class wv{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function sC(i){op=i}let op=new wv,Ic=null;const Tm=new cn("AllowMultipleToken"),Iv=new cn("PlatformOnDestroy");class bv{constructor(s,a){this.name=s,this.token=a}}function Am(i,s,a=[]){const l=`Platform: ${s}`,c=new cn(l);return(f=[])=>{let _=ap();if(!_||_.injector.get(Tm,!1)){const E=[...a,...f,{provide:c,useValue:!0}];i?i(E):function uC(i){if(Ic&&!Ic.get(Tm,!1))throw new Re(400,"");Ic=i;const s=i.get(Sm),a=i.get($a,null);a&&a.forEach(l=>l())}(function Cv(i=[],s){return go.create({name:s,providers:[{provide:po,useValue:"platform"},{provide:Iv,useValue:()=>Ic=null},...i]})}(E,l))}return function lC(i){const s=ap();if(!s)throw new Re(401,"");return s}()}}function ap(){var i;return null!==(i=null==Ic?void 0:Ic.get(Sm))&&void 0!==i?i:null}let Sm=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const E=function Tv(i,s){let a;return a="noop"===i?new iC:("zone.js"===i?void 0:i)||new wo({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),I=[{provide:wo,useValue:E}];return E.run(()=>{const A=go.create({providers:I,parent:this.injector,name:a.moduleType.name}),S=a.create(A),k=S.injector.get(wd,null);if(!k)throw new Re(402,"");return E.runOutsideAngular(()=>{const V=E.onError.subscribe({next:Z=>{k.handleError(Z)}});S.onDestroy(()=>{Sv(this._modules,S),V.unsubscribe()})}),function fh(i,s,a){try{const l=a();return je(l)?l.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(k,E,()=>{const V=S.injector.get(wm);return V.runInitializers(),V.donePromise.then(()=>(function nm(i){Rt(i,"Expected localeId to be defined"),"string"==typeof i&&(iw=i.toLowerCase().replace(/_/g,"-"))}(S.injector.get(gv,em)||em),this._moduleDoBootstrap(S),S))})})}bootstrapModule(a,l=[]){const c=Av({},l);return function Dv(i,s,a){const l=new um(a);return Promise.resolve(l)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,c))}_moduleDoBootstrap(a){const l=a.injector.get(up);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>l.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new Re(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Re(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(Iv,null);null==a||a(),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(tt(go))},i.\u0275prov=Ht({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function Av(i,s){return Array.isArray(s)?s.reduce(Av,i):Object.assign(Object.assign({},i),s)}let up=(()=>{class i{constructor(a,l,c,f){this._zone=a,this._injector=l,this._exceptionHandler=c,this._initStatus=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new P.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),E=new P.y(I=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{wo.assertNotInAngularZone(),_v(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{wo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{A.unsubscribe(),S.unsubscribe()}});this.isStable=(0,oe.T)(_,E.pipe((0,ne.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Re(405,"");let c;c=a instanceof $f?a:this._injector.get(qf).resolveComponentFactory(a),this.componentTypes.push(c.componentType);const f=function aC(i){return i.isBoundToModule}(c)?void 0:this._injector.get(Ba),E=c.create(go.NULL,[],l||c.selector,f),I=E.location.nativeElement,A=E.injector.get(Cm,null),S=A&&E.injector.get(Ev);return A&&S&&S.registerApplication(I,A),E.onDestroy(()=>{this.detachView(E.hostView),Sv(this.components,E),S&&S.unregisterApplication(I)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Re(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Sv(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(wc,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(tt(wo),tt(go),tt(wd),tt(wm))},i.\u0275prov=Ht({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Sv(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let xm=!0,DI=!1;function Mv(){return DI=!0,xm}function cC(){if(DI)throw new Error("Cannot enable prod mode after platform setup.");xm=!1}let xv=(()=>{class i{}return i.__NG_ELEMENT_ID__=dC,i})();function dC(i){return function Rv(i,s,a){if(Sc(i)&&!a){const l=Wn(i.index,s);return new Ua(l,l)}return 47&i.type?new Ua(s[16],s):null}(rn(),Te(),16==(16&i))}class MI{constructor(){}supports(s){return Fd(s)}create(s){return new Fv(s)}}const xI=(i,s)=>s;class Fv{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||xI}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,c=0,f=null;for(;a||l;){const _=!l||a&&a.currentIndex<Fm(l,c,f)?a:l,E=Fm(_,c,f),I=_.currentIndex;if(_===l)c--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)c++;else{f||(f=[]);const A=E-c,S=I-c;if(A!=S){for(let V=0;V<A;V++){const Z=V<f.length?f[V]:f[V]=0,ye=Z+V;S<=ye&&ye<A&&(f[V]=Z+1)}f[_.previousIndex]=S-A}}E!==I&&s(_,E,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Fd(s))throw new Re(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,f,_,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)f=s[E],_=this._trackByFn(E,f),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,f,_,E)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,_,E),l=!0),a=a._next}else c=0,function Lg(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Lu()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,E=>{_=this._trackByFn(c,E),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,E,_,c)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,_,c),l=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,c){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,c)):s=this._addAfter(new RI(a,l),f,c),s}_verifyReinsertion(s,a,l,c){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==f?s=this._reinsertAfter(f,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,f=s._nextRemoved;return null===c?this._removalsHead=f:c._nextRemoved=f,null===f?this._removalsTail=c:f._prevRemoved=c,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new km),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new km),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class RI{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Lv{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class km{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new Lv,this.map.set(a,l)),l.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Fm(i,s,a){const l=i.previousIndex;if(null===l)return l;let c=0;return a&&l<a.length&&(c=a[l]),l+s+c}class dp{constructor(){}supports(s){return s instanceof Map||Qy(s)}create(){return new Vv}}class Vv{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Qy(s)))throw new Re(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(c,l);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const f=c._prev,_=c._next;return f&&(f._next=_),_&&(_._prev=f),c._next=null,c._prev=null,c}const l=new NI(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class NI{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Lm(){return new Vm([new MI])}let Vm=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Lm()),deps:[[i,new Ps,new fr]]}}find(a){const l=this.factories.find(c=>c.supports(a));if(null!=l)return l;throw new Re(901,"")}}return i.\u0275prov=Ht({token:i,providedIn:"root",factory:Lm}),i})();function Dc(){return new hp([new dp])}let hp=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Dc()),deps:[[i,new Ps,new fr]]}}find(a){const l=this.factories.find(f=>f.supports(a));if(l)return l;throw new Re(901,"")}}return i.\u0275prov=Ht({token:i,providedIn:"root",factory:Dc}),i})();const vC=Am(null,"core",[]);let PI=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(tt(up))},i.\u0275mod=wr({type:i}),i.\u0275inj=Bt({}),i})()},3942:(Je,Ee,O)=>{O.d(Ee,{Z:()=>Re});var g=O(2090),Q=O(4859),P=O(9681),oe=O(1877);class ne{constructor(he,De){this._delegate=he,this.firebase=De,(0,P._addComponent)(he,new Q.wA("app-compat",()=>this,"PUBLIC")),this.container=he.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(he){this._delegate.automaticDataCollectionEnabled=he}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(he=>{this._delegate.checkDestroyed(),he()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(he,De=P._DEFAULT_ENTRY_NAME){var Ge;this._delegate.checkDestroyed();const Ke=this._delegate.container.getProvider(he);return!Ke.isInitialized()&&"EXPLICIT"===(null===(Ge=Ke.getComponent())||void 0===Ge?void 0:Ge.instantiationMode)&&Ke.initialize(),Ke.getImmediate({identifier:De})}_removeServiceInstance(he,De=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(he).clearInstance(De)}_addComponent(he){(0,P._addComponent)(this._delegate,he)}_addOrOverwriteComponent(he){(0,P._addOrOverwriteComponent)(this._delegate,he)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ae=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function ue(){const Ve=function ie(Ve){const he={},De={__esModule:!0,initializeApp:function Ce(Ue,B={}){const _e=P.initializeApp(Ue,B);if((0,g.r3)(he,_e.name))return he[_e.name];const W=new Ve(_e,De);return he[_e.name]=W,W},app:Ke,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function we(Ue){const B=Ue.name,_e=B.replace("-compat","");if(P._registerComponent(Ue)&&"PUBLIC"===Ue.type){const W=(re=Ke())=>{if("function"!=typeof re[_e])throw ae.create("invalid-app-argument",{appName:B});return re[_e]()};void 0!==Ue.serviceProps&&(0,g.ZB)(W,Ue.serviceProps),De[_e]=W,Ve.prototype[_e]=function(...re){return this._getService.bind(this,B).apply(this,Ue.multipleInstances?re:[])}}return"PUBLIC"===Ue.type?De[_e]:null},removeApp:function Ge(Ue){delete he[Ue]},useAsService:function Be(Ue,B){return"serverAuth"===B?null:B},modularAPIs:P}};function Ke(Ue){if(!(0,g.r3)(he,Ue=Ue||P._DEFAULT_ENTRY_NAME))throw ae.create("no-app",{appName:Ue});return he[Ue]}return De.default=De,Object.defineProperty(De,"apps",{get:function ve(){return Object.keys(he).map(Ue=>he[Ue])}}),Ke.App=Ve,De}(ne);return Ve.INTERNAL=Object.assign(Object.assign({},Ve.INTERNAL),{createFirebaseNamespace:ue,extendNamespace:function he(De){(0,g.ZB)(Ve,De)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),Ve}(),U=new oe.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){U.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ve=self.firebase.SDK_VERSION;Ve&&Ve.indexOf("LITE")>=0&&U.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Re=j;!function Ae(Ve){(0,P.registerVersion)("@firebase/app-compat","0.1.25",Ve)}()},9681:(Je,Ee,O)=>{O.r(Ee),O.d(Ee,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>vi,_DEFAULT_ENTRY_NAME:()=>Rt,_addComponent:()=>Zt,_addOrOverwriteComponent:()=>Ht,_apps:()=>zt,_clearComponents:()=>$i,_components:()=>fn,_getProvider:()=>Bt,_registerComponent:()=>vr,_removeServiceInstance:()=>Mt,deleteApp:()=>ht,getApp:()=>Wr,getApps:()=>Ei,initializeApp:()=>gs,onLog:()=>pn,registerVersion:()=>ln,setLogLevel:()=>js});var g=O(5861),Q=O(4859),P=O(1877),oe=O(2090),ne=O(8766);class pe{constructor(Y){this.container=Y}getPlatformInfoString(){return this.container.getProviders().map(Me=>{if(function ae($){const Y=$.getComponent();return"VERSION"===(null==Y?void 0:Y.type)}(Me)){const Ye=Me.getImmediate();return`${Ye.library}/${Ye.version}`}return null}).filter(Me=>Me).join(" ")}}const ie="@firebase/app",j=new P.Yd("@firebase/app"),Rt="[DEFAULT]",ze={[ie]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},zt=new Map,fn=new Map;function Zt($,Y){try{$.container.addComponent(Y)}catch(Me){j.debug(`Component ${Y.name} failed to register with FirebaseApp ${$.name}`,Me)}}function Ht($,Y){$.container.addOrOverwriteComponent(Y)}function vr($){const Y=$.name;if(fn.has(Y))return j.debug(`There were multiple attempts to register component ${Y}.`),!1;fn.set(Y,$);for(const Me of zt.values())Zt(Me,$);return!0}function Bt($,Y){const Me=$.container.getProvider("heartbeat").getImmediate({optional:!0});return Me&&Me.triggerHeartbeat(),$.container.getProvider(Y)}function Mt($,Y,Me=Rt){Bt($,Y).clearInstance(Me)}function $i(){fn.clear()}const rr=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Er{constructor(Y,Me,Ye){this._isDeleted=!1,this._options=Object.assign({},Y),this._config=Object.assign({},Me),this._name=Me.name,this._automaticDataCollectionEnabled=Me.automaticDataCollectionEnabled,this._container=Ye,this.container.addComponent(new Q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Y){this.checkDestroyed(),this._automaticDataCollectionEnabled=Y}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Y){this._isDeleted=Y}checkDestroyed(){if(this.isDeleted)throw rr.create("app-deleted",{appName:this._name})}}const vi="9.8.1";function gs($,Y={}){"object"!=typeof Y&&(Y={name:Y});const Me=Object.assign({name:Rt,automaticDataCollectionEnabled:!1},Y),Ye=Me.name;if("string"!=typeof Ye||!Ye)throw rr.create("bad-app-name",{appName:String(Ye)});const ct=zt.get(Ye);if(ct){if((0,oe.vZ)($,ct.options)&&(0,oe.vZ)(Me,ct.config))return ct;throw rr.create("duplicate-app",{appName:Ye})}const vt=new Q.H0(Ye);for(const yt of fn.values())vt.addComponent(yt);const en=new Er($,Me,vt);return zt.set(Ye,en),en}function Wr($=Rt){const Y=zt.get($);if(!Y)throw rr.create("no-app",{appName:$});return Y}function Ei(){return Array.from(zt.values())}function ht($){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,g.Z)(function*($){const Y=$.name;zt.has(Y)&&(zt.delete(Y),yield Promise.all($.container.getProviders().map(Me=>Me.delete())),$.isDeleted=!0)})).apply(this,arguments)}function ln($,Y,Me){var Ye;let ct=null!==(Ye=ze[$])&&void 0!==Ye?Ye:$;Me&&(ct+=`-${Me}`);const vt=ct.match(/\s|\//),en=Y.match(/\s|\//);if(vt||en){const yt=[`Unable to register library "${ct}" with version "${Y}":`];return vt&&yt.push(`library name "${ct}" contains illegal characters (whitespace or "/")`),vt&&en&&yt.push("and"),en&&yt.push(`version name "${Y}" contains illegal characters (whitespace or "/")`),void j.warn(yt.join(" "))}vr(new Q.wA(`${ct}-version`,()=>({library:ct,version:Y}),"VERSION"))}function pn($,Y){if(null!==$&&"function"!=typeof $)throw rr.create("invalid-log-argument");(0,P.Am)($,Y)}function js($){(0,P.Ub)($)}const _n="firebase-heartbeat-store";let oi=null;function Io(){return oi||(oi=(0,ne.X3)("firebase-heartbeat-database",1,{upgrade:($,Y)=>{0===Y&&$.createObjectStore(_n)}}).catch($=>{throw rr.create("storage-open",{originalErrorMessage:$.message})})),oi}function rt(){return(rt=(0,g.Z)(function*($){try{return(yield Io()).transaction(_n).objectStore(_n).get(Yr($))}catch(Y){throw rr.create("storage-get",{originalErrorMessage:Y.message})}})).apply(this,arguments)}function mt($,Y){return ir.apply(this,arguments)}function ir(){return(ir=(0,g.Z)(function*($,Y){try{const Ye=(yield Io()).transaction(_n,"readwrite");return yield Ye.objectStore(_n).put(Y,Yr($)),Ye.done}catch(Me){throw rr.create("storage-set",{originalErrorMessage:Me.message})}})).apply(this,arguments)}function Yr($){return`${$.name}!${$.options.appId}`}class sr{constructor(Y){this.container=Y,this._heartbeatsCache=null;const Me=this.container.getProvider("app").getImmediate();this._storage=new H(Me),this._heartbeatsCachePromise=this._storage.read().then(Ye=>(this._heartbeatsCache=Ye,Ye))}triggerHeartbeat(){var Y=this;return(0,g.Z)(function*(){const Ye=Y.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ct=or();if(null===Y._heartbeatsCache&&(Y._heartbeatsCache=yield Y._heartbeatsCachePromise),Y._heartbeatsCache.lastSentHeartbeatDate!==ct&&!Y._heartbeatsCache.heartbeats.some(vt=>vt.date===ct))return Y._heartbeatsCache.heartbeats.push({date:ct,agent:Ye}),Y._heartbeatsCache.heartbeats=Y._heartbeatsCache.heartbeats.filter(vt=>{const en=new Date(vt.date).valueOf();return Date.now()-en<=2592e6}),Y._storage.overwrite(Y._heartbeatsCache)})()}getHeartbeatsHeader(){var Y=this;return(0,g.Z)(function*(){if(null===Y._heartbeatsCache&&(yield Y._heartbeatsCachePromise),null===Y._heartbeatsCache||0===Y._heartbeatsCache.heartbeats.length)return"";const Me=or(),{heartbeatsToSend:Ye,unsentEntries:ct}=function L($,Y=1024){const Me=[];let Ye=$.slice();for(const ct of $){const vt=Me.find(en=>en.agent===ct.agent);if(vt){if(vt.dates.push(ct.date),G(Me)>Y){vt.dates.pop();break}}else if(Me.push({agent:ct.agent,dates:[ct.date]}),G(Me)>Y){Me.pop();break}Ye=Ye.slice(1)}return{heartbeatsToSend:Me,unsentEntries:Ye}}(Y._heartbeatsCache.heartbeats),vt=(0,oe.L)(JSON.stringify({version:2,heartbeats:Ye}));return Y._heartbeatsCache.lastSentHeartbeatDate=Me,ct.length>0?(Y._heartbeatsCache.heartbeats=ct,yield Y._storage.overwrite(Y._heartbeatsCache)):(Y._heartbeatsCache.heartbeats=[],Y._storage.overwrite(Y._heartbeatsCache)),vt})()}}function or(){return(new Date).toISOString().substring(0,10)}class H{constructor(Y){this.app=Y,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Y=this;return(0,g.Z)(function*(){return(yield Y._canUseIndexedDBPromise)&&(yield function kt($){return rt.apply(this,arguments)}(Y.app))||{heartbeats:[]}})()}overwrite(Y){var Me=this;return(0,g.Z)(function*(){var Ye;if(yield Me._canUseIndexedDBPromise){const vt=yield Me.read();return mt(Me.app,{lastSentHeartbeatDate:null!==(Ye=Y.lastSentHeartbeatDate)&&void 0!==Ye?Ye:vt.lastSentHeartbeatDate,heartbeats:Y.heartbeats})}})()}add(Y){var Me=this;return(0,g.Z)(function*(){var Ye;if(yield Me._canUseIndexedDBPromise){const vt=yield Me.read();return mt(Me.app,{lastSentHeartbeatDate:null!==(Ye=Y.lastSentHeartbeatDate)&&void 0!==Ye?Ye:vt.lastSentHeartbeatDate,heartbeats:[...vt.heartbeats,...Y.heartbeats]})}})()}}function G($){return(0,oe.L)(JSON.stringify({version:2,heartbeats:$})).length}!function be($){vr(new Q.wA("platform-logger",Y=>new pe(Y),"PRIVATE")),vr(new Q.wA("heartbeat",Y=>new sr(Y),"PRIVATE")),ln(ie,"0.7.24",$),ln(ie,"0.7.24","esm2017"),ln("fire-js","")}("")},4859:(Je,Ee,O)=>{O.d(Ee,{H0:()=>ie,wA:()=>P});var g=O(5861),Q=O(2090);class P{constructor(j,U,X){this.name=j,this.instanceFactory=U,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const oe="[DEFAULT]";class ne{constructor(j,U){this.name=j,this.container=U,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const U=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has(U)){const X=new Q.BH;if(this.instancesDeferred.set(U,X),this.isInitialized(U)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:U});He&&X.resolve(He)}catch(He){}}return this.instancesDeferred.get(U).promise}getImmediate(j){var U;const X=this.normalizeInstanceIdentifier(null==j?void 0:j.identifier),He=null!==(U=null==j?void 0:j.optional)&&void 0!==U&&U;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(Ae){if(He)return null;throw Ae}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function ae(ue){return"EAGER"===ue.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:oe})}catch(U){}for(const[U,X]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(U);try{const Ae=this.getOrInitializeService({instanceIdentifier:He});X.resolve(Ae)}catch(Ae){}}}}clearInstance(j=oe){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,g.Z)(function*(){const U=Array.from(j.instances.values());yield Promise.all([...U.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...U.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=oe){return this.instances.has(j)}getOptions(j=oe){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:U={}}=j,X=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:X,options:U});for(const[Ae,Re]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(Ae)&&Re.resolve(He);return He}onInit(j,U){var X;const He=this.normalizeInstanceIdentifier(U),Ae=null!==(X=this.onInitCallbacks.get(He))&&void 0!==X?X:new Set;Ae.add(j),this.onInitCallbacks.set(He,Ae);const Re=this.instances.get(He);return Re&&j(Re,He),()=>{Ae.delete(j)}}invokeOnInitCallbacks(j,U){const X=this.onInitCallbacks.get(U);if(X)for(const He of X)try{He(j,U)}catch(Ae){}}getOrInitializeService({instanceIdentifier:j,options:U={}}){let X=this.instances.get(j);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(ue=j,ue===oe?void 0:ue),options:U}),this.instances.set(j,X),this.instancesOptions.set(j,U),this.invokeOnInitCallbacks(X,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,X)}catch(He){}var ue;return X||null}normalizeInstanceIdentifier(j=oe){return this.component?this.component.multipleInstances?j:oe:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ie{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const U=this.getProvider(j.name);if(U.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);U.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const U=new ne(j,this);return this.providers.set(j,U),U}getProviders(){return Array.from(this.providers.values())}}},1877:(Je,Ee,O)=>{O.d(Ee,{Am:()=>ue,Ub:()=>ie,Yd:()=>ae,in:()=>Q});const g=[];var Q=(()=>{return(j=Q||(Q={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",Q;var j})();const P={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},oe=Q.INFO,ne={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},pe=(j,U,...X)=>{if(U<j.logLevel)return;const He=(new Date).toISOString(),Ae=ne[U];if(!Ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${U})`);console[Ae](`[${He}]  ${j.name}:`,...X)};class ae{constructor(U){this.name=U,this._logLevel=oe,this._logHandler=pe,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(U){if(!(U in Q))throw new TypeError(`Invalid value "${U}" assigned to \`logLevel\``);this._logLevel=U}setLogLevel(U){this._logLevel="string"==typeof U?P[U]:U}get logHandler(){return this._logHandler}set logHandler(U){if("function"!=typeof U)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=U}get userLogHandler(){return this._userLogHandler}set userLogHandler(U){this._userLogHandler=U}debug(...U){this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...U),this._logHandler(this,Q.DEBUG,...U)}log(...U){this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...U),this._logHandler(this,Q.VERBOSE,...U)}info(...U){this._userLogHandler&&this._userLogHandler(this,Q.INFO,...U),this._logHandler(this,Q.INFO,...U)}warn(...U){this._userLogHandler&&this._userLogHandler(this,Q.WARN,...U),this._logHandler(this,Q.WARN,...U)}error(...U){this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...U),this._logHandler(this,Q.ERROR,...U)}}function ie(j){g.forEach(U=>{U.setLogLevel(j)})}function ue(j,U){for(const X of g){let He=null;U&&U.level&&(He=P[U.level]),X.userLogHandler=null===j?null:(Ae,Re,...Ve)=>{const he=Ve.map(De=>{if(null==De)return null;if("string"==typeof De)return De;if("number"==typeof De||"boolean"==typeof De)return De.toString();if(De instanceof Error)return De.message;try{return JSON.stringify(De)}catch(Ge){return null}}).filter(De=>De).join(" ");Re>=(null!=He?He:Ae.logLevel)&&j({level:Q[Re].toLowerCase(),message:he,args:Ve,type:Ae.name})}}}},8766:(Je,Ee,O)=>{O.d(Ee,{Lj:()=>Ce,X3:()=>Ke});var g=O(5861);let P,oe;const ae=new WeakMap,ie=new WeakMap,ue=new WeakMap,j=new WeakMap,U=new WeakMap;let Ae={get(B,_e,W){if(B instanceof IDBTransaction){if("done"===_e)return ie.get(B);if("objectStoreNames"===_e)return B.objectStoreNames||ue.get(B);if("store"===_e)return W.objectStoreNames[1]?void 0:W.objectStore(W.objectStoreNames[0])}return De(B[_e])},set:(B,_e,W)=>(B[_e]=W,!0),has:(B,_e)=>B instanceof IDBTransaction&&("done"===_e||"store"===_e)||_e in B};function he(B){return"function"==typeof B?function Ve(B){return B!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function pe(){return oe||(oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(B)?function(..._e){return B.apply(Ge(this),_e),De(ae.get(this))}:function(..._e){return De(B.apply(Ge(this),_e))}:function(_e,...W){const re=B.call(Ge(this),_e,...W);return ue.set(re,_e.sort?_e.sort():[_e]),De(re)}}(B):(B instanceof IDBTransaction&&function He(B){if(ie.has(B))return;const _e=new Promise((W,re)=>{const J=()=>{B.removeEventListener("complete",me),B.removeEventListener("error",se),B.removeEventListener("abort",se)},me=()=>{W(),J()},se=()=>{re(B.error||new DOMException("AbortError","AbortError")),J()};B.addEventListener("complete",me),B.addEventListener("error",se),B.addEventListener("abort",se)});ie.set(B,_e)}(B),((B,_e)=>_e.some(W=>B instanceof W))(B,function ne(){return P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(B,Ae):B)}function De(B){if(B instanceof IDBRequest)return function X(B){const _e=new Promise((W,re)=>{const J=()=>{B.removeEventListener("success",me),B.removeEventListener("error",se)},me=()=>{W(De(B.result)),J()},se=()=>{re(B.error),J()};B.addEventListener("success",me),B.addEventListener("error",se)});return _e.then(W=>{W instanceof IDBCursor&&ae.set(W,B)}).catch(()=>{}),U.set(_e,B),_e}(B);if(j.has(B))return j.get(B);const _e=he(B);return _e!==B&&(j.set(B,_e),U.set(_e,B)),_e}const Ge=B=>U.get(B);function Ke(B,_e,{blocked:W,upgrade:re,blocking:J,terminated:me}={}){const se=indexedDB.open(B,_e),Ne=De(se);return re&&se.addEventListener("upgradeneeded",ot=>{re(De(se.result),ot.oldVersion,ot.newVersion,De(se.transaction))}),W&&se.addEventListener("blocked",()=>W()),Ne.then(ot=>{me&&ot.addEventListener("close",()=>me()),J&&ot.addEventListener("versionchange",()=>J())}).catch(()=>{}),Ne}function Ce(B,{blocked:_e}={}){const W=indexedDB.deleteDatabase(B);return _e&&W.addEventListener("blocked",()=>_e()),De(W).then(()=>{})}const ve=["get","getKey","getAll","getAllKeys","count"],we=["put","add","delete","clear"],Be=new Map;function Ue(B,_e){if(!(B instanceof IDBDatabase)||_e in B||"string"!=typeof _e)return;if(Be.get(_e))return Be.get(_e);const W=_e.replace(/FromIndex$/,""),re=_e!==W,J=we.includes(W);if(!(W in(re?IDBIndex:IDBObjectStore).prototype)||!J&&!ve.includes(W))return;const me=function(){var se=(0,g.Z)(function*(Ne,...ot){const Pt=this.transaction(Ne,J?"readwrite":"readonly");let Rt=Pt.store;return re&&(Rt=Rt.index(ot.shift())),(yield Promise.all([Rt[W](...ot),J&&Pt.done]))[0]});return function(ot){return se.apply(this,arguments)}}();return Be.set(_e,me),me}!function Re(B){Ae=B(Ae)}(B=>MM(SM({},B),{get:(_e,W,re)=>Ue(_e,W)||B.get(_e,W,re),has:(_e,W)=>!!Ue(_e,W)||B.has(_e,W)}))},5861:(Je,Ee,O)=>{function g(P,oe,ne,pe,ae,ie,ue){try{var j=P[ie](ue),U=j.value}catch(X){return void ne(X)}j.done?oe(U):Promise.resolve(U).then(pe,ae)}function Q(P){return function(){var oe=this,ne=arguments;return new Promise(function(pe,ae){var ie=P.apply(oe,ne);function ue(U){g(ie,pe,ae,ue,j,"next",U)}function j(U){g(ie,pe,ae,ue,j,"throw",U)}ue(void 0)})}}O.d(Ee,{Z:()=>Q})}},Je=>{Je(Je.s=6884)}]);